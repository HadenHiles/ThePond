<?xml version="1.0" encoding="UTF-8"?>
<theme name="Default" author_name="Invision Power Services, Inc" author_url="https://www.invisioncommunity.com">
 <template template_group="feeds" template_name="importPreview" template_data="$feed" template_location="admin" template_app="forums"><![CDATA[<form method="post">
	<input type="hidden" name="continue" value="1">
	<ol class='ipsDataList ipsClear'>
		{{foreach $feed as $item}}
			<li class="ipsDataItem">
				<div class='ipsDataItem_main'>
					<h3 class='ipsDataItem_title'>{$item['title']}</h3>
					<div class='ipsDataItem_meta ipsType_light'>
						{$item['date']}
					</div>
				</div>
			</li>
		{{endforeach}}
	</ol>
	<div class="ipsAreaBackground_light ipsClearfix ipsPad ipsType_center">
		<button type="submit" class="ipsButton ipsButton_primary">{lang="continue"}</button>
	</div>
</form>]]></template>
 <template template_group="forums" template_name="clubForums" template_data="" template_location="front" template_app="forums"><![CDATA[
<div class="ipsPageHeader ipsClearfix">
	<header class='ipsSpacer_bottom'>
		<h1 class="ipsType_pageTitle">{lang="club_node_forums"}</h1>
	</header>
</div>

<div class='ipsList_reset cForumList ipsBox ipsSpacer_bottom' data-controller='forums.front.forum.forumList' data-baseURL=''>
	<h2 class='ipsType_sectionTitle ipsType_reset'>{lang="subforums_header_category"}</h2>
	{{if \IPS\forums\Forum::getMemberView() === 'grid'}}
		<div class='ipsAreaBackground ipsPad' data-role="forums">
			<div class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='300' data-ipsGrid-maxItemSize='400' data-ipsGrid-equalHeights='row'>
				{{foreach \IPS\forums\Forum::clubNodes() as $childforum}}
					{template="forumGridItem" group="index" app="forums" params="$childforum"}
				{{endforeach}}
			</div>
		</div>
	{{else}}
		<ol class="ipsDataList ipsDataList_zebra ipsDataList_large ipsAreaBackground_reset">
			{{foreach \IPS\forums\Forum::clubNodes() as $childforum}}
				{template="forumRow" group="index" app="forums" params="$childforum, TRUE"}
			{{endforeach}}
		</ol>
	{{endif}}				
</div>]]></template>
 <template template_group="forums" template_name="forumButtons" template_data="$forum" template_location="front" template_app="forums"><![CDATA[{{if $forum->can('add')}}
	<li class='ipsToolList_primaryAction'>
		{{if $forum->forums_bitoptions['bw_enable_answers']}}
			<a class="ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth" href="{$forum->url()->setQueryString( 'do', 'add' )}" title='{lang="ask_a_question_desc"}'>{lang="ask_a_question"}</a>
		{{else}}
			<a class="ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth" href="{$forum->url()->setQueryString( 'do', 'add' )}" title='{lang="start_new_topic_desc"}'>{lang="start_new_topic"}</a>
		{{endif}}
	</li>
{{endif}}
{{if $forum->topics AND \IPS\Member::loggedIn()->member_id}}
	<li>
		<a href="{$forum->url()->setQueryString( array( 'do' => 'markRead', 'fromForum' => 1 ) )->csrf()}" title='{lang="mark_forum_read_title"}' class='ipsButton ipsButton_medium ipsButton_fullWidth ipsButton_link' data-action='markForumRead'><i class="fa fa-check"></i> {lang="mark_forum_read"}</a>
	</li>
{{endif}}]]></template>
 <template template_group="forums" template_name="forumDisplay" template_data="$forum, $table" template_location="front" template_app="forums"><![CDATA[
{{if $club = $forum->club()}}
	{{if settings.clubs and settings.clubs_header == 'full'}}
		{template="header" app="core" group="clubs" params="$club, $forum"}
	{{endif}}
	<div id='elClubContainer'>
{{endif}}

{{if !\IPS\Request::i()->advancedSearchForm}}
	{{$followerCount = \IPS\forums\Topic::containerFollowerCount( $forum );}}
	<div class="ipsPageHeader ipsClearfix">
		<header class='ipsSpacer_bottom'>
			{{if $forum->feature_color}}
				<div class="cForumContainerHint" style="background-color: {$forum->feature_color}"></div>
			{{endif}}
			<h1 class="ipsType_pageTitle">{$forum->_title}</h1>
			{{if $forum->sub_can_post and !$forum->password}}
				<div class='ipsPos_right ipsResponsive_noFloat ipsResponsive_hidePhone'>
					{template="follow" app="core" group="global" params="'forums','forum', $forum->_id, $followerCount"}
				</div>
			{{endif}}
			{{if $forum->description}}
				{template="richText" group="global" app="core" location="global" params="$forum->description, array('ipsType_normal')"}
			{{endif}}

			{{if $forum->show_rules == 1}}
				<hr class='ipsHr'>
				<a href="#elForumRules" class='ipsJS_show ipsType_normal' data-ipsDialog data-ipsDialog-title="{lang="forums_forum_{$forum->id}_rulestitle"}" data-ipsDialog-content="#elForumRules">{lang="forums_forum_{$forum->id}_rulestitle"}</a>
				<div id='elForumRules' class='ipsAreaBackground_light ipsPad ipsJS_hide'>
					{template="richText" group="global" app="core" location="global" params="\IPS\Member::loggedIn()->language()->addToStack('forums_forum_' . $forum->id . '_rules'), array('ipsType_medium')"}
				</div>
			{{elseif $forum->show_rules == 2}}
				<hr class='ipsHr'>
				<strong class='ipsType_normal'>{lang="forums_forum_{$forum->id}_rulestitle"}</strong>
				{template="richText" group="global" app="core" location="global" params="\IPS\Member::loggedIn()->language()->addToStack('forums_forum_' . $forum->id . '_rules'), array('ipsType_normal', 'ipsSpacer_top')"}
			{{endif}}
		</header>
	</div>
	
	{{if $forum->children()}}
		<div class='ipsList_reset cForumList ipsBox ipsSpacer_bottom' data-controller='core.global.core.table, forums.front.forum.forumList' data-baseURL=''>
			<h2 class='ipsType_sectionTitle ipsType_reset'>{{if $forum->sub_can_post}}{lang="subforums_header"}{{else}}{lang="subforums_header_category"}{{endif}}</h2>
			{{if \IPS\forums\Forum::getMemberView() === 'grid'}}
				<div class='ipsAreaBackground ipsPad' data-role="forums">
					<div class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='300' data-ipsGrid-maxItemSize='400' data-ipsGrid-equalHeights='row'>
						{{foreach $forum->children( 'view' ) as $childforum}}
							{template="forumGridItem" group="index" app="forums" params="$childforum"}
						{{endforeach}}
					</div>
				</div>
			{{else}}
				<ol class="ipsDataList ipsDataList_zebra ipsDataList_large ipsAreaBackground_reset">
					{{foreach $forum->children( 'view' ) as $childforum}}
						{template="forumRow" group="index" app="forums" params="$childforum, TRUE"}
					{{endforeach}}
				</ol>
			{{endif}}				
		</div>
	{{endif}}
{{endif}}
<div data-controller='forums.front.forum.forumPage'>
	<ul class="ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_both">
		{template="forumButtons" group="forums" params="$forum"}
	</ul>
	{$table|raw}
</div>
{{if !\IPS\Request::i()->advancedSearchForm && $forum->sub_can_post and !$forum->password}}
	<div class='ipsResponsive_showPhone ipsResponsive_block ipsSpacer ipsSpacer_both'>
		{template="follow" app="core" group="global" params="'forums','forum', $forum->_id, $followerCount"}
	</div>
{{endif}}

{{if $forum->club()}}
	</div>
{{endif}}]]></template>
 <template template_group="forums" template_name="forumHome" template_data="$forum, $featuredTopic, $popularQuestions, $newQuestions" template_location="front" template_app="forums"><![CDATA[<br>
{{if $featuredTopic}}
	<div class="ipsPad">
		<h2 class="ipsType_sectionHead">{lang="featured_question"}</h2>
		<br><br>
		<div class="ipsPhotoPanel ipsPhotoPanel_small ipsClearfix">
			<img src='{expression="$featuredTopic->author()->photo"}' class="ipsUserPhoto ipsUserPhoto_small ipsPos_left">
			<div>
				<h3 class="ipsType_reset ipsType_large">
					<a href="{$featuredTopic->url()}">{$featuredTopic->title}</a>
				</h3>
				<p class="ipsType_reset ipsType_normal ipsType_light">{lang="ask_byline" htmlsprintf="$featuredTopic->author()->link(), \IPS\DateTime::ts( $featuredTopic->start_date )->html()"}</p>
				<br>
				<div class="ipsType_normal" data-ipsTruncate data-ipsTruncate-type="remove" data-ipsTruncate-size="5 lines">
					{$featuredTopic->truncated()}
				</div>
			</div>
		</div>
	</div>
	<hr class="ipsHr">
{{endif}}
<div class="ipsGrid ipsGrid_collapsePhone">
	<div class="ipsGrid_span6 ipsPad">
		<h2 class="ipsType_sectionHead">{lang="most_popular_questions"}</h2>
		<p class="ipsType_reset ipsType_light">{lang="from_the_past_30_days"}</p>
		<ol class="ipsDataList ipsDataList_reducedSpacing" id="elTopicList">
			{{foreach $popularQuestions as $question}}
				<li class="ipsDataItem {{if $question->unread()}}ipsDataItem_unread{{endif}}">
					<div class='ipsDataItem_generic ipsDataItem_size1'>
						<img src="{$question->author()->photo}" class='ipsUserPhoto ipsUserPhoto_mini'>
					</div>
					<div class="ipsDataItem_main">
						<h4 class="ipsDataItem_title">{{if $question->unread()}} <i class="fa fa-circle cTopicIcon"></i> {{endif}}<a href="{$question->url()}">{$question->title}</a></h4>
						<ul class="ipsDataItem_meta ipsList_inline ipsType_light">
							{{if $question->bestAnswer()}}
								<li>
									{lang="best_answer_by" htmlsprintf="$question->bestAnswer()->author()->link(), \IPS\DateTime::ts( $question->bestAnswer()->post_date )->html()"}
								</li>
							{{endif}}
						</ul>
					</div>
				</li>
			{{endforeach}}
		</ol>
	</div>
	<div class="ipsGrid_span6 ipsPad">
		<h2 class="ipsType_sectionHead">{lang="new_questions"}</h2>
		<p class="ipsType_reset ipsType_light">{lang="awaiting_an_answer"}</p>
		<ol class="ipsDataList ipsDataList_reducedSpacing" id="elTopicList">
			{{foreach $newQuestions as $question}}
				<li class="ipsDataItem {{if $question->unread()}}ipsDataItem_unread{{endif}}">
					<div class='ipsDataItem_generic ipsDataItem_size1'>
						<img src="{$question->author()->photo}" class='ipsUserPhoto ipsUserPhoto_mini'>
					</div>
					<div class="ipsDataItem_main">
						<h4 class="ipsDataItem_title">{{if $question->unread()}} <i class="fa fa-circle cTopicIcon"></i> {{endif}}<a href="{$question->url()}">{$question->title}</a></h4>
						<ul class="ipsDataItem_meta ipsList_inline ipsType_light">
							<li>
								{lang="ask_byline" htmlsprintf="$question->author()->link(), \IPS\DateTime::ts( $question->start_date )->html()"}
							</li>
						</ul>
					</div>
				</li>
			{{endforeach}}
		</ol>
	</div>
</div>]]></template>
 <template template_group="forums" template_name="forumPasswordPopup" template_data="$forum, $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL" template_location="front" template_app="forums"><![CDATA[<form accept-charset='utf-8' class="ipsForm ipsForm_vertical" method='post' action='{$action}' data-ipsValidation novalidate>
	<input type="hidden" name="{$id}_submitted" value="1">
	{{foreach $hiddenValues as $k => $v}}
		<input type="hidden" name="{$k}" value="{$v}">
	{{endforeach}}

	<div class='ipsPad'>
		<p class='ipsType_normal ipsType_reset'>
			{lang="enter_forum_password_1" sprintf="$forum->_title"}
		</p>

		<br>
		<ul class='ipsList_reset'>
			{{foreach $elements as $collection}}
				{{foreach $collection as $input}}
					{{if $input instanceof \IPS\Helpers\Form\Text}}
						<li class="ipsFieldRow ipsFieldRow_primary ipsFieldRow_noLabel ipsFieldRow_fullWidth {{if $input->error}}ipsFieldRow_error{{endif}}">
							<input type="{$input->formType}" required placeholder="{lang="$input->name"}" name='{$input->name}' id='{$input->htmlId}'>
							{{if $input->error}}
								<br>
								<span class="ipsType_warning">{lang="$input->error"}</span>
							{{endif}}
						</li>
					{{endif}}
				{{endforeach}}
			{{endforeach}}
		</ul>
	</div>
	<div class='ipsPad ipsAreaBackground ipsType_right'>
		<button type="submit" class="ipsButton ipsButton_primary ipsButton_small">{lang="enter_forum"}</button>
	</div>
</form>]]></template>
 <template template_group="forums" template_name="forumSelector" template_data="$form" template_location="front" template_app="forums"><![CDATA[
<div class='ipsPad'>
	{$form|raw}
</div>]]></template>
 <template template_group="forums" template_name="forumTable" template_data="$table, $headers, $rows, $quickSearch" template_location="front" template_app="forums"><![CDATA[<div class='ipsBox' data-baseurl='{$table->baseUrl}' data-resort='{$table->resortKey}' data-tableID='topics' {{if $table->dummyLoading}}data-dummyLoading{{endif}} data-controller='core.global.core.table{{if $table->canModerate()}},core.front.core.moderation{{endif}}'>
	{{if $table->title}}
		<h2 class='ipsType_sectionTitle ipsHide {{if !$table->container()->forums_bitoptions['bw_enable_answers']}}ipsType_medium{{endif}} ipsType_reset ipsClear'>{$table->title}</h2>
	{{endif}}

	{{if $table->count > 0}}
	<div class="ipsButtonBar ipsPad_half ipsClearfix ipsClear">
		{{if $table->canModerate()}}
			<ul class="ipsButtonRow ipsPos_right ipsClearfix">
				<li>
					<a class="ipsJS_show" href="#elCheck_menu" id="elCheck_{$table->uniqueId}" title='{lang="{$table->langPrefix}select_rows_tooltip"}' data-ipsTooltip data-ipsAutoCheck data-ipsAutoCheck-context="#elTable_{$table->uniqueId}" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active">
						<span class="cAutoCheckIcon ipsType_medium"><i class="fa fa-square-o"></i></span> <i class="fa fa-caret-down"></i>
						<span class='ipsNotificationCount' data-role='autoCheckCount'>0</span>
					</a>
					<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide" id="elCheck_{$table->uniqueId}_menu">
						<li class="ipsMenu_title">{lang="{$table->langPrefix}select_rows"}</li>
						<li class="ipsMenu_item" data-ipsMenuValue="all"><a href="#">{lang="all"}</a></li>
						<li class="ipsMenu_item" data-ipsMenuValue="none"><a href="#">{lang="none"}</a></li>
						{{if \count($table->getFilters())}}
							<li class="ipsMenu_sep"><hr></li>
							{{foreach $table->getFilters() as $filter}}
								<li class="ipsMenu_item" data-ipsMenuValue="{$filter}"><a href="#">{lang="$filter"}</a></li>
							{{endforeach}}
						{{endif}}
					</ul>
				</li>
			</ul>
		{{endif}}

		<ul class="ipsButtonRow ipsPos_right ipsClearfix">
			{{if isset( $table->sortOptions ) and !empty( $table->sortOptions ) }}
				<li>
					<a href="#elSortByMenu_menu" id="elSortByMenu_{$table->uniqueId}" data-role='sortButton' data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active" data-ipsMenu-selectable="radio">{lang="sort_by"} <i class="fa fa-caret-down"></i></a>
					<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide" id="elSortByMenu_{$table->uniqueId}_menu">
						{{$custom = TRUE;}}
						{{foreach $table->sortOptions as $k => $col}}
							<li class="ipsMenu_item {{if $col === $table->getSortByColumn()}}{{$custom = FALSE;}}ipsMenu_itemChecked{{endif}}" data-ipsMenuValue="{$col}" data-sortDirection='{$table->getSortDirection( $col )}'><a href="{$table->baseUrl->setQueryString( array( 'filter' => $table->filter, 'sortby' => $col, 'sortdirection' => $table->getSortDirection( $col ) ) )->setPage('page', 1)}">{lang="{$table->langPrefix}sort_{$k}"}</a></li>
						{{endforeach}}
						{{if $table->advancedSearch}}
							<li class="ipsMenu_item {{if $custom}}ipsMenu_itemChecked{{endif}}" data-noSelect="true">
								<a href='{$table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )}' data-ipsDialog data-ipsDialog-title='{lang="custom_sort"}'>{lang="custom"}</a>
							</li>
						{{endif}}
					</ul>
				</li>
			{{endif}}
			{{if !empty( $table->filters )}}
				<li>
					<a href="#elFilterByMenu_menu" id="elFilterByMenu_{$table->uniqueId}" data-role='tableFilterMenu' data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active" data-ipsMenu-selectable="radio">{lang="filter_by"} <i class="fa fa-caret-down"></i></a>
					<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide' data-role="tableFilterMenu" id='elFilterByMenu_{$table->uniqueId}_menu'>
						<li data-action="tableFilter" data-ipsMenuValue='' class='ipsMenu_item {{if !$table->filter}}ipsMenu_itemChecked{{endif}}'>
							<a href='{$table->baseUrl->setQueryString( array( 'filter' => '', 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )->setPage('page', 1)}'>{lang="{$table->langPrefix}all"}</a>
						</li>
						{{foreach $table->filters as $k => $q}}
							<li data-action="tableFilter" data-ipsMenuValue='{$k}' class='ipsMenu_item {{if $k === $table->filter}}ipsMenu_itemChecked{{endif}}'>
								<a href='{$table->baseUrl->setQueryString( array( 'filter' => $k, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )->setPage('page', 1)}'>{lang="{$table->langPrefix}{$k}"}</a>
							</li>
						{{endforeach}}
					</ul>
				</li>
			{{endif}}
		</ul>

		{{if $table->pages > 1}}
			<div data-role="tablePagination">
				{template="pagination" group="global" app="core" location="global" params="$table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey()"}
			</div>
		{{endif}}
	</div>
	{{endif}}
	{{if $table->canModerate()}}
		<form action="{$table->baseUrl->csrf()}" method="post" data-role='moderationTools' data-ipsPageAction>
	{{endif}}
		{{if \count( $rows )}}
			<ol class='ipsDataList ipsDataList_zebra ipsClear cForumTopicTable {{if $table->container()->forums_bitoptions['bw_enable_answers']}}cForumQuestions{{endif}} {{foreach $table->classes as $class}}{$class} {{endforeach}}' id='elTable_{$table->uniqueId}' data-role="tableRows">
				{template="$table->rowsTemplate[1]" params="$table, $headers, $rows" object="$table->rowsTemplate[0]"}
			</ol>
		{{else}}
			<div class='ipsType_center ipsPad'>
				<p class='ipsType_large'>{{if $table->container()->forums_bitoptions['bw_enable_answers']}}{lang="no_questions_in_forum"}{{else}}{lang="no_topics_in_forum"}{{endif}}</p>

				{{if $table->container()->can('add')}}
					<a href='{$table->container()->url()->setQueryString( 'do', 'add' )}' class='ipsButton ipsButton_primary ipsButton_medium'>
						{{if $table->container()->forums_bitoptions['bw_enable_answers']}}
							{lang="submit_first_question"}
						{{else}}
							{lang="submit_first_topic"}
						{{endif}}
					</a>
				{{endif}}
			</div>
		{{endif}}
	{{if $table->canModerate()}}
			<div class="ipsAreaBackground ipsPad ipsClearfix ipsJS_hide" data-role="pageActionOptions">
				<div class="ipsPos_right">
					<select name="modaction" data-role="moderationAction">
						{{if $table->canModerate('unhide')}}
							<option value='approve' data-icon='check-circle'>{lang="approve"}</option>
						{{endif}}
						{{if $table->canModerate('feature') or $table->canModerate('unfeature')}}
							<optgroup label="{lang="feature"}" data-icon='star' data-action='feature'>
								{{if $table->canModerate('feature')}}
									<option value='feature'>{lang="feature"}</option>
								{{endif}}
								{{if $table->canModerate('unhide')}}
									<option value='unfeature'>{lang="unfeature"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('pin') or $table->canModerate('unpin')}}
							<optgroup label="{lang="pin"}" data-icon='thumb-tack' data-action='pin'>
								{{if $table->canModerate('pin')}}
									<option value='pin'>{lang="pin"}</option>
								{{endif}}
								{{if $table->canModerate('unpin')}}
									<option value='unpin'>{lang="unpin"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('hide') or $table->canModerate('unhide')}}
							<optgroup label="{lang="hide"}" data-icon='eye' data-action='hide'>
								{{if $table->canModerate('hide')}}
									<option value='hide'>{lang="hide"}</option>
								{{endif}}
								{{if $table->canModerate('unhide')}}
									<option value='unhide'>{lang="unhide"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('lock') or $table->canModerate('unlock')}}
							<optgroup label="{lang="lock"}" data-icon='lock' data-action='lock'>
								{{if $table->canModerate('lock')}}
									<option value='lock'>{lang="lock"}</option>
								{{endif}}
								{{if $table->canModerate('unlock')}}
									<option value='unlock'>{lang="unlock"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('move')}}
							<option value='move' data-icon='arrow-right'>{lang="move"}</option>
						{{endif}}
						{{if $table->canModerate('split_merge')}}
							<option value='merge' data-icon='level-up'>{lang="merge"}</option>
						{{endif}}
						{{if $table->canModerate('delete')}}
							<option value='delete' data-icon='trash'>{lang="delete"}</option>
						{{endif}}
						{{if $table->savedActions}}
							<optgroup label="{lang="saved_actions"}" data-icon='tasks' data-action='saved_actions'>
								{{foreach $table->savedActions as $k => $v}}
									<option value='savedAction-{$k}'>{$v}</option>
								{{endforeach}}
							</optgroup>
						{{endif}}
					</select>
					<button type="submit" class="ipsButton ipsButton_alternate ipsButton_verySmall">{lang="submit"}</button>
				</div>
			</div>
		</form>
	{{endif}}

	{{if $table->pages > 1}}
		<div class="ipsButtonBar ipsPad_half ipsClearfix ipsClear">
			<div data-role="tablePagination">
				{template="pagination" group="global" app="core" location="global" params="$table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey()"}
			</div>
		</div>
	{{endif}}
</div>]]></template>
 <template template_group="forums" template_name="popularQuestionRow" template_data="$question, $forum" template_location="front" template_app="forums"><![CDATA[{{$iposted = $forum->contentPostedIn( null, array( $question->tid ) );}}
{{if !$question->mapped('moved_to')}}
	<li class="ipsDataItem cForumQuestion {{if $question->unread()}}ipsDataItem_unread{{endif}} {{if $question->hidden()}}ipsModerated{{endif}}">
		<div class='ipsDataItem_icon'>
			{{if $question->topic_answered_pid}}
				<span title='{lang="answered"}' class='cBestAnswerIndicator' data-ipsTooltip>
					<i class='fa fa-check'></i>
				</span>
			{{else}}
				<span title='{lang="awaiting_answer"}' class='cBestAnswerIndicator cBestAnswerIndicator_off' data-ipsTooltip>
					<i class='fa fa-question'></i>
				</span>
			{{endif}}
		</div>
		<div class='ipsDataItem_main'>
			<h4 class='ipsDataItem_title ipsType_break ipsContained_container'>
				<span class='ipsType_break ipsContained'>
					{{if $question->locked()}}
						<i class='fa fa-lock' data-ipsTooltip title='{lang="topic_locked"}'></i>
					{{endif}}
					{{if $question->unread()}}
						<a href='{$question->url( 'getNewComment' )}' title='{lang="first_unread_post"}' data-ipsTooltip>
							<span class='ipsItemStatus'><i class="fa {{if \in_array( $question->tid, $iposted )}}fa-star{{else}}fa-circle{{endif}}"></i></span>
						</a>
					{{else}}
						{{if \in_array( $question->tid, $iposted )}}
							<span class='ipsItemStatus ipsItemStatus_read ipsItemStatus_posted'><i class="fa fa-star"></i></span>
						{{endif}}
					{{endif}}
					{{if $question->mapped('pinned') || $question->mapped('featured') || $question->hidden() === -1 || $question->hidden() === 1}}
					<span>
						{{if $question->hidden() === -1}}
							<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$question->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span>
						{{elseif $question->hidden() === 1}}
							<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span>
						{{endif}}
						{{if $question->mapped('pinned')}}
							<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="pinned"}'><i class='fa fa-thumb-tack'></i></span>
						{{endif}}
						{{if $question->mapped('featured')}}
							<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span>
						{{endif}}
					</span>
					{{endif}}
					{{if $question->prefix()}}
						{template="prefix" group="global" app="core" params="$question->prefix( TRUE ), $question->prefix()"}
					{{endif}}
					<a href='{$question->url()}'>
						{{if $question->mapped('title')}}{$question->mapped('title')}{{else}}<em class="ipsType_light">{lang="content_deleted"}</em>{{endif}}
					</a>
				</span>
			</h4>
			<div class='ipsDataItem_meta'>
				<p class='ipsType_reset ipsType_normal ipsType_light'>
					{lang="ask_byline" htmlsprintf="$question->author()->link(), \IPS\DateTime::ts( $question->start_date )->html()"}
				</p>
			</div>
			{{if \count( $question->tags() )}}
				<p>{template="tags" group="global" app="core" params="$question->tags()"}</p>
			{{endif}}
		</div>
		<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_center cForumQuestion_stat'>
			<span>{{if $question->question_rating}}{$question->question_rating}{{else}}0{{endif}}</span>
			<span class='ipsType_light'>{lang="votes_no_number" pluralize="$question->question_rating"}</span>
		</div>
		<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_center cForumQuestion_stat'>
			{{foreach $question->stats(FALSE) AS $k => $v}}
				{{if $k == 'forums_comments' OR $k == 'answers_no_number'}}
					<span>{number="$v"}</span>
					<span class='ipsType_light'>{lang="answers_no_number" pluralize="$v"}</span>
				{{endif}}
			{{endforeach}}
		</div>
	</li>
{{endif}}]]></template>
 <template template_group="forums" template_name="qaForum" template_data="$table, $popularQuestions, $newQuestions, $featuredTopic, $forum" template_location="front" template_app="forums"><![CDATA[
{{if $popularQuestions && $newQuestions}}
	<div class='ipsBox ipsSpacer_bottom ipsSpacer_double'>
		<h2 class='ipsType_sectionTitle ipsType_reset ipsHide'>{lang="explore_questions_title"}</h2>
		<div class="ipsTabs ipsClearfix" id="elQuestionsTabs" data-ipsTabBar data-ipsTabBar-contentarea="#elQuestionsTabsContent">
			<a href="#elQuestionsTabs" data-action="expandTabs"><i class="fa fa-caret-down"></i></a>
			<ul role="tablist" class="ipsList_reset">
				<li>
					<a href="#elPopularQuestions" role="tab" id="elPopularQuestions" class="ipsTabs_item {{if \count( $popularQuestions ) || !\count( $popularQuestions ) && !\count( $newQuestions )}}ipsTabs_activeItem{{endif}}" role="tab" aria-selected="{{if \count( $popularQuestions ) || !\count( $popularQuestions ) && !\count( $newQuestions )}}true{{else}}false{{endif}}">
						{lang="popular_questions_title"}
					</a>
				</li>				
				<li>
					<a href="#elNewQuestions" id="elNewQuestions" role="tab" class="ipsTabs_item {{if !\count( $popularQuestions ) && \count( $newQuestions )}}ipsTabs_activeItem{{endif}}" role="tab" aria-selected="{{if !\count( $popularQuestions ) && \count( $newQuestions )}}true{{else}}false{{endif}}">
						{{if \IPS\Settings::i()->forums_new_questions}}{lang="new_questions_title_no_answer"}{{else}}{lang="new_questions_title_no_best"}{{endif}}
					</a>
				</li>
			</ul>
		</div>
		<section id='elQuestionsTabsContent'>
			<div id="ipsTabs_elQuestionsTabs_elPopularQuestions_panel" class="ipsTabs_panel" aria-labelledby="elPopularQuestions">
				{{if \count( $popularQuestions )}}
					<ol class='ipsDataList ipsDataList_zebra ipsClear cForumTopicTable cForumQuestions cTopicList' id='elTable_popularQuestions' data-role="tableRows">
						{{foreach $popularQuestions as $question}}
							{template="popularQuestionRow" params="$question, $forum" group="forums"}
						{{endforeach}}
					</ol>
				{{else}}
					<div class='ipsType_center ipsType_light'>
						<p class='ipsType_large'>{lang="no_popular_questions"}</p>
					</div>
				{{endif}}
			</div>
			<div id="ipsTabs_elQuestionsTabs_elNewQuestions_panel" class="ipsTabs_panel" aria-labelledby="elNewQuestions">
				{{if \count( $newQuestions )}}
					<ol class='ipsDataList ipsDataList_zebra ipsClear cForumTopicTable cForumQuestions cTopicList' id='elTable_newQuestions' data-role="tableRows">
						{{foreach $newQuestions as $question}}
							{template="popularQuestionRow" params="$question, $forum" group="forums"}
						{{endforeach}}
					</ol>
				{{else}}
					<div class='ipsType_center ipsType_light'>
						<p class='ipsType_large'>{lang="no_new_questions"}</p>
					</div>
				{{endif}}
			</div>
		</section>
	</div>
{{else}}
	{{if $popularQuestions}}
		<section class='ipsBox ipsSpacer_bottom ipsSpacer_double'>
			<h2 class='ipsType_sectionTitle ipsType_reset'>{lang="popular_questions_title"}</h2>
			{{if \count( $popularQuestions )}}
				<ol class='ipsDataList ipsDataList_readStatus ipsClear cForumTopicTable' id='elTable_' data-role="tableRows">
					{{foreach $popularQuestions as $question}}
						{template="popularQuestionRow" params="$question, $forum" group="forums"}
					{{endforeach}}
				</ol>
			{{else}}
				<div class='ipsType_center ipsType_light'>
					<p class='ipsType_large'>{lang="no_popular_questions"}</p>
				</div>
			{{endif}}
		</section>
	{{endif}}
	{{if $newQuestions}}
		<section class='ipsBox ipsSpacer_bottom ipsSpacer_double'>
			<h2 class='ipsType_sectionTitle ipsType_reset'>{{if \IPS\Settings::i()->forums_new_questions}}{lang="new_questions_title_no_answer"}{{else}}{lang="new_questions_title_no_best"}{{endif}}</h2>
			{{if \count( $newQuestions )}}
			<ol class='ipsDataList ipsDataList_readStatus ipsClear cForumTopicTable' id='elTable_' data-role="tableRows">
				{{foreach $newQuestions as $question}}
					{template="popularQuestionRow" params="$question, $forum" group="forums"}
				{{endforeach}}
			</ol>
			{{else}}
			<div class='ipsType_center ipsType_light'>
				<p class='ipsType_large'>{lang="no_new_questions"}</p>
			</div>
			{{endif}}
		</section>
	{{endif}}
{{endif}}
{$table|raw}]]></template>
 <template template_group="forums" template_name="questionRow" template_data="$table, $headers, $rows" template_location="front" template_app="forums"><![CDATA[{{$rowIds = array();}}
{{foreach $rows as $row}}
	{{$idField = $row::$databaseColumnId;}}
	{{$rowIds[] = $row->$idField;}}
{{endforeach}}
{{if \count( $rows )}}
	{{$rowCount=0;}}
	{{foreach $rows as $row}}
		{{if $rowCount == 1 AND $advertisement = \IPS\core\Advertisement::loadByLocation( 'ad_forum_listing' )}}
			<li class="ipsDataItem">
				{$advertisement|raw}
			</li>
		{{endif}}
		{{$rowCount++;}}
		{{$idField = $row::$databaseColumnId;}}
		{{if $row->mapped('moved_to')}}
			{{if $movedTo = $row->movedTo()}}
				<li class="ipsDataItem">
					<div class='ipsDataItem_icon ipsType_center ipsType_noBreak'>
						<i class="fa fa-arrow-left ipsType_large"></i>
					</div>
					<div class='ipsDataItem_main'>
						<h4 class='ipsDataItem_title ipsType_break'>
							<span class='ipsType_break ipsContained'>
								<em><a href='{$movedTo->url()}' title='{lang="go_to_new_location"}'>{$row->mapped('title')}</a></em>
							</span>
						</h4>
						<div class='ipsDataItem_meta'>
							{{if isset( $row::$databaseColumnMap['status'] )}}
								{{$statusField = $row::$databaseColumnMap['status'];}}
								{{if $row->$statusField == 'merged'}}
									<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="question_merged_to" sprintf="$movedTo->url(), $movedTo->mapped('title')"}</p>
								{{else}}
									<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="question_moved_to" sprintf="$movedTo->container()->url(), $movedTo->container()->_title"}</p>
								{{endif}}
							{{else}}
								<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="question_moved_to" sprintf="$movedTo->container()->url(), $movedTo->container()->_title"}</p>
							{{endif}}
						</div>
					</div>
					{{if $table->canModerate()}}
						<div class='ipsDataItem_modCheck'>
							<span class='ipsCustomInput'>
								<input type='checkbox' data-role='moderation' name="moderate[{$row->$idField}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state='{{if $row->mapped('pinned')}}pinned{{endif}} {{if $row->mapped('featured')}}featured{{endif}}'>
								<span></span>
							</span>
						</div>
					{{endif}}
				</li>
			{{endif}}
		{{else}}
			<li class="ipsDataItem {{if $row->unread()}}ipsDataItem_unread{{endif}} {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if $row->hidden()}}ipsModerated{{endif}} cForumQuestion" data-rowID='{$row->$idField}'>
				<div class='ipsDataItem_icon'>
					{{if $row->topic_answered_pid}}
						<span title='{lang="answered"}' class='cBestAnswerIndicator' data-ipsTooltip>
							<i class='fa fa-check'></i>
						</span>
					{{else}}
						<span title='{lang="awaiting_answer"}' class='cBestAnswerIndicator cBestAnswerIndicator_off' data-ipsTooltip>
							<i class='fa fa-question'></i>
						</span>
					{{endif}}
				</div>
				<div class='ipsDataItem_main'>
					<h4 class='ipsDataItem_title ipsContained_container'>
						<span class='ipsType_break ipsContained'>
							{{if $row->locked()}}
								<span><i class='fa fa-lock' data-ipsTooltip title='{lang="topic_locked"}'></i></span>
							{{endif}}
							{{if $row->unread()}}
								<span>
									<a href='{$row->url( 'getNewComment' )}' title='{lang="first_unread_post"}' data-ipsTooltip>
										<span class='ipsItemStatus'><i class="fa {{if \in_array( $row->$idField, $table->contentPostedIn )}}fa-star{{else}}fa-circle{{endif}}"></i></span>
									</a>
								</span>
							{{else}}
								{{if \in_array( $row->$idField, $table->contentPostedIn )}}
									<span><span class='ipsItemStatus ipsItemStatus_read ipsItemStatus_posted'><i class="fa fa-star"></i></span></span>
								{{endif}}
							{{endif}}

							{{if $row->mapped('pinned') || $row->mapped('featured') || $row->hidden() === -1 || $row->hidden() === 1}}
							<span>
								{{if $row->hidden() === -1}}
									<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$row->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span>
								{{elseif $row->hidden() === 1}}
									<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span>
								{{endif}}
								{{if $row->mapped('pinned')}}
									<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="pinned"}'><i class='fa fa-thumb-tack'></i></span>
								{{endif}}
								{{if $row->mapped('featured')}}
									<span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span>
								{{endif}}
							</span>
							{{endif}}

							{{if $row->prefix()}}
								<span>{template="prefix" group="global" app="core" params="$row->prefix( TRUE ), $row->prefix()"}</span>
							{{endif}}
							
							<a href='{$row->url()}' title='{{if $row->mapped('title')}}{$row->mapped('title')}{{else}}{lang="content_deleted"}{{endif}} {{if $row->canEdit()}}{lang="click_hold_edit"}{{endif}}' {{if $row->tableHoverUrl and $row->canView()}}data-ipsHover data-ipsHover-target='{$row->url()->setQueryString('preview', 1)}' data-ipsHover-timeout='1.5'{{endif}} {{if $row->canEdit()}} data-role="editableTitle"{{endif}}>
								<span>
									{{if $row->mapped('title')}}{$row->mapped('title')}{{else}}<em class="ipsType_light">{lang="content_deleted"}</em>{{endif}}
								</span>
							</a>
						</span>
					</h4>
					<div class='ipsDataItem_meta'>
						<p class='ipsDataItem_meta ipsType_reset ipsType_light ipsType_blendLinks'>
							<span>
								{lang="ask_byline_itemprop" htmlsprintf="$row->author()->link(), \IPS\DateTime::ts( $row->start_date )->html()"}
							</span>
							{{if \IPS\Request::i()->controller != 'forums'}}
								{lang="in"} <a href="{$row->container()->url()}">{$row->container()->_title}</a>
							{{endif}}
						</p>
						{{if \count( $row->tags() )}}
							<div>{template="tags" group="global" app="core" params="$row->tags()"}</div>
						{{endif}}
					</div>
				</div>
				<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_center cForumQuestion_stat'>
					<span>{{if $row->question_rating}}{$row->question_rating}{{else}}0{{endif}}</span>
					<span class='ipsType_light'>{lang="votes_no_number" pluralize="$row->question_rating"}</span>
				</div>
				<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_center cForumQuestion_stat'>
					{{foreach $row->stats(FALSE) AS $k => $v}}
						{{if $k == 'forums_comments' OR $k == 'answers_no_number'}}
							<span>{number="$v"}</span>
							<span class='ipsType_light'>
								{lang="answers_no_number" pluralize="$v"}
								{{if \IPS\forums\Topic::modPermission( 'unhide', NULL, $row->container() ) AND $unapprovedComments = $row->mapped('unapproved_comments')}}
									&nbsp;<a href='{$row->url()->setQueryString( 'queued_posts', 1 )}' class='ipsType_warning ipsType_small ipsResponsive_noFloat' data-ipsTooltip title='{lang="queued_posts_badge" pluralize="$row->topic_queuedposts"}'><i class='fa fa-warning'></i> <strong>{$unapprovedComments}</strong></a>
								{{endif}}
							</span>
						{{endif}}
					{{endforeach}}
				</div>
				{{if $table->canModerate()}}
					<div class='ipsDataItem_modCheck'>
						<span class='ipsCustomInput'>
							<input type='checkbox' data-role='moderation' name="moderate[{$row->$idField}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state='{{if $row->tableStates()}}{$row->tableStates()}{{endif}}'>
							<span></span>
						</span>
					</div>
				{{endif}}
			</li>
		{{endif}}
	{{endforeach}}
{{endif}}]]></template>
 <template template_group="forums" template_name="topicHover" template_data="$topic, $overviews" template_location="front" template_app="forums"><![CDATA[
<div class='cTopicHovercard' data-controller='forums.front.forum.hovercard' data-topicID='{$topic->tid}'>
	{{if \count( $overviews ) > 1}}
		<div class="ipsTabs ipsTabs_small ipsTabs_container ipsClearfix" id="elTopic_{$topic->tid}" data-ipsTabBar data-ipsTabBar-contentarea="#elTopic_{$topic->tid}_content">
			<a href="#elTopic_{$topic->tid}" data-action="expandTabs"><i class="fa fa-caret-down"></i></a>
			<ul role="tablist">
				{{foreach $overviews as $tabID => $tabData}}
					<li>
						<a href="#ipsTabs_elTopic_{$topic->tid}_elTopic_{$topic->tid}_{$tabID}_panel" id="elTopic_{$topic->tid}_{$tabID}" class="ipsTabs_item ipsType_center" role="tab" aria-selected="{{if $tabID == 'firstPost'}}true{{else}}false{{endif}}">{lang="$tabData[0]"}</a>
					</li>
				{{endforeach}}
			</ul>
		</div>
		<div id='elTopic_{$topic->tid}_content' class='ipsTabs_panels ipsTabs_contained cTopicHovercard_container ipsScrollbar'>
	{{else}}
		<div class='ipsPad cTopicHovercard_container ipsScrollbar'>
	{{endif}}

		{{foreach $overviews as $tabID => $tabData}}
			{{if \count( $overviews ) > 1}}
				<div id='ipsTabs_elTopic_{$topic->tid}_elTopic_{$topic->tid}_{$tabID}_panel' class='ipsTabs_panel'>
			{{endif}}
				<div class='ipsPhotoPanel ipsPhotoPanel_tiny ipsClearfix'>
					{template="userPhoto" group="global" app="core" params="$tabData[1]->author(), 'tiny'"}
					<div class='ipsType_small'>
						<strong>{$tabData[1]->author()->name}</strong>
						<p class='ipsType_reset ipsType_light ipsType_blendLinks'>
							{datetime="$tabData[1]->mapped('date')"}
							{{if $tabData[1]->item()->unread() }}
								&middot; <a href='{$tabData[1]->item()->url('markRead')->csrf()}' title='{lang="mark_topic_read"}' data-action='markTopicRead'><i class='fa fa-check'></i> {lang="mark_topic_read"}</a>
							{{endif}}
							{{if $tabData[1]->canReportOrRevoke() === TRUE}}
								&middot; <a href='{$tabData[1]->url('report')}' data-ipsDialog data-ipsDialog-remoteSubmit data-ipsDialog-size='medium' data-ipsDialog-flashMessage='{lang="report_submit_success"}' data-ipsDialog-title="{lang="report_post"}" data-action='reportComment' title='{lang="report_post"}'><span class='ipsResponsive_showPhone ipsResponsive_inline'><i class='fa fa-flag'></i></span><span class='ipsResponsive_hidePhone ipsResponsive_inline'>{lang="report_post"}</span></a>
							{{endif}}
						</p>
					</div>
				</div>
				<hr class='ipsHr'>

				<div class='ipsType_richText ipsType_small' data-controller='core.front.core.lightboxedImages'>
					{$tabData[1]->content()|raw}
				</div>
			{{if \count( $overviews ) > 1}}
				</div>
			{{endif}}
		{{endforeach}}
	</div>
</div>]]></template>
 <template template_group="forums" template_name="topicRow" template_data="$table, $headers, $rows" template_location="front" template_app="forums"><![CDATA[{{$rowIds = array();}}
{{foreach $rows as $row}}
	{{$idField = $row::$databaseColumnId;}}
	{{$rowIds[] = $row->$idField;}}
{{endforeach}}
{{if \count( $rows )}}
	{{$rowCount=0;}}
	{{foreach $rows as $row}}
		{{if $rowCount == 1 AND $advertisement = \IPS\core\Advertisement::loadByLocation( 'ad_forum_listing' )}}
			<li class="ipsDataItem">
				{$advertisement|raw}
			</li>
		{{endif}}
		{{$rowCount++;}}
		{{$idField = $row::$databaseColumnId;}}
		{{if $row->mapped('moved_to')}}
			{{if $movedTo = $row->movedTo() AND $movedTo->container()->can('view')}}
				<li class="ipsDataItem">
					<div class='ipsDataItem_icon ipsType_center ipsType_noBreak'>
						<i class="fa fa-arrow-left ipsType_large"></i>
					</div>
					<div class='ipsDataItem_main'>
						<h4 class='ipsDataItem_title ipsContained_container'>
							<span class='ipsType_break ipsContained'>
								<em><a href='{$movedTo->url()}' title='{lang="go_to_new_location"}'>{$row->mapped('title')}</a></em>
							</span>
						</h4>
						<div class='ipsDataItem_meta'>
							{{if isset( $row::$databaseColumnMap['status'] )}}
								{{$statusField = $row::$databaseColumnMap['status'];}}
								{{if $row->$statusField == 'merged'}}
									<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="topic_merged_to" sprintf="$movedTo->url(), $movedTo->mapped('title')"}</p>
								{{else}}
									<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="topic_moved_to" sprintf="$movedTo->container()->url(), $movedTo->container()->_title"}</p>
								{{endif}}
							{{else}}
								<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="topic_moved_to" sprintf="$movedTo->container()->url(), $movedTo->container()->_title"}</p>
							{{endif}}
						</div>
					</div>
					{{if $table->canModerate()}}
						<div class='ipsDataItem_modCheck'>
							<span class='ipsCustomInput'>
								<input type='checkbox' data-role='moderation' name="moderate[{$row->$idField}]" data-actions="{{if $row->mapped('featured')}}unfeature{{endif}} {{if $row->mapped('pinned')}}unpin{{endif}} delete" data-state='{{if $row->mapped('pinned')}}pinned{{endif}} {{if $row->mapped('featured')}}featured{{endif}}'>
								<span></span>
							</span>
						</div>
					{{endif}}
				</li>
			{{endif}}
		{{else}}
			<li class="ipsDataItem ipsDataItem_responsivePhoto {{if $row->unread()}}ipsDataItem_unread{{endif}} {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if $row->hidden()}}ipsModerated{{endif}}" data-rowID='{$row->$idField}'>
				{{if member.member_id}}
					<div class='ipsDataItem_icon ipsPos_top'>
						{{if $row->unread()}}
							<a href='{$row->url( 'getNewComment' )}' title='{lang="first_unread_post"}' data-ipsTooltip>
								<span class='ipsItemStatus'><i class="fa {{if \in_array( $row->$idField, $table->contentPostedIn )}}fa-star{{else}}fa-circle{{endif}}"></i></span>
							</a>
						{{else}}
							{{if \in_array( $row->$idField, $table->contentPostedIn )}}
								<span class='ipsItemStatus ipsItemStatus_read ipsItemStatus_posted'><i class="fa fa-star"></i></span>
							{{else}}
								&nbsp;
							{{endif}}
						{{endif}}
					</div>
				{{endif}}
				<div class='ipsDataItem_main'>
					<h4 class='ipsDataItem_title ipsContained_container'>
						{{if $row->locked()}}
							<span>
								<i class='ipsType_medium fa fa-lock' data-ipsTooltip title='{lang="topic_locked"}'></i>
							</span>	
							{{if $row->topic_open_time && $row->topic_open_time > time()}}
								<span><strong class='ipsType_small ipsType_noBreak' data-ipsTooltip title='{lang="topic_unlocks_at" sprintf="\IPS\DateTime::ts( $row->topic_open_time )->relative(), \IPS\DateTime::ts( $row->topic_open_time )->localeTime( FALSE )"}'>{lang="topic_unlocks_at_short" sprintf="\IPS\DateTime::ts($row->topic_open_time)->relative(1)"}</strong>&nbsp;&nbsp;</span>
							{{endif}}
						{{elseif !$row->locked() && $row->topic_close_time && $row->topic_close_time > time()}}
							<span><strong class='ipsType_small ipsType_noBreak' data-ipsTooltip title='{lang="topic_locks_at" sprintf="\IPS\DateTime::ts( $row->topic_close_time )->relative(), \IPS\DateTime::ts( $row->topic_close_time )->localeTime( FALSE )"}'><i class='fa fa-clock-o'></i> {lang="topic_locks_at_short" sprintf="\IPS\DateTime::ts($row->topic_close_time)->relative(1)"}</strong>&nbsp;&nbsp;</span>
						{{endif}}

						{{if $row->mapped('poll')}}
							<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_neutral" data-ipsTooltip title='{lang="topic_has_poll"}'><i class='fa fa-question'></i></span></span>
						{{endif}}
						
						{{if $row->mapped('pinned') || $row->mapped('featured') || $row->hidden() === -1 || $row->hidden() === 1}}
							{{if $row->hidden() === -1}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$row->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span></span>
							{{elseif $row->hidden() === 1}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span></span>
							{{endif}}							
							{{if $row->mapped('pinned')}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="pinned"}'><i class='fa fa-thumb-tack'></i></span></span>
							{{endif}}
							{{if $row->mapped('featured')}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span></span>
							{{endif}}
						{{endif}}
										
						{{if $row->prefix()}}
							<span>{template="prefix" group="global" app="core" params="$row->prefix( TRUE ), $row->prefix()"}</span>
						{{endif}}						
						
						<span class='ipsType_break ipsContained'>
							<a href='{$row->url()}' class='' title='{{if $row->mapped('title')}}{$row->mapped('title')}{{else}}{lang="content_deleted"}{{endif}} {{if $row->canEdit()}}{lang="click_hold_edit"}{{endif}}' {{if $row->tableHoverUrl and $row->canView()}} data-ipsHover data-ipsHover-target='{$row->url()->setQueryString('preview', 1)}' data-ipsHover-timeout='1.5'{{endif}}{{if $row->canEdit()}} data-role="editableTitle"{{endif}}>
								<span>
									{{if $row->mapped('title') or $row->mapped('title') == 0}}{$row->mapped('title')}{{else}}<em class="ipsType_light">{lang="content_deleted"}</em>{{endif}}
								</span>
							</a>

							{{if $row->commentPageCount() > 1}}
								{$row->commentPagination( array(), 'miniPagination' )|raw}
							{{endif}}
						</span>
					</h4>
					<div class='ipsDataItem_meta ipsType_reset ipsType_light ipsType_blendLinks'>
						<span>
							{lang="byline_itemprop" htmlsprintf="$row->author()->link()"}
						</span>{datetime="$row->mapped('date')" lowercase="true"}
						{{if !\in_array( \IPS\Dispatcher::i()->controller, array( 'forums', 'index' ) )}}
							{lang="in"} <a href="{$row->container()->url()}">{$row->container()->_title}</a>
						{{endif}}
						{{if \count( $row->tags() )}}
							&nbsp;&nbsp;
							{template="tags" group="global" app="core" params="$row->tags(), true"}
						{{endif}}
					</div>
				</div>
				<ul class='ipsDataItem_stats'>
					{{foreach $row->stats(FALSE) as $k => $v}}
						<li {{if $k == 'num_views'}}class='ipsType_light'{{elseif \in_array( $k, $row->hotStats )}}class="ipsDataItem_stats_hot" data-text='{lang="hot_item"}' data-ipsTooltip title='{lang="hot_item_desc"}'{{endif}}>
							<span class='ipsDataItem_stats_number'>{number="$v"}</span>
							<span class='ipsDataItem_stats_type'>{lang="{$k}" pluralize="$v"}</span>
							{{if ( $k == 'forums_comments' OR $k == 'answers_no_number' ) && \IPS\forums\Topic::modPermission( 'unhide', NULL, $row->container() ) AND $unapprovedComments = $row->mapped('unapproved_comments')}}
								&nbsp;<a href='{$row->url()->setQueryString( 'queued_posts', 1 )}' class='ipsType_warning ipsType_small ipsPos_right ipsResponsive_noFloat' data-ipsTooltip title='{lang="queued_posts_badge" pluralize="$row->topic_queuedposts"}'><i class='fa fa-warning'></i> <strong>{$unapprovedComments}</strong></a>
							{{endif}}
						</li>
					{{endforeach}}
				</ul>
				<ul class='ipsDataItem_lastPoster ipsDataItem_withPhoto ipsType_blendLinks'>
					<li>
						{{if $row->mapped('num_comments')}}
							{template="userPhoto" app="core" group="global" params="$row->lastCommenter(), 'tiny'"}
						{{else}}
							{template="userPhoto" app="core" group="global" params="$row->author(), 'tiny'"}
						{{endif}}
					</li>
					<li>
						{{if $row->mapped('num_comments')}}
							{$row->lastCommenter()->link()|raw}
						{{else}}
							{$row->author()->link()|raw}
						{{endif}}
					</li>
					<li class="ipsType_light">
						<a href='{$row->url( 'getLastComment' )}' title='{lang="get_last_post"}' class='ipsType_blendLinks'>
							{{if $row->mapped('last_comment')}}{datetime="$row->mapped('last_comment')"}{{else}}{datetime="$row->mapped('date')"}{{endif}}
						</a>
					</li>
				</ul>
				{{if $table->canModerate()}}
					<div class='ipsDataItem_modCheck'>
						<span class='ipsCustomInput'>
							<input type='checkbox' data-role='moderation' name="moderate[{$row->$idField}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state='{{if $row->tableStates()}}{$row->tableStates()}{{endif}}'>
							<span></span>
						</span>
					</div>
				{{endif}}
			</li>
		{{endif}}
	{{endforeach}}
{{endif}}]]></template>
 <template template_group="global" template_name="commentTableHeader" template_data="$comment, $topic" template_location="front" template_app="forums"><![CDATA[{{$iposted = $topic->container()->contentPostedIn();}}
{{$idField = $topic::$databaseColumnId;}}
<div>
	<h3 class='ipsType_sectionHead ipsContained_container'>
		{{if $topic->unread()}}
			<span>
				<a href='{$topic->url( 'getNewComment' )}' title='{lang="first_unread_post"}' data-ipsTooltip>
					<span class='ipsItemStatus'><i class="fa {{if \in_array( $topic->$idField, $iposted )}}fa-star{{else}}fa-circle{{endif}}"></i></span>
				</a>
			</span>
		{{else}}
			{{if \in_array( $topic->$idField, $iposted )}}
				<span><span class='ipsItemStatus ipsItemStatus_read ipsItemStatus_posted'><i class="fa fa-star"></i></span></span>
			{{endif}}
		{{endif}}
		<span class='ipsType_break ipsContained'>
			<a href='{$comment->url()}' title='{lang="view_this_topic" sprintf="$topic->title"}' class='ipsTruncate ipsTruncate_line'>{$topic->title}</a>
		</span>
		{{if $topic->container()->allow_rating}}
			{template="rating" group="global" location="front" app="core" params="'large', $topic->rating_hits ? ( $topic->rating_total / $topic->rating_hits ) : 0"}
		{{endif}}
	</h3>
	<p class='ipsType_normal ipsType_light ipsType_blendLinks ipsType_reset'>{lang="in"} <a href='{$topic->container()->url()}'>{$topic->container()->_title}</a></p>
</div>]]></template>
 <template template_group="global" template_name="embedPost" template_data="$comment, $item, $url" template_location="front" template_app="forums"><![CDATA[
<div data-embedInfo-maxSize='{{if settings.max_internalembed_width}}{setting="max_internalembed_width"}{{else}}100%{{endif}}' class='ipsRichEmbed'>
	{template="embedHeader" group="embed" app="core" params="$comment, \IPS\Member::loggedIn()->language()->addToStack( 'x_replied_to_a_topic', FALSE, array( 'sprintf' => array( $comment->author()->name ) ) ), $comment->mapped('date'), $url"}
	<div class='ipsPad'>
		<div class='ipsRichEmbed_originalItem ipsAreaBackground_reset ipsPad ipsSpacer_bottom ipsType_blendLinks'>
			<div>
				{template="embedOriginalItem" group="embed" app="core" params="$item, TRUE"}
			</div>
		</div>

		<div class='ipsType_richText ipsType_medium' data-truncate='3'>
			{$comment->truncated(TRUE)|raw}
		</div>

		{{if settings.reputation_enabled and \IPS\IPS::classUsesTrait( $comment, 'IPS\Content\Reactable' ) and \count( $comment->reactions() )}}
			<ul class='ipsList_inline ipsSpacer_top ipsSpacer_half'>
				<li>
					{template="reactionOverview" app="core" group="global" params="$comment, TRUE, 'small'"}
				</li>
			</ul>
		{{endif}}		
	</div>
</div>]]></template>
 <template template_group="global" template_name="embedTopic" template_data="$item, $url" template_location="front" template_app="forums"><![CDATA[<div data-embedInfo-maxSize='{{if settings.max_internalembed_width}}{setting="max_internalembed_width"}{{else}}100%{{endif}}' class='ipsRichEmbed'>
	{template="embedHeader" group="embed" app="core" params="$item, \IPS\Member::loggedIn()->language()->addToStack( 'x_created_topic_in', FALSE, array( 'sprintf' => array( $item->author()->name, $item->container()->_title ) ) ), $item->mapped('date'), $url"}
	{{if $contentImage = $item->contentImages()}}
		{{$attachType = key( $contentImage[0] );}}
		{{$firstPhoto = \IPS\File::get( $attachType, $contentImage[0][ $attachType ] );}}
		<div class='ipsRichEmbed_masthead ipsRichEmbed_mastheadBg ipsType_center'>
			<a href='{$url}' style='background-image: url( "{expression="str_replace( array( '(', ')' ), array( '\(', '\)' ), $firstPhoto->url )"}" )'>
				<img src='{$firstPhoto->url}' class='ipsHide' alt=''>
			</a>
		</div>
	{{endif}}
	<div class='ipsPad'>
		<h3 class='ipsRichEmbed_itemTitle ipsTruncate ipsTruncate_line ipsType_blendLinks'>
			<a href='{$url}' title="{$item->mapped('title')}">{$item->mapped('title')}</a>
		</h3>
		<div class='ipsType_richText ipsType_medium ipsSpacer_top ipsSpacer_half' data-truncate='3'>
			{$item->truncated(TRUE)|raw}
		</div>

		{template="embedItemStats" group="embed" app="core" params="$item"}
	</div>
</div>]]></template>
 <template template_group="global" template_name="manageFollowNodeRow" template_data="$table, $headers, $rows" template_location="front" template_app="forums"><![CDATA[{{foreach $rows as $row}}
	{{$contentItemClass = $row::$contentItemClass;}}
	<li class="ipsDataItem {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}}" data-controller='core.front.system.manageFollowed' data-followID='{$row->_followData['follow_area']}-{$row->_followData['follow_rel_id']}'>
		<div class='ipsDataItem_main'>
			<h4 class='ipsDataItem_title'>
				{{if $row->_locked}}
					<i class="fa fa-lock"></i>
				{{endif}}
				
				<a href='{$row->url()}'>
					{$row->_title}
				</a>
			</h4>
			<ul class='ipsList_inline ipsType_light'>
				{{$count = \IPS\forums\Topic::contentCount( $row, TRUE );}}
				<li>{lang="posts_number" pluralize="$count"}</li>
			</ul>
		</div>
		
		<div class='ipsDataItem_generic ipsDataItem_size1 ipsType_center ipsType_large'>
			<span class='ipsBadge ipsBadge_icon ipsBadge_new {{if !$row->_followData['follow_is_anon']}}ipsHide{{endif}}' data-role='followAnonymous' data-ipsTooltip title='{lang="follow_is_anon"}'><i class='fa fa-eye-slash'></i></span>
		</div>

		<div class='ipsDataItem_generic ipsDataItem_size6'>
			<ul class='ipsList_reset'>
				<li title='{lang="follow_when"}' data-role='followDate'><i class='fa fa-clock-o'></i> {datetime="$row->_followData['follow_added']"}</li>
				<li title='{lang="follow_how"}' data-role='followFrequency'>
					{{if $row->_followData['follow_notify_freq'] == 'none'}}
						<i class='fa fa-bell-slash-o'></i>
					{{else}}
						<i class='fa fa-bell'></i>
					{{endif}} {lang="follow_freq_{$row->_followData['follow_notify_freq']}"}
				</li>
			</ul>
		</div>

		<div class='ipsDataItem_generic ipsDataItem_size6 ipsType_center'>
			{template="manageFollow" group="system" app="core" params="$row->_followData['follow_app'], $row->_followData['follow_area'], $row->_followData['follow_rel_id']"}
		</div>

		{{if $table->canModerate()}}
			<div class='ipsDataItem_modCheck'>
				<span class='ipsCustomInput'>
					<input type='checkbox' data-role='moderation' name="moderate[{$row->_id}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state=''>
					<span></span>
				</span>
			</div>
		{{endif}}
	</li>
{{endforeach}}]]></template>
 <template template_group="global" template_name="row" template_data="$table, $headers, $topic, $showReadMarkers=TRUE" template_location="front" template_app="forums"><![CDATA[{{$idField = $topic::$databaseColumnId;}}
{{$iPosted = isset( $table->contentPostedIn ) ? $table->contentPostedIn : ( $table AND method_exists( $table, 'container' ) AND $topic->container() !== NULL ) ? $topic->container()->contentPostedIn() : array();}}
<li class="ipsDataItem ipsDataItem_responsivePhoto {{if $topic->unread()}}ipsDataItem_unread{{endif}} {{if method_exists( $topic, 'tableClass' ) && $topic->tableClass()}}ipsDataItem_{$topic->tableClass()}{{endif}} {{if $topic->hidden()}}ipsModerated{{endif}}">
	{{if $showReadMarkers}}
		{{if $topic->unread()}}
			<div class='ipsDataItem_icon ipsPos_top'>
				<a href='{$topic->url( 'getNewComment' )}' title='{lang="first_unread_post"}' data-ipsTooltip>
					<span class='ipsItemStatus'><i class="fa {{if \in_array( $topic->$idField, $iPosted )}}fa-star{{else}}fa-circle{{endif}}"></i></span>
				</a>
			</div>
		{{else}}
			{{if \in_array( $topic->$idField, $iPosted )}}
				<div class='ipsDataItem_icon ipsPos_top'>
					<span class='ipsItemStatus ipsItemStatus_read ipsItemStatus_posted'><i class="fa fa-star"></i></span>
				</div>
			{{else}}
				<div class='ipsDataItem_icon ipsPos_top'>&nbsp;</div>
			{{endif}}
		{{endif}}
	{{endif}}
	<div class='ipsDataItem_main'>
		<h4 class='ipsDataItem_title ipsContained_container'>
			{{if $topic->mapped('pinned') || $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1}}
				{{if $topic->hidden() === -1}}
					<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$topic->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span></span>
				{{elseif $topic->hidden() === 1}}
					<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span></span>
				{{endif}}							
				{{if $topic->mapped('pinned')}}
					<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="pinned"}'><i class='fa fa-thumb-tack'></i></span></span>
				{{endif}}
				{{if $topic->mapped('featured')}}
					<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span></span>
				{{endif}}
			{{endif}}
			{{if $topic->prefix()}}
				<span>{template="prefix" group="global" app="core" params="$topic->prefix( TRUE ), $topic->prefix()"}</span>
			{{endif}}
			
			<span class='ipsType_break ipsContained'>
				<a href='{$topic->url()}' {{if $topic->canView()}}data-ipsHover data-ipsHover-target='{$topic->url()->setQueryString('preview', 1)}' data-ipsHover-timeout='1.5' {{endif}}>
					{{if $topic->isQuestion()}}
						<strong class='ipsType_light'>{lang="question_title"}:</strong>
					{{endif}}
					{$topic->mapped('title')}
				</a>

				{{if $topic->commentPageCount() > 1}}
					{$topic->commentPagination( array(), 'miniPagination' )|raw}
				{{endif}}
			</span>
		</h4>
		
		<p class='ipsType_reset ipsType_medium ipsType_light'>
			{lang="byline" htmlsprintf="$topic->author()->link()"} {datetime="$topic->mapped('date')"}
			{{if \IPS\Request::i()->controller != 'forums'}}
				{lang="in"} <a href="{$topic->container()->url()}">{$topic->container()->_title}</a>
			{{endif}}
		</p>
		<ul class='ipsList_inline ipsClearfix ipsType_light'>
			{{if $topic->isQuestion()}}
				{{if $topic->topic_answered_pid}}
					<li class='ipsType_success'><i class='fa fa-check-circle'></i> <strong>{lang="answered"}</strong></li>
				{{else}}
					<li class='ipsType_light'><i class='fa fa-question'></i> {lang="awaiting_answer"}</li>
				{{endif}}
			{{endif}}
		</ul>
		{{if \count( $topic->tags() )}}
			&nbsp;&nbsp;
			{template="tags" group="global" app="core" params="$topic->tags(), true, true"}
		{{endif}}
	</div>
	<ul class='ipsDataItem_stats'>
		{{if $topic->isQuestion()}}
			<li>
				<span class='ipsDataItem_stats_number'>{{if $topic->question_rating}}{$topic->question_rating}{{else}}0{{endif}}</span>
				<span class='ipsDataItem_stats_type'>{lang="votes_no_number" pluralize="$topic->question_rating"}</span>
			</li>	
			{{foreach $topic->stats(FALSE) as $k => $v}}
				{{if $k == 'forums_comments' OR $k == 'answers_no_number'}}
					<li>
						<span class='ipsDataItem_stats_number'>{number="$v"}</span>
						<span class='ipsDataItem_stats_type'>{lang="answers_no_number" pluralize="$v"}</span>
					</li>
				{{endif}}
			{{endforeach}}
		{{else}}
			{{foreach $topic->stats(FALSE) as $k => $v}}
				<li {{if \in_array( $k, $topic->hotStats )}}class="ipsDataItem_stats_hot" data-text='{lang="hot_item"}' data-ipsTooltip title='{lang="hot_item_desc"}'{{endif}}>
					<span class='ipsDataItem_stats_number'>{number="$v"}</span>
					<span class='ipsDataItem_stats_type'>{lang="{$k}" pluralize="$v"}</span>
				</li>
			{{endforeach}}
		{{endif}}
	</ul>
	<ul class='ipsDataItem_lastPoster ipsDataItem_withPhoto'>
		<li>
			{{if $topic->mapped('num_comments')}}
				{template="userPhoto" app="core" group="global" params="$topic->lastCommenter(), 'tiny'"}
			{{else}}
				{template="userPhoto" app="core" group="global" params="$topic->author(), 'tiny'"}
			{{endif}}
		</li>
		<li>
			{{if $topic->mapped('num_comments')}}
				{$topic->lastCommenter()->link()|raw}
			{{else}}
				{$topic->author()->link()|raw}
			{{endif}}
		</li>
		<li class="ipsType_light">
			<a href='{$topic->url( 'getLastComment' )}' title='{lang="get_last_post"}' class='ipsType_blendLinks'>
				{{if $topic->mapped('last_comment')}}{datetime="$topic->mapped('last_comment')"}{{else}}{datetime="$topic->mapped('date')"}{{endif}}
			</a>
		</li>
	</ul>
	{{if method_exists( $table, 'canModerate' ) AND $table->canModerate()}}
		<div class='ipsDataItem_modCheck'>
			<span class='ipsCustomInput'>
				<input type='checkbox' data-role='moderation' name="moderate[{$topic->tid}]" data-actions="{expression="implode( ' ', $table->multimodActions( $topic ) )"}" data-state='{{if $topic->tableStates()}}{$topic->tableStates()}{{endif}}'>
				<span></span>
			</span>
		</div>
	{{endif}}
</li>]]></template>
 <template template_group="global" template_name="rows" template_data="$table, $headers, $rows" template_location="front" template_app="forums">{{if \count( $rows )}}
	{{foreach $rows as $row}}
		{template=&quot;row&quot; group=&quot;global&quot; app=&quot;forums&quot; params=&quot;$table, $headers, $row&quot;}
	{{endforeach}}
{{endif}}</template>
 <template template_group="global" template_name="searchNoPermission" template_data="$lang, $link=NULL" template_location="front" template_app="forums"><![CDATA[<li class="ipsStreamItem ipsStreamItem_contentBlock ipsAreaBackground_reset ipsPad">
	<div class='ipsType_center ipsType_light ipsType_large'>
		{$lang}{{if $link}} <a href="{$link}">{lang="enter_password"}</a>{{endif}}
	</div>
</li>
]]></template>
 <template template_group="global" template_name="viewChange" template_data="$hideMobile=FALSE" template_location="front" template_app="forums"><![CDATA[{{if settings.forums_default_view_choose and member.member_id}}
{{$chooseable = json_decode( \IPS\Settings::i()->forums_default_view_choose, true );}}
{{$chosen = \IPS\forums\Forum::getMemberView();}}
<li>
	<ul class='ipsButton_split'>
		{{if $chooseable == '*' OR \in_array('table', $chooseable )}}
			<li>
				<a href="{url="app=forums&module=forums&controller=index&do=setMethod&method=table" seoTemplate="forums" csrf="true"}" class='ipsButton {{if $chosen == 'table'}}ipsButton_primary{{else}}ipsButton_link{{endif}} ipsButton_narrow ipsButton_medium' data-ipsTooltip data-ipsTooltip-safe title='{lang="forums_default_view_table"}'>
					<i class='fa fa-align-justify'></i>
				</a>
			</li>
		{{endif}}
		{{if $chooseable == '*' OR \in_array('grid', $chooseable )}}
			<li>
				<a href="{url="app=forums&module=forums&controller=index&do=setMethod&method=grid" seoTemplate="forums" csrf="true"}" class='ipsButton {{if $chosen == 'grid'}}ipsButton_primary{{else}}ipsButton_link{{endif}} ipsButton_narrow ipsButton_medium' data-ipsTooltip data-ipsTooltip-safe title='{lang="forums_default_view_grid"}'>
					<i class='fa fa-th-large'></i>
				</a>
			</li>
		{{endif}}
		{{if $chooseable == '*' OR \in_array('fluid', $chooseable )}}
			<li>
				<a href="{url="app=forums&module=forums&controller=index&do=setMethod&method=fluid" seoTemplate="forums" csrf="true"}" class='ipsButton {{if $chosen == 'fluid'}}ipsButton_primary{{else}}ipsButton_link{{endif}} ipsButton_narrow ipsButton_medium' data-ipsTooltip data-ipsTooltip-safe title='{lang="forums_default_view_fluid"}'>
					<i class='fa fa-th-list'></i>
				</a>
			</li>
		{{endif}}
	</ul>
</li>
{{endif}}]]></template>
 <template template_group="index" template_name="forumGridItem" template_data="$forum" template_location="front" template_app="forums"><![CDATA[{{if $forum->can('view')}}
{{$lastPost = $forum->lastPost();}}
{{$club = $forum->club();}}
	<div class="ipsDataItem ipsGrid_span4 ipsAreaBackground_reset cForumGrid {{if \IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}cForumGrid_unread ipsDataItem_unread{{endif}} ipsClearfix" data-forumID="{$forum->_id}">

		<div class='ipsPhotoPanel ipsPhotoPanel_mini ipsClearfix ipsPad cForumGrid_forumInfo'>
			<span class='ipsPos_left'>
				{{if !$forum->redirect_on AND \IPS\forums\Topic::containerUnread( $forum ) AND \IPS\Member::loggedIn()->member_id}}
					<a href="{$forum->url()->setQueryString( 'do', 'markRead' )->csrf()}" data-action='markAsRead'>
				{{endif}}
					{{if $club}}
						<img src="{{if $club->profile_photo}}{file="$club->profile_photo" extension="core_Clubs"}{{else}}{resource="default_club.png" app="core" location="global"}{{endif}}" alt='' class='ipsItemStatus ipsItemStatus_large {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}'>
					{{elseif $forum->icon}}
						<img src="{file="$forum->icon" extension="forums_Icons"}" alt='' class='ipsItemStatus ipsItemStatus_custom {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}'>
					{{else}}
						{{if $forum->redirect_on}}
							<span class='ipsItemStatus ipsItemStatus_large cForumIcon_redirect {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
								<i class='fa fa-arrow-right'></i>
							</span>
						{{elseif $forum->forums_bitoptions['bw_enable_answers']}}
							<span class='ipsItemStatus ipsItemStatus_large cForumIcon_answers {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
								<i class='fa fa-question'></i>
							</span>
						{{elseif $forum->password}}
							<span class='ipsItemStatus ipsItemStatus_large cForumIcon_password {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
								{{if $forum->loggedInMemberHasPasswordAccess()}}
									<i class='fa fa-unlock'></i>
								{{else}}
									<i class='fa fa-lock'></i>
								{{endif}}
							</span>
						{{else}}
							<span class='ipsItemStatus ipsItemStatus_large cForumIcon_normal {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
								<i class="fa fa-comments"></i>
							</span>
						{{endif}}
					{{endif}}
				{{if !$forum->redirect_on AND \IPS\forums\Topic::containerUnread( $forum ) AND \IPS\Member::loggedIn()->member_id}}
					</a>
				{{endif}}
			</span>
			<div>
				<h3 class='ipsType_reset ipsType_sectionHead ipsTruncate ipsTruncate_line cForumGrid_title'>
					{{if $forum->password && !$forum->loggedInMemberHasPasswordAccess()}}
						<a href="{$forum->url()->setQueryString( 'passForm', '1' )}" data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title='{lang="forum_requires_password" sprintf="$forum->_title"}'>{$forum->_title}</a>
					{{else}}
						<a href="{$forum->url()}">{{if $club}}{lang="club_node" sprintf="$club->name, $forum->_title"}{{else}}{$forum->_title}{{endif}}</a>
					{{endif}}
				</h3>
				{{if !$forum->redirect_on}}
					{{$count = \IPS\forums\Topic::contentCount( $forum, TRUE );}}
					<p class='ipsType_reset ipsType_light'>{lang="posts_number" pluralize="$count"}</p>
				{{endif}}
				{{if \IPS\forums\Topic::modPermission( 'unhide', NULL, $forum ) AND ( $forum->queued_topics OR $forum->queued_posts )}}
					<strong class='ipsType_warning ipsType_medium'>
						<i class='fa fa-warning'></i>
						{{if $forum->queued_topics}}
							<a href='{$forum->url()->setQueryString( array( 'advanced_search_submitted' => 1, 'topic_type' => 'queued_topics' ) )->csrf()}' data-ipsTooltip title='{lang="queued_topics_badge" pluralize="$forum->queued_topics"}' class='ipsType_blendLinks'>{$forum->queued_topics}</a>
						{{else}}
							<span class='ipsType_light'>0</span>
						{{endif}}
						/
						{{if $forum->queued_posts}}
							<a href='{$forum->url()->setQueryString( array( 'advanced_search_submitted' => 1, 'topic_type' => 'queued_posts' ) )->csrf()}' data-ipsTooltip title='{lang="queued_posts_badge" pluralize="$forum->queued_posts"}' class='ipsType_blendLinks'>{$forum->queued_posts}</a>
						{{else}}
							<span class='ipsType_light'>0</span>
						{{endif}}
					</strong>					
				{{endif}}
			</div>
		</div>
		
		<div class='ipsPad'>
			{{if $forum->description}}
				{template="richText" group="global" app="core" location="global" params="$forum->description, array('ipsType_medium')"}
			{{endif}}

			{{if $forum->hasChildren()}}
				<h4 class='ipsType_minorHeading ipsSpacer_top'>{lang="subforums"}</h4>
				<ul class="ipsList_inline">
					{{foreach $forum->children() as $subforum}}
					<li class="{{if \IPS\forums\Topic::containerUnread( $subforum )}}ipsDataItem_unread{{endif}}">
						<a href="{$subforum->url()}">
							{{if \IPS\forums\Topic::containerUnread( $subforum )}}
								<span class='ipsItemStatus ipsItemStatus_tiny {{if !\IPS\forums\Topic::containerUnread( $subforum ) && !$subforum->redirect_on}}ipsItemStatus_read{{endif}}'>
									<i class="fa fa-circle"></i>
								</span>
							{{endif}}
							{$subforum->_title}
						</a>
					</li>
					{{endforeach}}
				</ul>
			{{endif}}
		</div>

		<div class='cForumGrid_info'>
			<hr class='ipsHr'>

			{{if !$forum->redirect_on}}
				{{if $lastPost}}
					<div class='ipsPhotoPanel ipsPhotoPanel_tiny'>
						{template="userPhoto" app="core" group="global" params="$lastPost['author'], 'tiny'"}
						<div>
							<ul class='ipsList_reset'>
								<li><a href="{$lastPost['topic_url']->setQueryString( 'do', 'getNewComment' )}" class='ipsType_break' title='{$lastPost['topic_title']}'>{truncate="$lastPost['topic_title']" length="30"}</a></li>
								<li class='ipsType_light ipsTruncate ipsTruncate_line'>{lang="byline_nodate" htmlsprintf="$lastPost['author']->link()"}, <a href='{$lastPost['topic_url']->setQueryString( 'do', 'getLastComment' )}' title='{lang="get_last_post"}' class='ipsType_blendLinks'>{datetime="$lastPost['date']"}</a></li>
							</ul>
						</div>
					</div>
				{{else}}
					<p class='ipsType_light ipsType_reset ipsTruncate ipsTruncate_line'>{{if $forum->password}}{lang="no_forum_posts_password"}{{else}}{lang="no_forum_posts"}{{endif}}</p>
				{{endif}}
			{{else}}
				<p class='ipsType_light ipsType_reset ipsTruncate ipsTruncate_line'>
					{lang="redirect_hits" pluralize="$forum->redirect_hits"}
				</p>
			{{endif}}
		</div>
	</div>
{{endif}}]]></template>
 <template template_group="index" template_name="forumRow" template_data="$forum, $isSubForum=FALSE, $table=NULL" template_location="front" template_app="forums"><![CDATA[{{if $forum->can('view')}}
{{$lastPost = $forum->lastPost();}}
{{$club = $forum->club();}}
	<li class="cForumRow ipsDataItem ipsDataItem_responsivePhoto {{if \IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsDataItem_unread{{endif}} ipsClearfix" data-forumID="{$forum->_id}">
		<div class="ipsDataItem_icon ipsDataItem_category">
			{{if !$forum->redirect_on}}
			{{if \IPS\forums\Topic::containerUnread( $forum ) AND \IPS\Member::loggedIn()->member_id}}<a href="{{if $isSubForum}}{$forum->url()->setQueryString( array( 'do' => 'markRead', 'return' => $forum->parent_id ) )->csrf()}{{else}}{$forum->url()->setQueryString( 'do', 'markRead' )->csrf()}{{endif}}" data-action='markAsRead' title='{lang="mark_forum_read"}' data-ipsTooltip>{{endif}}
			{{endif}}
				{{if $club}}
					<img src="{{if $club->profile_photo}}{file="$club->profile_photo" extension="core_Clubs"}{{else}}{resource="default_club.png" app="core" location="global"}{{endif}}" alt='' class='ipsItemStatus ipsItemStatus_large {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}'>
				{{elseif $forum->icon}}
					<img src="{file="$forum->icon" extension="forums_Icons"}" alt='' class='ipsItemStatus ipsItemStatus_custom {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}'>
				{{else}}
					{{if $forum->redirect_on}}
						<span class='ipsItemStatus ipsItemStatus_large cForumIcon_redirect {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
							<i class='fa fa-arrow-right'></i>
						</span>
					{{elseif $forum->forums_bitoptions['bw_enable_answers']}}
						<span class='ipsItemStatus ipsItemStatus_large cForumIcon_answers {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
							<i class='fa fa-question'></i>
						</span>
					{{elseif $forum->password}}
						<span class='ipsItemStatus ipsItemStatus_large cForumIcon_password {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
							{{if $forum->loggedInMemberHasPasswordAccess()}}
								<i class='fa fa-unlock'></i>
							{{else}}
								<i class='fa fa-lock'></i>
							{{endif}}
						</span>
					{{else}}
						<span class='ipsItemStatus ipsItemStatus_large cForumIcon_normal {{if !\IPS\forums\Topic::containerUnread( $forum ) && !$forum->redirect_on}}ipsItemStatus_read{{endif}}' {template="formattedInlineStyle" params="$forum" app="core" group="global" location="front"}>
							<i class="fa fa-comments"></i>
						</span>
					{{endif}}
				{{endif}}
			{{if !$forum->redirect_on and \IPS\forums\Topic::containerUnread( $forum ) AND \IPS\Member::loggedIn()->member_id}}
			</a>
			{{endif}}
		</div>
		<div class="ipsDataItem_main">
			<h4 class="ipsDataItem_title ipsType_large ipsType_break">
				{{if $forum->password && !$forum->loggedInMemberHasPasswordAccess()}}
					<a href="{$forum->url()->setQueryString( 'passForm', '1' )}" data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title='{lang="forum_requires_password" sprintf="$forum->_title"}'>{$forum->_title}</a>
				{{else}}
					<a href="{$forum->url()}">{{if $club}}{lang="club_node" sprintf="$club->name, $forum->_title"}{{else}}{$forum->_title}{{endif}}</a>
				{{endif}}
				{{if $forum->redirect_on}}
					&nbsp;&nbsp;<span class='ipsType_light ipsType_medium'>({lang="redirect_hits" pluralize="$forum->redirect_hits"})</span>
				{{endif}}
			</h4>
			{{if $forum->hasChildren()}}
				<ul class="ipsDataItem_subList ipsList_inline">
					{{foreach $forum->children() as $subforum}}
						<li class="{{if \IPS\forums\Topic::containerUnread( $subforum )}}ipsDataItem_unread{{endif}}">
							<a href="{$subforum->url()}">{{if \IPS\forums\Topic::containerUnread( $subforum )}}<span class='ipsItemStatus ipsItemStatus_tiny {{if !\IPS\forums\Topic::containerUnread( $subforum ) && !$subforum->redirect_on}}ipsItemStatus_read{{endif}}'><i class="fa fa-circle"></i></span>&nbsp;{{endif}}{$subforum->_title}</a>
						</li>
					{{endforeach}}
				</ul>
			{{endif}}
			{{if $forum->description}}
				{template="richText" group="global" app="core" location="global" params="$forum->description, array('ipsDataItem_meta', 'ipsContained')"}
			{{endif}}
		</div>
		{{if !$forum->redirect_on}}
			<div class="ipsDataItem_stats ipsDataItem_statsLarge">
				{{if $lastPost}}
					<dl>
						{{$count = \IPS\forums\Topic::contentCount( $forum, TRUE );}}
						<dt class="ipsDataItem_stats_number">{number="$count"}</dt>
						<dd class="ipsDataItem_stats_type ipsType_light">{lang="posts_no_number" pluralize="$count"}</dd>
					</dl>
				{{endif}}
				{{if \IPS\forums\Topic::modPermission( 'unhide', NULL, $forum ) AND $unapprovedContent = $forum->unapprovedContentRecursive() and ( $unapprovedContent['topics'] OR $unapprovedContent['posts'] )}}
					<strong class='ipsType_warning ipsType_medium'>
						<i class='fa fa-warning'></i>
						{{if $unapprovedContent['topics']}}
							<a href='{$forum->url()->setQueryString( array( 'advanced_search_submitted' => 1, 'topic_type' => 'queued_topics' ) )->csrf()}' data-ipsTooltip title='{lang="queued_topics_badge" pluralize="$unapprovedContent['topics']"}' class='ipsType_blendLinks'>{$unapprovedContent['topics']}</a>
						{{else}}
							<span class='ipsType_light'>0</span>
						{{endif}}
						/
						{{if $unapprovedContent['posts']}}
							<a href='{$forum->url()->setQueryString( array( 'advanced_search_submitted' => 1, 'topic_type' => 'queued_posts' ) )->csrf()}' data-ipsTooltip title='{lang="queued_posts_badge" pluralize="$unapprovedContent['posts']"}' class='ipsType_blendLinks'>{$unapprovedContent['posts']}</a>
						{{else}}
							<span class='ipsType_light'>0</span>
						{{endif}}
					</strong>
				{{endif}}
			</div>
			<ul class="ipsDataItem_lastPoster ipsDataItem_withPhoto">
				{{if $lastPost}}
					<li>{template="userPhoto" app="core" group="global" params="$lastPost['author'], 'tiny'"}</li>
					{{if $lastPost['topic_title']}}<li><a href="{$lastPost['topic_url']->setQueryString( 'do', 'getNewComment' )}" title='{$lastPost['topic_title']}'>{truncate="$lastPost['topic_title']" length="26"}</a></li>{{endif}}
					<li class='ipsType_blendLinks'>{lang="byline_nodate" htmlsprintf="$lastPost['author']->link()"}</li>
					{{if $lastPost['topic_title']}}
						<li class="ipsType_light"><a href='{$lastPost['topic_url']->setQueryString( 'do', 'getLastComment' )}' title='{lang="get_last_post"}' class='ipsType_blendLinks'>{datetime="$lastPost['date']"}</a></li>
					{{else}}
						<li class="ipsType_light">{datetime="$lastPost['date']"}</li>
					{{endif}}
				{{else}}
					<li class='ipsType_light ipsResponsive_showDesktop'>{{if $forum->password}}{lang="no_forum_posts_password"}{{else}}{lang="no_forum_posts"}{{endif}}</li>
				{{endif}}
			</ul>	
		{{endif}}
		{{if $table and $table->canModerate()}}
			<div class='ipsDataItem_modCheck'>
				<span class='ipsCustomInput'>
					<input type='checkbox' data-role='moderation' name="moderate[{$forum->_id}]" data-actions="{expression="implode( ' ', $table->multimodActions( $forum ) )"}" data-state=''>
					<span></span>
				</span>
			</div>
		{{endif}}
	</li>
{{endif}}]]></template>
 <template template_group="index" template_name="forumTableRow" template_data="$table, $headers, $forums" template_location="front" template_app="forums">{{foreach $forums as $forum}}
	{template=&quot;forumRow&quot; group=&quot;index&quot; app=&quot;forums&quot; params=&quot;$forum, FALSE, $table&quot;}
{{endforeach}}</template>
 <template template_group="index" template_name="index" template_data="" template_location="front" template_app="forums"><![CDATA[<div class='ipsPageHeader ipsClearfix ipsSpacer_bottom cForumHeader ipsHeaderButtons'>
	{{if \IPS\forums\Forum::canOnAny( 'add' ) }}
		<ul class='ipsToolList ipsToolList_horizontal ipsClearfix ipsPos_right'>
			<li class='ipsToolList_primaryAction ipsResponsive_hidePhone'>
				<a class="ipsButton ipsButton_medium ipsButton_important" href="{url="app=forums&module=forums&controller=forums&do=add" seoTemplate="topic_non_forum_add_button"}" data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title='{lang="select_forum"}'>{lang="start_new_topic"}</a>
			</li>
			{template="viewChange" group="global" app="forums" params=""}
		</ul>
	{{endif}}
	<h1 class='ipsType_pageTitle'>
		{lang="forums"}
	</h1>
</div>
{{if \IPS\Member::loggedIn()->member_id}}
	<ul class="ipsToolList ipsToolList_horizontal ipsResponsive_hideDesktop ipsResponsive_hideTablet ipsResponsive_block ipsClearfix">
		{template="indexButtons" group="index" app="forums" params="FALSE"}
	</ul>
{{endif}}

<section>
	<ol class='ipsList_reset cForumList' data-controller='core.global.core.table, forums.front.forum.forumList' data-baseURL=''>
		{{foreach \IPS\forums\Forum::roots() as $category}}
			{{if $category->can('view') && $category->hasChildren()}}
			<li data-categoryID='{$category->_id}' class='cForumRow ipsBox ipsSpacer_bottom'>
				<h2 class="ipsType_sectionTitle ipsType_reset cForumTitle">
					<a href='#' class='ipsPos_right ipsJS_show ipsType_noUnderline cForumToggle' data-action='toggleCategory' data-ipsTooltip title='{lang="toggle_this_category"}'></a>
					<a href='{$category->url()}'>{$category->_title}</a>
				</h2>
				{{if \IPS\forums\Forum::getMemberView() === 'grid'}}
					<div class='ipsAreaBackground ipsPad' data-role="forums">
						<div class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='250' data-ipsGrid-maxItemSize='500' data-ipsGrid-equalHeights='row'>
							{{foreach $category->children() as $forum}}
								{template="forumGridItem" group="index" app="forums" params="$forum"}
							{{endforeach}}
						</div>
					</div>
				{{else}}
					<ol class="ipsDataList ipsDataList_large ipsDataList_zebra ipsAreaBackground_reset" data-role="forums">
						{{foreach $category->children() as $forum}}
							{template="forumRow" group="index" app="forums" params="$forum"}
						{{endforeach}}
					</ol>
				{{endif}}
			</li>
			{{endif}}
		{{endforeach}}
		{{if settings.club_nodes_in_apps and $clubForums = \IPS\forums\Forum::clubNodes()}}
			<li data-categoryID='clubs' class='cForumRow ipsBox ipsSpacer_bottom'>
				<h2 class="ipsType_sectionTitle ipsType_reset cForumTitle">
					<a href='#' class='ipsPos_right ipsJS_show ipsType_noUnderline cForumToggle' data-action='toggleCategory' data-ipsTooltip title='{lang="toggle_this_category"}'></a>
					<a href='{url="app=forums&module=forums&controller=forums&do=clubs" seoTemplate="forums_clubs"}'>{lang="club_node_forums"}</a>
				</h2>
				{{if \IPS\forums\Forum::getMemberView() === 'grid'}}
					<div class='ipsAreaBackground ipsPad' data-role="forums">
						<div class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='250' data-ipsGrid-maxItemSize='500' data-ipsGrid-equalHeights='row'>
							{{foreach $clubForums as $forum}}
								{template="forumGridItem" group="index" app="forums" params="$forum"}
							{{endforeach}}
						</div>
					</div>
				{{else}}
					<ol class="ipsDataList ipsDataList_large ipsDataList_zebra ipsAreaBackground_reset" data-role="forums">
						{{foreach $clubForums as $forum}}
							{template="forumRow" group="index" app="forums" params="$forum"}
						{{endforeach}}
					</ol>
				{{endif}}
			</li>
		{{endif}}
	</ol>
</section>]]></template>
 <template template_group="index" template_name="indexButtons" template_data="$showViewButtons=TRUE, $showFilterButton=FALSE" template_location="front" template_app="forums"><![CDATA[
{{if $showFilterButton}}
	<li class='ipsToolList_primaryAction ipsResponsive_hideDesktop ipsResponsive_block'>
		<a class="ipsButton ipsButton_medium ipsButton_link ipsButton_fullWidth" href="#" data-ipsDialog data-ipsDialog-title='{lang="forums_simple_dialog_title"}' data-ipsDialog-content='#elFluidFormFilters'>
			<span data-role='fluidForumMobileDesc'>{lang="forums_simple_filter_by"}</span> <i class='fa fa-angle-down'></i></a>
	</li>
{{endif}}
{{if \IPS\forums\Forum::canOnAny('add')}}
<li class='ipsToolList_primaryAction ipsResponsive_hideTablet'>
	<a class="ipsButton ipsButton_medium ipsButton_important ipsButton_fullWidth" href="{url="app=forums&module=forums&controller=forums&do=add"}" data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title='{lang="select_forum"}'>{lang="start_new_topic"}</a>
</li>
{{endif}}

{{if $showViewButtons}}
	{template="viewChange" group="global" app="forums" params=""}
{{endif}}]]></template>
 <template template_group="index" template_name="simplifiedForumTable" template_data="$table, $headers, $rows, $quickSearch" template_location="front" template_app="forums"><![CDATA[<div class='ipsBox cForumFluidTable' data-baseurl='{$table->baseUrl}' data-resort='{$table->resortKey}' data-tableID='topics' data-dummyLoading data-controller='core.global.core.table{{if $table->canModerate()}},core.front.core.moderation{{endif}}'>
	{{if $table->title}}
		<h2 class='ipsType_sectionTitle ipsHide {{if !$table->container()->forums_bitoptions['bw_enable_answers']}}ipsType_medium{{endif}} ipsType_reset ipsClear'>{$table->title}</h2>
	{{endif}}

	{{if $table->count > 0}}
	<div class="ipsButtonBar ipsPad_half ipsClearfix ipsClear">
		{{if $table->canModerate()}}
			<ul class="ipsButtonRow ipsPos_right ipsClearfix">
				<li>
					<a class="ipsJS_show" href="#elCheck_menu" id="elCheck_{$table->uniqueId}" title='{lang="{$table->langPrefix}select_rows_tooltip"}' data-ipsTooltip data-ipsAutoCheck data-ipsAutoCheck-context="#elTable_{$table->uniqueId}" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active">
						<span class="cAutoCheckIcon ipsType_medium"><i class="fa fa-square-o"></i></span> <i class="fa fa-caret-down"></i>
						<span class='ipsNotificationCount' data-role='autoCheckCount'>0</span>
					</a>
					<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide" id="elCheck_{$table->uniqueId}_menu">
						<li class="ipsMenu_title">{lang="{$table->langPrefix}select_rows"}</li>
						<li class="ipsMenu_item" data-ipsMenuValue="all"><a href="#">{lang="all"}</a></li>
						<li class="ipsMenu_item" data-ipsMenuValue="none"><a href="#">{lang="none"}</a></li>
						{{if \count($table->getFilters())}}
							<li class="ipsMenu_sep"><hr></li>
							{{foreach $table->getFilters() as $filter}}
								<li class="ipsMenu_item" data-ipsMenuValue="{$filter}"><a href="#">{lang="$filter"}</a></li>
							{{endforeach}}
						{{endif}}
					</ul>
				</li>
			</ul>
		{{endif}}
		<ul class="ipsButtonRow ipsPos_right ipsClearfix">
			{{if isset( $table->sortOptions ) and !empty( $table->sortOptions ) }}
				<li>
					<a href="#elSortByMenu_menu" id="elSortByMenu_{$table->uniqueId}" data-role='sortButton' data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active" data-ipsMenu-selectable="radio">{lang="sort_by"} <i class="fa fa-caret-down"></i></a>
					<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide" id="elSortByMenu_{$table->uniqueId}_menu">
						{{$custom = TRUE;}}
						{{foreach $table->sortOptions as $k => $col}}
							<li class="ipsMenu_item {{if $col === $table->getSortByColumn()}}{{$custom = FALSE;}}ipsMenu_itemChecked{{endif}}" data-ipsMenuValue="{$col}" data-sortDirection='{$table->getSortDirection( $col )}'><a href="{$table->baseUrl->setQueryString( array( 'filter' => $table->filter, 'sortby' => $col, 'sortdirection' => $table->getSortDirection( $col ) ) )->setPage( 'page', 1 )}">{lang="{$table->langPrefix}sort_{$k}"}</a></li>
						{{endforeach}}
						{{if $table->advancedSearch}}
							<li class="ipsMenu_item {{if $custom}}ipsMenu_itemChecked{{endif}}" data-noSelect="true">
								<a href='{$table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )}' data-ipsDialog data-ipsDialog-title='{lang="custom_sort"}'>{lang="custom"}</a>
							</li>
						{{endif}}
					</ul>
				</li>
			{{endif}}
			{{if !empty( $table->filters )}}
				<li>
					<a href="#elFilterByMenu_menu" id="elFilterByMenu_{$table->uniqueId}" data-role='tableFilterMenu' data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active" data-ipsMenu-selectable="radio">{lang="filter_by"} <i class="fa fa-caret-down"></i></a>
					<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide' data-role="tableFilterMenu" id='elFilterByMenu_{$table->uniqueId}_menu'>
						<li data-action="tableFilter" data-ipsMenuValue='' class='ipsMenu_item {{if !$table->filter}}ipsMenu_itemChecked{{endif}}'>
							<a href='{$table->baseUrl->setQueryString( array( 'filter' => '', 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )->setPage( 'page', 1 )}'>{lang="{$table->langPrefix}all"}</a>
						</li>
						{{foreach $table->filters as $k => $q}}
							<li data-action="tableFilter" data-ipsMenuValue='{$k}' class='ipsMenu_item {{if $k === $table->filter}}ipsMenu_itemChecked{{endif}}'>
								<a href='{$table->baseUrl->setQueryString( array( 'filter' => $k, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection) )->setPage( 'page', 1 )}'>{lang="{$table->langPrefix}{$k}"}</a>
							</li>
						{{endforeach}}
					</ul>
				</li>
			{{endif}}
		</ul>

		{{if $table->pages > 1}}
			<div data-role="tablePagination">
				{template="pagination" group="global" app="core" location="global" params="$table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey()"}
			</div>
		{{endif}}
	</div>
	{{endif}}
	{{if $table->canModerate()}}
		<form action="{$table->baseUrl->csrf()}" method="post" data-role='moderationTools' data-ipsPageAction>
	{{endif}}
		{{if \count( $rows )}}
			<ol class='ipsDataList ipsDataList_zebra ipsClear cForumTopicTable {{foreach $table->classes as $class}}{$class} {{endforeach}}' id='elTable_{$table->uniqueId}' data-role="tableRows">
				{template="$table->rowsTemplate[1]" params="$table, $headers, $rows" object="$table->rowsTemplate[0]"}
			</ol>
		{{else}}
			<div class='ipsType_center ipsPad'>
				<p class='ipsType_large'>{lang="no_topics_in_forum"}</p>
			</div>
		{{endif}}
		{{if $table->canModerate()}}
			<div class="ipsAreaBackground ipsPad ipsClearfix ipsJS_hide" data-role="pageActionOptions">
				<div class="ipsPos_right">
					<select name="modaction" data-role="moderationAction">
						{{if $table->canModerate('unhide')}}
							<option value='approve' data-icon='check-circle'>{lang="approve"}</option>
						{{endif}}
						{{if $table->canModerate('feature') or $table->canModerate('unfeature')}}
							<optgroup label="{lang="feature"}" data-icon='star' data-action='feature'>
								{{if $table->canModerate('feature')}}
									<option value='feature'>{lang="feature"}</option>
								{{endif}}
								{{if $table->canModerate('unhide')}}
									<option value='unfeature'>{lang="unfeature"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('pin') or $table->canModerate('unpin')}}
							<optgroup label="{lang="pin"}" data-icon='thumb-tack' data-action='pin'>
								{{if $table->canModerate('pin')}}
									<option value='pin'>{lang="pin"}</option>
								{{endif}}
								{{if $table->canModerate('unpin')}}
									<option value='unpin'>{lang="unpin"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('hide') or $table->canModerate('unhide')}}
							<optgroup label="{lang="hide"}" data-icon='eye' data-action='hide'>
								{{if $table->canModerate('hide')}}
									<option value='hide'>{lang="hide"}</option>
								{{endif}}
								{{if $table->canModerate('unhide')}}
									<option value='unhide'>{lang="unhide"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('lock') or $table->canModerate('unlock')}}
							<optgroup label="{lang="lock"}" data-icon='lock' data-action='lock'>
								{{if $table->canModerate('lock')}}
									<option value='lock'>{lang="lock"}</option>
								{{endif}}
								{{if $table->canModerate('unlock')}}
									<option value='unlock'>{lang="unlock"}</option>
								{{endif}}
							</optgroup>
						{{endif}}
						{{if $table->canModerate('move')}}
							<option value='move' data-icon='arrow-right'>{lang="move"}</option>
						{{endif}}
						{{if $table->canModerate('split_merge')}}
							<option value='merge' data-icon='level-up'>{lang="merge"}</option>
						{{endif}}
						{{if $table->canModerate('delete')}}
							<option value='delete' data-icon='trash'>{lang="delete"}</option>
						{{endif}}
						{{if $table->savedActions}}
							<optgroup label="{lang="saved_actions"}" data-icon='tasks' data-action='saved_actions'>
								{{foreach $table->savedActions as $k => $v}}
									<option value='savedAction-{$k}'>{$v}</option>
								{{endforeach}}
							</optgroup>
						{{endif}}
					</select>
					<button type="submit" class="ipsButton ipsButton_alternate ipsButton_verySmall">{lang="submit"}</button>
				</div>
			</div>
		</form>
	{{endif}}
	{{if $table->pages > 1}}
		<div class="ipsButtonBar ipsPad_half ipsClearfix ipsClear">
			<div data-role="tablePagination">
				{template="pagination" group="global" app="core" location="global" params="$table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey()"}
			</div>
		</div>
	{{endif}}
</div>]]></template>
 <template template_group="index" template_name="simplifiedTopicRow" template_data="$table, $headers, $rows" template_location="front" template_app="forums"><![CDATA[{{$rowIds = array();}}
{{foreach $rows as $row}}
	{{$idField = $row::$databaseColumnId;}}
	{{$rowIds[] = $row->$idField;}}
{{endforeach}}
{{if \count( $rows )}}
	{{$rowCount=0; $adShown=0;}}
	{{foreach $rows as $row}}
		{{if $rowCount == 1 AND $advertisement = \IPS\core\Advertisement::loadByLocation( 'ad_forum_listing' )}}
			<li class="ipsDataItem">
				{$advertisement|raw}
			</li>
		{{endif}}
		{{$rowCount++;}}
		{{$idField = $row::$databaseColumnId;}}
		{{if $row->mapped('moved_to')}}
			{{if $movedTo = $row->movedTo() AND $movedTo->container()->can('view')}}
				<li class="ipsDataItem">
					<div class='ipsDataItem_icon ipsType_center ipsType_noBreak'>
						<i class="fa fa-arrow-left ipsType_large"></i>
					</div>
					<div class='ipsDataItem_main'>
						<h4 class='ipsDataItem_title ipsContained_container'>
							<span class='ipsType_break ipsContained'>
								<em><a href='{$movedTo->url()}' title='{lang="go_to_new_location"}'>{$row->mapped('title')}</a></em>
							</span>
						</h4>
						<div class='ipsDataItem_meta'>
							{{if isset( $row::$databaseColumnMap['status'] )}}
								{{$statusField = $row::$databaseColumnMap['status'];}}
								{{if $row->$statusField == 'merged'}}
									<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="topic_merged_to" sprintf="$movedTo->url(), $movedTo->mapped('title')"}</p>
								{{else}}
									<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="topic_moved_to" sprintf="$movedTo->container()->url(), $movedTo->container()->_title"}</p>
								{{endif}}
							{{else}}
								<p class='ipsType_reset ipsType_light ipsType_blendLinks'>{lang="topic_moved_to" sprintf="$movedTo->container()->url(), $movedTo->container()->_title"}</p>
							{{endif}}
						</div>
					</div>
					{{if $table->canModerate()}}
						<div class='ipsDataItem_modCheck'>
							<span class='ipsCustomInput'>
								<input type='checkbox' data-role='moderation' name="moderate[{$row->$idField}]" data-actions="{{if $row->mapped('featured')}}unfeature{{endif}} {{if $row->mapped('pinned')}}unpin{{endif}} delete" data-state='{{if $row->mapped('pinned')}}pinned{{endif}} {{if $row->mapped('featured')}}featured{{endif}}'>
								<span></span>
							</span>
						</div>
					{{endif}}
				</li>
			{{endif}}
		{{else}}
			<li class="ipsDataItem ipsDataItem_responsivePhoto {{if $row->unread()}}ipsDataItem_unread{{endif}} {{if method_exists( $row, 'tableClass' ) && $row->tableClass()}}ipsDataItem_{$row->tableClass()}{{endif}} {{if $row->hidden()}}ipsModerated{{endif}}" data-rowID='{$row->$idField}'>
				<div class='ipsDataItem_icon ipsType_blendLinks'>
					{template="userPhoto" app="core" group="global" params="$row->author(), 'tiny'"}
				</div>
				<div class='ipsDataItem_main'>
					<h4 class='ipsDataItem_title ipsContained_container'>
						{{if member.member_id}}
							{{if $row->unread()}}
								<span>
									<a href='{$row->url( 'getNewComment' )}' title='{lang="first_unread_post"}' data-ipsTooltip>
										<span class='ipsItemStatus'><i class="fa {{if \in_array( $row->$idField, $table->contentPostedIn )}}fa-star{{else}}fa-circle{{endif}}"></i></span>
									</a>
								</span>
							{{else}}
								{{if \in_array( $row->$idField, $table->contentPostedIn )}}
									<span>
										<span class='ipsItemStatus ipsItemStatus_read ipsItemStatus_posted'><i class="fa fa-star"></i></span>
									</span>
								{{endif}}
							{{endif}}
						{{endif}}
						{{if $row->locked()}}
							<span>
								<i class='ipsType_medium fa fa-lock' data-ipsTooltip title='{lang="topic_locked"}'></i>
							</span>	
							{{if $row->topic_open_time && $row->topic_open_time > time()}}
								<span><strong class='ipsType_small ipsType_noBreak' data-ipsTooltip title='{lang="topic_unlocks_at" sprintf="\IPS\DateTime::ts( $row->topic_open_time )->relative(), \IPS\DateTime::ts( $row->topic_open_time )->localeTime( FALSE )"}'>{lang="topic_unlocks_at_short" sprintf="\IPS\DateTime::ts($row->topic_open_time)->relative(1)"}</strong>&nbsp;&nbsp;</span>
							{{endif}}
						{{elseif !$row->locked() && $row->topic_close_time && $row->topic_close_time > time()}}
							<span><strong class='ipsType_small ipsType_noBreak' data-ipsTooltip title='{lang="topic_locks_at" sprintf="\IPS\DateTime::ts( $row->topic_close_time )->relative(), \IPS\DateTime::ts( $row->topic_close_time )->localeTime( FALSE )"}'><i class='fa fa-clock-o'></i> {lang="topic_locks_at_short" sprintf="\IPS\DateTime::ts($row->topic_close_time)->relative(1)"}</strong>&nbsp;&nbsp;</span>
						{{endif}}

						{{if $row->mapped('poll')}}
							<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_neutral" data-ipsTooltip title='{lang="topic_has_poll"}'><i class='fa fa-question'></i></span></span>
						{{endif}}
						
						{{if $row->mapped('pinned') || $row->mapped('featured') || $row->hidden() === -1 || $row->hidden() === 1}}
							{{if $row->hidden() === -1}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$row->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span></span>
							{{elseif $row->hidden() === 1}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span></span>
							{{endif}}							
							{{if $row->mapped('pinned')}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="pinned"}'><i class='fa fa-thumb-tack'></i></span></span>
							{{endif}}
							{{if $row->mapped('featured')}}
								<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span></span>
							{{endif}}
						{{endif}}
										
						{{if $row->prefix()}}
							<span>{template="prefix" group="global" app="core" params="$row->prefix( TRUE ), $row->prefix()"}</span>
						{{endif}}						
						
						<span class='ipsType_break ipsContained'>
							<a href='{$row->url()}' class='' title='{{if $row->mapped('title')}}{$row->mapped('title')}{{else}}{lang="content_deleted"}{{endif}} {{if $row->canEdit()}}{lang="click_hold_edit"}{{endif}}' {{if $row->tableHoverUrl and $row->canView()}} data-ipsHover data-ipsHover-target='{$row->url()->setQueryString('preview', 1)}' data-ipsHover-timeout='1.5'{{endif}}{{if $row->canEdit()}} data-role="editableTitle"{{endif}}>
								<span>
									{{if $row->mapped('title') or $row->mapped('title') == 0}}{$row->mapped('title')}{{else}}<em class="ipsType_light">{lang="content_deleted"}</em>{{endif}}
								</span>
							</a>

							{{if $row->commentPageCount() > 1}}
								{$row->commentPagination( array(), 'miniPagination' )|raw}
							{{endif}}
						</span>
					</h4>
					<div class='ipsDataItem_meta ipsType_reset ipsType_light ipsType_blendLinks'>
						<span>
							{lang="byline_itemprop" htmlsprintf="$row->author()->link()"}
						</span>{datetime="$row->mapped('date')" lowercase="true"}
						{lang="in"} <a href="{$row->container()->url()}">{{if $club = $row->container()->club()}}{lang="club_node" sprintf="$club->name, $row->container()->_title"}{{else}}{$row->container()->_formattedTitle|raw}{{endif}}</a>
						
						{{if \count( $row->tags() )}}
							&nbsp;&nbsp;
							{template="tags" group="global" app="core" params="$row->tags(), true"}
						{{endif}}
					</div>
				</div>
				<ul class='ipsDataItem_stats'>
					{{foreach $row->stats(FALSE) as $k => $v}}
						<li {{if $k == 'num_views'}}class='ipsType_light'{{elseif \in_array( $k, $row->hotStats )}}class="ipsDataItem_stats_hot" data-text='{lang="hot_item"}' data-ipsTooltip title='{lang="hot_item_desc"}'{{endif}}>
							<span class='ipsDataItem_stats_number'>{number="$v"}</span>
							<span class='ipsDataItem_stats_type'>{lang="{$k}" pluralize="$v"}</span>
							{{if ( $k == 'forums_comments' OR $k == 'answers_no_number' ) && \IPS\forums\Topic::modPermission( 'unhide', NULL, $row->container() ) AND $unapprovedComments = $row->mapped('unapproved_comments')}}
								&nbsp;<a href='{$row->url()->setQueryString( 'queued_posts', 1 )}' class='ipsType_warning ipsType_small ipsPos_right ipsResponsive_noFloat' data-ipsTooltip title='{lang="queued_posts_badge" pluralize="$row->topic_queuedposts"}'><i class='fa fa-warning'></i> <strong>{$unapprovedComments}</strong></a>
							{{endif}}
						</li>
					{{endforeach}}
					<li class="ipsType_light ipsResponsive_hideDesktop">
						<a href='{$row->url( 'getLastComment' )}' title='{lang="get_last_post"}' class='ipsType_blendLinks'>
							{lang="updated"} {{if $row->mapped('last_comment')}}{datetime="$row->mapped('last_comment')"}{{else}}{datetime="$row->mapped('date')"}{{endif}}
						</a>
					</li>
				</ul>
				<ul class='ipsDataItem_lastPoster ipsDataItem_noPhoto ipsType_blendLinks ipsResponsive_hidePhone ipsResponsive_hideTablet'>
					<li>
						{{if $row->mapped('num_comments')}}
							{$row->lastCommenter()->link()|raw}
						{{else}}
							{$row->author()->link()|raw}
						{{endif}}
					</li>
					<li class="ipsType_light">
						<a href='{$row->url( 'getLastComment' )}' title='{lang="get_last_post"}' class='ipsType_blendLinks'>
							{{if $row->mapped('last_comment')}}{datetime="$row->mapped('last_comment')"}{{else}}{datetime="$row->mapped('date')"}{{endif}}
						</a>
					</li>
				</ul>
				{{if $table->canModerate()}}
					<div class='ipsDataItem_modCheck'>
						<span class='ipsCustomInput'>
							<input type='checkbox' data-role='moderation' name="moderate[{$row->$idField}]" data-actions="{expression="implode( ' ', $table->multimodActions( $row ) )"}" data-state='{{if $row->tableStates()}}{$row->tableStates()}{{endif}}'>
							<span></span>
						</span>
					</div>
				{{endif}}
		</li>
		{{endif}}
		{{if $advertisement = \IPS\core\Advertisement::loadByLocation( 'ad_fluid_index_view' ) and ( $rowCount + 1 > $advertisement->_additional_settings['ad_fluid_index_view_number'] and ( ( $rowCount + 1 ) % $advertisement->_additional_settings['ad_fluid_index_view_number'] === 1 ) )}}
			{{if $advertisement->_additional_settings['ad_fluid_index_view_repeat'] == -1 or ( $advertisement->_additional_settings['ad_fluid_index_view_repeat'] > $adShown )}}
				<li>{$advertisement|raw}</li>
				{{$adShown++;}}
			{{endif}}
		{{endif}}
	{{endforeach}}
{{endif}}]]></template>
 <template template_group="index" template_name="simplifiedView" template_data="$table" template_location="front" template_app="forums"><![CDATA[<div class="ipsPageHeader ipsClearfix ipsSpacer_bottom cForumHeader ipsHeaderButtons">
	{{if \IPS\forums\Forum::canOnAny( 'add' )}}
		<ul class='ipsToolList ipsToolList_horizontal ipsClearfix ipsPos_right'>
			<li class='ipsToolList_primaryAction ipsResponsive_hidePhone'>
				<a class="ipsButton ipsButton_medium ipsButton_important" href="{url="app=forums&module=forums&controller=forums&do=add" seoTemplate="topic_non_forum_add_button"}" data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title='{lang="select_forum"}'>{lang="start_new_topic"}</a>
			</li>
			{template="viewChange" group="global" app="forums" params=""}
		</ul>
	{{endif}}
	<h1 class="ipsType_pageTitle">
		{lang="topics"}
	</h1>
</div>

<ul class="ipsToolList ipsToolList_horizontal ipsResponsive_hideDesktop ipsResponsive_block ipsClearfix">
	{template="indexButtons" group="index" app="forums" params="FALSE, TRUE"}
</ul>

{$table|raw}]]></template>
 <template template_group="index" template_name="simplifiedViewSidebar" template_data="$forumIds, $map" template_location="front" template_app="forums"><![CDATA[<div data-controller="forums.front.forum.flow" class='ipsBox cForumMiniList_wrapper' id='elFluidFormFilters'>
	<div class='ipsSideMenu'>
		{{if \count( \IPS\forums\Forum::roots() ) === 1}}
			<ul class='ipsSideMenu_list cForumMiniList cForumMiniList_singleRoot'>
				{{foreach \IPS\forums\Forum::roots() as $category}}
					{template="simplifiedViewSidebar_children" app="forums" location="front" group="index" params="$forumIds, $category, 0"}
				{{endforeach}}
			</ul>
		{{else}}
			<ul class='ipsSideMenu_list cForumMiniList cForumMiniList_multiRoot'>
				{{foreach \IPS\forums\Forum::roots() as $category}}
					{{if $category->hasChildren()}}
						<li class="" data-category>
							<a href="{$category->url()}" data-parent-id="{$category->_id}" data-node-id="{$category->_id}" class='ipsSideMenu_item ipsTruncate ipsTruncate_line'>{$category->_title}</a>
							{{if $category->hasChildren()}}
								<ul class='ipsSideMenu_list cForumMiniList'>
									{template="simplifiedViewSidebar_children" app="forums" location="front" group="index" params="$forumIds, $category, 0"}
								</ul>
							{{endif}}
						</li>
					{{endif}}
				{{endforeach}}
				{{if settings.club_nodes_in_apps and $clubForums = \IPS\forums\Forum::clubNodes()}}
					<li class="{{if \in_array( 'clubs', $map )}}cForumMiniList_categorySelected{{endif}}">
						<a href="{url="app=forums&module=forums&controller=index&forumId=clubs" seoTemplate="forums"}" data-parent-id="clubs" data-node-id="clubs" class='{{if \in_array( 'clubs', $map )}}cForumMiniList_selected{{endif}} ipsSideMenu_item ipsTruncate ipsTruncate_line'>{lang="club_node_forums"}</a>
						<ul class='ipsSideMenu_list cForumMiniList'>
							{{foreach $clubForums as $idx => $forum}}
								{{$lastPost = $forum->lastPost();}}
								{{$unread = \IPS\forums\Topic::containerUnread( $forum );}}
								{{$children = $forum->children();}}
								{{if ! $forum->redirect_on and $forum->can('read') }}
									<li class="{{if $children}}cForumMiniList_category{{endif}} {{if isset( $map[ $forum->parent_id ] ) AND \in_array( $forum->_id, $map[ $forum->parent_id ] )}}cForumMiniList_categorySelected{{endif}}">
										<a href="{$forum->url()}" data-parent-id="clubs" data-node-id="{$forum->_id}" data-has-children="{{if $children}}1{{else}}0{{endif}}" class='{{if \in_array( $forum->_id, $forumIds )}}cForumMiniList_selected{{endif}} ipsSideMenu_item {{if !$unread}}cForumMiniList_unread{{endif}}'>
											<span class='cForumMiniList_blob' {{if $forum->feature_color}}style="background-color: {$forum->feature_color}; color: {$forum->_featureTextColor};"{{endif}} {{if $lastPost['date']}}title="{lang="forum_simple_view_last_post"} {datetime="$lastPost['date']"}" data-ipsTooltip data-ipsTooltip-safe{{endif}}>
												<span></span>
												<i class='fa fa-check'></i>
											</span>
											<span class='cForumMiniList_title ipsTruncate ipsTruncate_line'>
												{{if $unread}}<strong>{{endif}}{lang="club_node" sprintf="$forum->club()->name, $forum->_title"}{{if $unread}}</strong>{{endif}}
											</span>
											<span class='ipsType_small ipsType_light cForumMiniList_count'>{expression="\IPS\forums\Topic::contentCount( $forum )"}</span>
										</a>
									</li>
								{{endif}}
							{{endforeach}}
						</ul>
					</li>
				{{endif}}
			</ul>
		{{endif}}
	</div>
	<div class='ipsResponsive_hideDesktop ipsResponsive_block'>
		<hr class='ipsHr'>
		<a href='#' class='ipsButton ipsButton_fullWidth ipsButton_primary ipsButton_medium' data-action='dialogClose'>{lang="done_forum_filtering"}</a>
	</div>
</div>]]></template>
 <template template_group="index" template_name="simplifiedViewSidebar_children" template_data="$forumIds, $parent, $depth" template_location="front" template_app="forums"><![CDATA[{{if $parent->hasChildren()and $depth < 5}}
	{{foreach $parent->children() as $idx => $forum}}
		{{$lastPost = $forum->lastPost();}}
		{{$unread = \IPS\forums\Topic::containerUnread( $forum );}}
		{{$children = $forum->children();}}
		{{if ! $forum->redirect_on and ( $forum->can('read') or !$forum->sub_can_post ) }}
			<li class="{{if $children}}cForumMiniList_category{{endif}}">
				<a href="{$forum->url()}" data-parent-id="{$parent->_id}" data-node-id="{$forum->_id}" data-has-children="{{if $children}}1{{else}}0{{endif}}" class='ipsSideMenu_item {{if !$unread}}cForumMiniList_unread{{endif}}'>
					<span class='cForumMiniList_blob' {{if $forum->feature_color}}style="background-color: {$forum->feature_color}; color: {$forum->_featureTextColor};"{{endif}} {{if $lastPost['date']}}title="{lang="forum_simple_view_last_post"} {datetime="$lastPost['date']"}" data-ipsTooltip data-ipsTooltip-safe{{endif}}>
						<span></span>
						<i class='fa fa-check'></i>
					</span>
					<span class='cForumMiniList_title ipsTruncate ipsTruncate_line'>
						{{if $unread}}<strong>{{endif}}{$forum->_title}{{if $unread}}</strong>{{endif}}
					</span>
					<span class='ipsType_small ipsType_light cForumMiniList_count'>{expression="\IPS\forums\Topic::contentCount( $forum )"}</span>
				</a>
				{{if $children}}
					<ul class='ipsSideMenu_list cForumMiniList'>
						{template="simplifiedViewSidebar_children" app="forums" location="front" group="index" params="$forumIds, $forum, $depth+1"}
					</ul>
				{{endif}}
			</li>
		{{endif}}
	{{endforeach}}
{{endif}}]]></template>
 <template template_group="livesearch" template_name="forum" template_data="$forum" template_location="admin" template_app="forums"><![CDATA[<li class='ipsPad_half ipsClearfix' data-role='result'>
	<a href='{url="app=forums&module=forums&controller=forums&do=form&id="}{$forum->id}' class='ipsPos_left'>{$forum->_title}</a>
</li>

]]></template>
 <template template_group="settings" template_name="archiveRuleGtLt" template_data="$name, $value" template_location="admin" template_app="forums"><![CDATA[<select name="{$name}[0]">
	<option value=">" {{if isset( $value[0] ) and $value[0] == '>'}}selected{{endif}}>{lang="greater_than"}</option>
	<option value="<" {{if isset( $value[0] ) and $value[0] == '<'}}selected{{endif}}>{lang="less_than"}</option>
</select>
<input type="number" name="{$name}[1]" value="{{if isset( $value[1] )}}{$value[1]}{{endif}}" id='el{$name}_1' class="ipsField_short"> {lang="or"}
<span class='ipsCustomInput'>
	<input type="checkbox" name="{$name}[2]" data-control="unlimited" {{if isset( $value[2] ) and $value[2]}}checked{{endif}}>
	<span></span>
</span> <label for='el{$name}_1' class='ipsField_unlimited'>{{if \in_array( $name, array( 'archive_topic_post', 'archive_topic_view', 'archive_topic_rating', 'archive_not_topic_post', 'archive_not_topic_view', 'archive_not_topic_rating'  ) )}}{lang="no_restriction"}{{else}}{lang="any_time"}{{endif}}</label>]]></template>
 <template template_group="settings" template_name="archiveRules" template_data="$form, $totalTopics, $existingCount, $existingPercentage" template_location="admin" template_app="forums"><![CDATA[<div data-controller="forums.admin.settings.archiveRules">
	<div class="ipsPad ipsType_normal">{lang="archiving_blurb"}</div>
	<div data-ipsSticky data-ipsSticky-spacing='60' class="ipsPad_half ipsAreaBackground_reset ipsType_center">
		<strong>{lang="archive_rules_effects"}</strong><br>
		<div class="ipsProgressBar">
			<div class="ipsProgressBar_progress" style="width:{$existingPercentage}%" data-role="percentageBar"><span data-role="percentage">{$existingPercentage}</span>% (<span data-role="number">{$existingCount}</span>/{$totalTopics})</div>
		</div>
	</div>
	{$form|raw}
</div>]]></template>
 <template template_group="settings" template_name="archiveRuleTime" template_data="$name, $value" template_location="admin" template_app="forums"><![CDATA[<select name="{$name}[0]">
	<option value="<" {{if isset( $value[0] ) and $value[0] == '<'}}selected{{endif}}>{lang="greater_than"}</option>
	<option value=">" {{if isset( $value[0] ) and $value[0] == '>'}}selected{{endif}}>{lang="less_than"}</option>
</select>
<input type="number" name="{$name}[1]" value="{{if isset( $value[1] )}}{$value[1]}{{endif}}" class="ipsField_short" min="0">
<select name="{$name}[2]">
	<option value="d" {{if isset( $value[2] ) and $value[2] == 'd'}}selected{{endif}}>{lang="days"}</option>
	<option value="m" {{if isset( $value[2] ) and $value[2] == 'm'}}selected{{endif}}>{lang="months"}</option>
	<option value="y" {{if isset( $value[2] ) and $value[2] == 'y'}}selected{{endif}}>{lang="years"}</option>
</select>
{lang="ago"} {lang="or"} 
<span class='ipsCustomInput'>
	<input type="checkbox" name="{$name}[3]" id='el{$name}_3' data-control="unlimited" {{if isset( $value[3] ) and $value[3]}}checked{{endif}}>
	<span></span>
</span> <label for='el{$name}_3' class='ipsField_unlimited'>{{if mb_strpos( $name, 'not' )}}{lang="no_restriction"}{{else}}{lang="any_time"}{{endif}}</label>]]></template>
 <template template_group="settings" template_name="popularNow" template_data="$name, $value, $popularNowMaximum" template_location="admin" template_app="forums"><![CDATA[<input type="number" name="{$name}[posts]" value="{$value['posts']}" class="ipsField_short"> {lang="posts_in_the_last"} <input type="number" name="{$name}[minutes]" value="{$value['minutes']}" max="{$popularNowMaximum}" class="ipsField_short"> {lang="minutes"} {lang="or"}
<span class='ipsCustomInput'>
	<input type="checkbox" name="{$name}[never]" id='el{$name}_never' data-control="unlimited" {{if !$value['posts']}}checked{{endif}}>
	<span></span>
</span> <label for='el{$name}_never' class='ipsField_unlimited'>{lang="never"}</label>]]></template>
 <template template_group="submit" template_name="createTopic" template_data="$form, $forum, $title" template_location="front" template_app="forums"><![CDATA[
{{if $club = $forum->club()}}
	{{if settings.clubs and settings.clubs_header == 'full'}}
		{template="header" app="core" group="clubs" params="$club, $forum"}
	{{endif}}
	<div id='elClubContainer'>
{{endif}}

{template="pageHeader" if="!\IPS\Request::i()->isAjax()" group="global" app="core" params="\IPS\Member::loggedIn()->language()->addToStack( $title )"}

{$form|raw}

{{if $club = $forum->club()}}
	</div>
{{endif}}]]></template>
 <template template_group="submit" template_name="createTopicForm" template_data="$forum, $hasModOptions, $topic, $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar=NULL, $form=NULL, $errorTabs=array()" template_location="front" template_app="forums"><![CDATA[{{$modOptions = array( 'topic_create_state', 'create_topic_locked', 'create_topic_pinned', 'create_topic_hidden', 'create_topic_featured', 'topic_open_time', 'topic_close_time');}}

<form accept-charset='utf-8' class="ipsForm {$class}" action="{$action}" method="post" {{if $uploadField}}enctype="multipart/form-data"{{endif}} data-ipsForm data-ipsFormSubmit>
	<input type="hidden" name="{$id}_submitted" value="1">
	{{foreach $hiddenValues as $k => $v}}
		<input type="hidden" name="{$k}" value="{$v}">
	{{endforeach}}
	{{if $uploadField}}
		<input type="hidden" name="MAX_FILE_SIZE" value="{$uploadField}">
		<input type="hidden" name="plupload" value="{expression="md5( mt_rand() )"}">
	{{endif}}
	
	{{if $form->error}}
		<p class="ipsMessage ipsMessage_error">{$form->error}</p>
	{{endif}}

	<div class='ipsBox'>
		<h2 class='ipsType_sectionTitle ipsType_reset ipsHide'>{lang="topic_details"}</h2>
		{{if \count( $elements ) > 1}}
			{{if !empty( $errorTabs )}}
				<p class="ipsMessage ipsMessage_error ipsJS_show">{lang="tab_error"}</p>
			{{endif}}
			<div class='ipsTabs ipsClearfix ipsJS_show' id='tabs_{$id}' data-ipsTabBar data-ipsTabBar-contentArea='#ipsTabs_content_{$id}'>
				<a href='#tabs_{$id}' data-action='expandTabs'><i class='fa fa-caret-down'></i></a>
				<ul role='tablist'>
					{{foreach $elements as $name => $content}}
						<li>
							<a href='#ipsTabs_tabs_{$id}_{$id}_tab_{$name}_panel' id='{$id}_tab_{$name}' class="ipsTabs_item {{if \in_array( $name, $errorTabs )}}ipsTabs_error{{endif}}" role="tab" aria-selected="{{if $name == 'mainTab'}}true{{else}}false{{endif}}">
								{{if \in_array( $name, $errorTabs )}}<i class="fa fa-exclamation-circle"></i> {{endif}}{lang="$name"}
							</a>
						</li>
					{{endforeach}}
				</ul>
			</div>
			<div id='ipsTabs_content_{$id}' class='ipsTabs_panels'>
				{{foreach $elements as $name => $contents}}
					<div id='ipsTabs_tabs_{$id}_{$id}_tab_{$name}_panel' class="ipsTabs_panel ipsPad" aria-labelledby="{$id}_tab_{$name}" aria-hidden="false">

						{{if $hasModOptions && $name == 'topic_mainTab'}}
							<div class='ipsColumns ipsColumns_collapsePhone'>
								<div class='ipsColumn ipsColumn_fluid'>
						{{endif}}
							<ul class='ipsForm ipsForm_vertical'>
								{{foreach $contents as $inputName => $input}}
									{{if !\in_array( $inputName, $modOptions )}}
										{$input|raw}
									{{endif}}
								{{endforeach}}
							</ul>
						{{if $hasModOptions && $name == 'topic_mainTab'}}
								</div>
								<div class='ipsColumn ipsColumn_wide'>
									{template="createTopicModOptions" group="submit" app="forums" params="$elements, $modOptions"}
								</div>
							</div>
						{{endif}}
					</div>
				{{endforeach}}
			</div>		
		{{else}}
			<div class='ipsPad'>
				{{if $hasModOptions}}
					<div class='ipsColumns ipsColumns_collapsePhone'>
						<div class='ipsColumn ipsColumn_fluid'>
				{{endif}}
					<ul class='ipsForm ipsForm_vertical'>
						{{foreach $elements as $collection}}
							{{foreach $collection as $inputName => $input}}
								{{if !\in_array( $inputName, $modOptions )}}
									{$input|raw}
								{{endif}}
							{{endforeach}}
						{{endforeach}}
					</ul>
				{{if $hasModOptions}}
						</div>
						<div class='ipsColumn ipsColumn_wide'>
							{template="createTopicModOptions" group="submit" app="forums" params="$elements, $modOptions"}
						</div>
					</div>
				{{endif}}
			</div>
		{{endif}}

		<div class='ipsAreaBackground ipsPad ipsType_center'>
			<a href="{{if !\is_null($topic)}}{$topic->url()}{{else}}{$forum->url()}{{endif}}" class="ipsButton ipsButton_link ipsButton ipsButton_medium">{lang="cancel"}</a>
			{{if $topic}}
			<button type='submit' class='ipsButton ipsButton_medium ipsButton_primary' tabindex="1" accesskey="s" role="button">{{if $forum->forums_bitoptions['bw_enable_answers']}}{lang="submit_question_edit"}{{else}}{lang="submit_topic_edit"}{{endif}}</button>
			{{else}}
			<button type='submit' class='ipsButton ipsButton_medium ipsButton_primary' tabindex="1" accesskey="s" role="button">{{if $forum->forums_bitoptions['bw_enable_answers']}}{lang="submit_question"}{{else}}{lang="submit_topic"}{{endif}}</button>
			{{endif}}
		</div>
	</div>	
</form>]]></template>
 <template template_group="submit" template_name="createTopicModOptions" template_data="$elements, $modOptions" template_location="front" template_app="forums"><![CDATA[
<div class='ipsPad ipsAreaBackground_light'>
	<h3 class='ipsType_sectionHead'>{lang="topic_moderator_options"}</h3>
	<ul class='ipsForm ipsForm_vertical ipsSpacer_top'>
		{{foreach $elements as $collection}}
			{{foreach $collection as $inputName => $input}}
				{{if \in_array( $inputName, $modOptions )}}
					{{if $inputName == 'topic_open_time' or $inputName == 'topic_close_time'}}
						<li class='ipsFieldRow ipsClearfix'>
							<label class="ipsFieldRow_label" for="elInput_{$input->name}">{lang="$input->name"}</label>
							<ul class='ipsFieldRow_content ipsList_reset cCreateTopic_date'>
								<li>
									<i class='fa fa-calendar'></i>
									<input type="date" name="{$input->name}" id="elInput_{$input->name}" class="ipsField_short" data-control="date" placeholder='{expression="str_replace( array( 'YYYY', 'MM', 'DD' ), array( \IPS\Member::loggedIn()->language()->addToStack('_date_format_yyyy'), \IPS\Member::loggedIn()->language()->addToStack('_date_format_mm'), \IPS\Member::loggedIn()->language()->addToStack('_date_format_dd') ), str_replace( 'Y', 'YY', \IPS\Member::loggedIn()->language()->preferredDateFormat() ) )"}' value="{{if $input->value instanceof \IPS\DateTime}}{$input->value->format('Y-m-d')}{{else}}{$input->value}{{endif}}" data-preferredFormat="{{if $input->value instanceof \IPS\DateTime}}{$input->value->localeDate()}{{else}}{$input->value}{{endif}}">
								</li>
								<li>
									<i class='fa fa-clock-o'></i>
									<input name="{$input->name}_time" type="time" size="12" class="ipsField_short" placeholder="{lang="_time_format_hhmm"}" step="60" min="00:00" value="{{if $input->value instanceof \IPS\DateTime}}{$input->value->format('H:i')}{{endif}}">
								</li>
							</ul>
						</li>
					{{else}}
						{$input|raw}
					{{endif}}
				{{endif}}
			{{endforeach}}
		{{endforeach}}
	</ul>
</div>]]></template>
 <template template_group="topics" template_name="post" template_data="$item, $comment, $editorName, $app, $type, $class=''" template_location="front" template_app="forums"><![CDATA[{{$idField = $comment::$databaseColumnId;}}
<div id='comment-{$comment->$idField}_wrap' data-controller='core.front.core.comment' data-commentApp='{$app}' data-commentType='{$type}' data-commentID="{$comment->$idField}" data-quoteData='{expression="json_encode( array('userid' => $comment->author()->member_id, 'username' => $comment->author()->name, 'timestamp' => $comment->mapped('date'), 'contentapp' => $comment::$application, 'contenttype' => $type, 'contentid' => $item->tid, 'contentclass' => $class, 'contentcommentid' => $comment->$idField) )"}' class='ipsComment_content ipsType_medium {{if $comment->hidden()}}ipsModerated{{endif}} ipsFaded_withHover'>
	{{if ( settings.reputation_enabled and settings.reputation_highlight and $comment->reactionCount() >= settings.reputation_highlight ) OR $comment->isFeatured()}}
		{{if $comment->isFeatured()}}
			<strong class='ipsComment_popularFlag' data-ipsTooltip title='{lang="this_is_a_featured_post"}'><i class='fa fa-star'></i></strong>
		{{else}}
			<strong class='ipsComment_popularFlag' data-ipsTooltip title='{lang="this_is_a_popular_post"}'><i class='fa fa-heart'></i></strong>
		{{endif}}
	{{endif}}

	<div class='ipsComment_meta ipsType_light'>
		<div class='ipsPos_right ipsType_light ipsType_reset ipsFaded ipsFaded_more ipsType_blendLinks'>
			<ul class='ipsList_inline ipsComment_tools'>
				{{if $comment->canReportOrRevoke() === TRUE}}
					<li><a href='{$comment->url('report')}' data-ipsDialog data-ipsDialog-remoteSubmit data-ipsDialog-size='medium' data-ipsDialog-flashMessage='{lang="report_submit_success"}' data-ipsDialog-title="{lang="report_post"}" data-action='reportComment' title='{lang="report_content"}' class='ipsFaded ipsFaded_more'><span class='ipsResponsive_showPhone ipsResponsive_inline'><i class='fa fa-flag'></i></span><span class='ipsResponsive_hidePhone ipsResponsive_inline'>{lang="report_post"}</span></a></li>
				{{endif}}
				{{if $comment->ip_address and \IPS\Member::loggedIn()->modPermission('can_use_ip_tools') and \IPS\Member::loggedIn()->canAccessModule( \IPS\Application\Module::get( 'core', 'modcp' ) )}}
					<li><span class='ipsResponsive_hidePhone ipsType_blendLinks'>(<a href="{url="app=core&module=modcp&controller=modcp&tab=ip_tools&ip=$comment->ip_address" seoTemplate="modcp_ip_tools"}">{lang="ip_prefix" sprintf="$comment->ip_address"}</a>) </span></li>
				{{endif}}
				{{if $comment->mapped('first') }}
					<li><a class='ipsType_blendLinks' href='{$comment->item()->url()}' data-ipsTooltip title='{lang="share_this_post"}' data-ipsMenu data-ipsMenu-closeOnClick='false' id='elSharePost_{$comment->$idField}' data-role='shareComment'><i class='fa fa-share-alt'></i></a></li>
				{{else}}
					<li><a class='ipsType_blendLinks' href='{$comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->$idField ) )}' data-ipsTooltip title='{lang="share_this_post"}' data-ipsMenu data-ipsMenu-closeOnClick='false' id='elSharePost_{$comment->$idField}' data-role='shareComment'><i class='fa fa-share-alt'></i></a></li>
				{{endif}}
				{{if \count( $item->commentMultimodActions() ) and !$comment->mapped('first')}}
					<li class='cPost_moderator'><span class='ipsCustomInput'>
						<input type="checkbox" name="multimod[{$comment->$idField}]" value="1" data-role="moderation" data-actions="{{if $comment->canSplit()}}split merge{{endif}} {{if $comment->hidden() === -1 AND $comment->canUnhide()}}unhide{{elseif $comment->hidden() === 1 AND $comment->canUnhide()}}approve{{elseif $comment->canHide()}}hide{{endif}} {{if $comment->canDelete()}}delete{{endif}}" data-state='{{if $comment->tableStates()}}{$comment->tableStates()}{{endif}}'>
						<span></span>
					</span></li>
				{{endif}}
			</ul>
		</div>

		<div class='ipsType_reset'>
			<a href='{$comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->$idField ) )}' class='ipsType_blendLinks'>{$comment->dateLine()|raw}</a>
			<span class='ipsResponsive_hidePhone'>
				{{if $comment->editLine()}}
					({lang="edited_lc"})
				{{endif}}
				{{if $comment->hidden() AND $comment->hidden() != -2}}
					&middot; {$comment->hiddenBlurb()}
				{{elseif $comment->hidden() == -2}}
					&middot; {$comment->deletedBlurb()}
				{{endif}}
			</span>
		</div>
	</div>

	{{if member.modPermission('mod_see_warn') and $comment->warning}}
		{template="commentWarned" group="global" app="core" params="$comment"}
	{{endif}}


	<div class='cPost_contentWrap ipsPad'>
		{{if $comment->hidden() !== 0}}
			<div class='ipsResponsive_showPhone ipsResponsive_block ipsSpacer_bottom'>
				{{if $comment->hidden() AND $comment->hidden() != -2}}
					{$comment->hiddenBlurb()}
				{{elseif $comment->hidden() == -2}}
					{$comment->deletedBlurb()}
				{{endif}}
			</div>
		{{endif}}
		<div data-role='commentContent' class='ipsType_normal ipsType_richText ipsContained' data-controller='core.front.core.lightboxedImages'>
			{$comment->content()|raw}

			{{if $comment->editLine()}}
				{$comment->editLine()|raw}
			{{endif}}
		</div>

		<div class='ipsItemControls'>
			{{if !( $comment->hidden() === 1 && ( $comment->canUnhide() || $comment->canDelete() ) )}}
				{{if \IPS\IPS::classUsesTrait( $comment, 'IPS\Content\Reactable' ) and settings.reputation_enabled}}
					{template="reputation" group="global" app="core" params="$comment"}
				{{endif}}
			{{endif}}
			<ul class='ipsComment_controls ipsClearfix ipsItemControls_left' data-role="commentControls">
				{{if $comment->hidden() === 1 && ( $comment->canUnhide() || $comment->canDelete() )}}
					{{if $comment->canUnhide()}}
						<li><a href='{$comment->url('unhide')->csrf()}' class='ipsButton ipsButton_verySmall ipsButton_positive' data-action='approveComment'><i class='fa fa-check'></i> {lang="approve"}</a></li>
					{{endif}}
					{{if $comment->canDelete()}}
						<li><a href='{$comment->url('delete')->csrf()->setPage('page',\IPS\Request::i()->page)}' data-action='deleteComment' data-updateOnDelete="#commentCount" class='ipsButton ipsButton_verySmall ipsButton_negative'><i class='fa fa-times'></i> {lang="delete"}</a></li>
					{{endif}}
					{{if $comment->canEdit() || $comment->canSplit() || $comment->canHide()}}
						<li>
							<a href='#elControls_{$comment->$idField}_menu' id='elControls_{$comment->$idField}' data-ipsMenu data-ipsMenu-appendTo='#comment-{$comment->$idField}_wrap'>{lang="options"} &nbsp;<i class='fa fa-caret-down'></i></a>
							<ul id='elControls_{$comment->$idField}_menu' class='ipsMenu ipsMenu_narrow ipsHide'>
								{{if $comment->canEdit()}}
									{{if $comment->mapped('first') and $comment->item()->canEdit()}}
										<li class='ipsMenu_item'><a href='{$comment->item()->url()->setQueryString( 'do', 'edit' )}'>{lang="edit"}</a></li>
									{{else}}
										<li class='ipsMenu_item'><a href='{$comment->url('edit')}' data-action='editComment'>{lang="edit"}</a></li>
									{{endif}}
								{{endif}}
								{{if $comment->canSplit()}}
									<li class='ipsMenu_item'><a href='{$comment->url('split')}' data-action='splitComment' data-ipsDialog data-ipsDialog-title="{lang="split_to_new" sprintf="\IPS\Member::loggedIn()->language()->addToStack( $item::$title )"}">{lang="split"}</a></li>
								{{endif}}
								{{if $comment instanceof \IPS\Content\Hideable and $comment->canHide()}}
									<li class='ipsMenu_item'><a href='{$comment->url('hide')->csrf()}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
								{{endif}}
							</ul>
						</li>
					{{endif}}
				{{else}}
					{{if $comment->hidden() === 0 and $item->canComment() and $editorName}}
						<li data-ipsQuote-editor='{$editorName}' data-ipsQuote-target='#comment-{$comment->$idField}' class='ipsJS_show'>
							<button class='ipsButton ipsButton_light ipsButton_verySmall ipsButton_narrow cMultiQuote ipsHide' data-action='multiQuoteComment' data-ipsTooltip data-ipsQuote-multiQuote data-mqId='mq{$comment->$idField}' title='{lang="multiquote"}'><i class='fa fa-plus'></i></button>
						</li>
						<li data-ipsQuote-editor='{$editorName}' data-ipsQuote-target='#comment-{$comment->$idField}' class='ipsJS_show'>
							<a href='#' data-action='quoteComment' data-ipsQuote-singleQuote>{lang="quote"}</a>
						</li>
					{{endif}}
					{{if $comment->canEdit()}}
						{{if $comment->mapped('first') and $comment->item()->canEdit()}}
							<li><a href='{$comment->item()->url()->setQueryString( 'do', 'edit' )}'>{lang="edit"}</a></li>
						{{else}}
							<li><a href='{$comment->url('edit')}' data-action='editComment'>{lang="edit"}</a></li>
						{{endif}}
					{{endif}}
					{{if !$comment->mapped('first') and ( $comment->canPromoteToSocialMedia() || $comment->canDelete() || $comment->canHide() || $comment->canUnhide() || $comment->canSplit() || $item->canFeatureComment() || $item->canUnfeatureComment() || ( $comment->hidden() == -2 AND \IPS\Member::loggedIn()->modPermission('can_manage_deleted_content') ) )}}
						<li>
							<a href='#elControls_{$comment->$idField}_menu' id='elControls_{$comment->$idField}' data-ipsMenu data-ipsMenu-appendTo='#comment-{$comment->$idField}_wrap'>{lang="options"} &nbsp;<i class='fa fa-caret-down'></i></a>
							<ul id='elControls_{$comment->$idField}_menu' class='ipsMenu ipsMenu_narrow ipsHide'>
								{{if $comment->hidden() == -2 AND \IPS\Member::loggedIn()->modPermission('can_manage_deleted_content')}}
									<li class='ipsMenu_item'><a href='{$comment->url('restore')->csrf()}' data-confirm data-confirmSubMessage='{lang="restore_as_visible_desc"}'>{lang="restore_as_visible"}</a></li>
									<li class='ipsMenu_item'><a href='{$comment->url('restore')->csrf()->setQueryString( 'restoreAsHidden', 1 )}' data-confirm data-confirmSubMessage='{lang="restore_as_hidden_desc"}'>{lang="restore_as_hidden"}</a></li>
									<li class='ipsMenu_item'><a href='{$comment->url('delete')->csrf()->setQueryString( 'immediately', 1 )}' data-confirm data-confirmSubMessage='{lang="delete_immediately_desc"}'>{lang="delete_immediately"}</a></li>
								{{else}}
									{{if $comment instanceof \IPS\Content\Hideable}}
										{{if !$comment->hidden() and $comment->canHide()}}
											<li class='ipsMenu_item'><a href='{$comment->url('hide')->csrf()}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
										{{elseif $comment->hidden() and $comment->canUnhide()}}
											<li class='ipsMenu_item'><a href='{$comment->url('unhide')->csrf()}'>{lang="unhide"}</a></li>
										{{endif}}
									{{endif}}
									{{if $comment->canSplit()}}
										<li class='ipsMenu_item'><a href='{$comment->url('split')}' data-action='splitComment' data-ipsDialog data-ipsDialog-title="{lang="split_to_new" sprintf="\IPS\Member::loggedIn()->language()->addToStack( $item::$title )"}">{lang="split"}</a></li>
									{{endif}}
									{{if $comment->canDelete()}}
										<li class='ipsMenu_item'><a href='{$comment->url('delete')->csrf()->setPage('page',\IPS\Request::i()->page)}' data-action='deleteComment' data-updateOnDelete="#commentCount">{lang="delete"}</a></li>
									{{endif}}
									{{if $comment->isFeatured() AND $item->canUnfeatureComment()}}
										<li class='ipsMenu_item'><a href='{$comment->url('unfeature')->csrf()->setPage('page',\IPS\Request::i()->page)}' data-action="unrecommendComment">{lang="unrecommend_content"}</a></li>
									{{endif}}
									{{if !$comment->isFeatured() AND $item->canFeatureComment()}}
										<li class='ipsMenu_item'><a href='{$comment->url('feature')->csrf()->setPage('page',\IPS\Request::i()->page)}' data-ipsDialog data-ipsDialog-title='{lang="recommend_post"}' data-ipsDialog-remoteSubmit data-ipsDialog-size='medium' data-action="recommendComment">{lang="recommend_content"}</a></li>
									{{endif}}
									{{if ( ! $comment->mapped('first') and $comment->canPromoteToSocialMedia() )}}
										<li class='ipsMenu_item'>{template="promoteLink" app="core" group="global" params="$comment"}</li>
									{{endif}}
								{{endif}}
							</ul>
						</li>
					{{endif}}
				{{endif}}
				<li class='ipsHide' data-role='commentLoading'>
					<span class='ipsLoading ipsLoading_tiny ipsLoading_noAnim'></span>
				</li>
			</ul>
		</div>

		{{if trim( $comment->author()->signature )}}
			{template="signature" group="global" app="core" params="$comment->author()"}
		{{endif}}
	</div>

	<div class='ipsMenu ipsMenu_wide ipsHide cPostShareMenu' id='elSharePost_{$comment->$idField}_menu'>
		<div class='ipsPad'>
			<h4 class='ipsType_sectionHead'>{lang="share_this_post"}</h4>
			<hr class='ipsHr'>
			<h5 class='ipsType_normal ipsType_reset'>{lang="link_to_post"}</h5>
			{{if $comment->mapped('first') }}
			<input type='text' value='{$comment->item()->url()}' class='ipsField_fullWidth'>
			{{else}}
			<input type='text' value='{$comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->$idField ) )}' class='ipsField_fullWidth'>
			{{endif}}

			{{if !$comment->item()->container()->disable_sharelinks and \count( $comment->sharelinks() )}}
				<h5 class='ipsType_normal ipsType_reset ipsSpacer_top'>{lang="share_externally"}</h5>
				{template="sharelinks" group="global" app="core" params="$comment"}
			{{endif}}
		</div>
	</div>
</div>]]></template>
 <template template_group="topics" template_name="postContainer" template_data="$item, $comment, $votes=array(), $otherClasses=''" template_location="front" template_app="forums"><![CDATA[{{$idField = $comment::$databaseColumnId;}}
{{$itemClassSafe = str_replace( '\\', '_', mb_substr( $comment::$itemClass, 4 ) );}}
{{if $comment->isIgnored()}}
	<div class='ipsComment ipsComment_ignored ipsType_light' id='elIgnoreComment_{$comment->$idField}' data-ignoreCommentID='elComment_{$comment->$idField}' data-ignoreUserID='{$comment->author()->member_id}'>
		{lang="ignoring_content" sprintf="$comment->author()->name"} <a href='#elIgnoreComment_{$comment->$idField}_menu' data-ipsMenu data-ipsMenu-menuID='elIgnoreComment_{$comment->$idField}_menu' data-ipsMenu-appendTo='#elIgnoreComment_{$comment->$idField}' data-action="ignoreOptions" title='{lang="see_post_ignore_options"}' class='ipsType_blendLinks'>{lang="options"} <i class='fa fa-caret-down'></i></a>
		<ul class='ipsMenu ipsHide' id='elIgnoreComment_{$comment->$idField}_menu'>
			<li class='ipsMenu_item ipsJS_show' data-ipsMenuValue='showPost'><a href='#'>{lang="show_this_post"}</a></li>
			<li class='ipsMenu_sep ipsJS_show'><hr></li>
			<li class='ipsMenu_item' data-ipsMenuValue='stopIgnoring'><a href='{url="app=core&module=system&controller=ignore&do=remove&id={$comment->author()->member_id}" seoTemplate="ignore"}'>{lang="stop_ignoring_posts_by" sprintf="$comment->author()->name"}</a></li>
			<li class='ipsMenu_item'><a href='{url="app=core&module=system&controller=ignore" seoTemplate="ignore"}'>{lang="change_ignore_preferences"}</a></li>
		</ul>
	</div>
{{endif}}

<a id='comment-{$comment->$idField}'></a>
<article {{if $comment->author()->hasHighlightedReplies()}}data-memberGroup="{$comment->author()->member_group_id}" {{endif}} id='elComment_{$comment->$idField}' class='cPost ipsBox {{if $otherClasses}}{$otherClasses}{{endif}} ipsComment {{if ( settings.reputation_enabled and settings.reputation_highlight and $comment->reactionCount() >= settings.reputation_highlight ) OR $comment->isFeatured()}}ipsComment_popular{{endif}} ipsComment_parent ipsClearfix ipsClear ipsColumns ipsColumns_noSpacing ipsColumns_collapsePhone {{if $comment->author()->hasHighlightedReplies()}}ipsComment_highlighted{{endif}} {{if $comment->isIgnored()}}ipsHide{{endif}} {{if $comment->hidden() OR $item->hidden() === -2}}ipsModerated{{endif}}'>
	{{if $item->isQuestion() and !$comment->new_topic}}
		{template="postRating" group="topics" app="forums" params="$item, $comment, $votes"}
	{{endif}}

	<div class='cAuthorPane cAuthorPane_mobile ipsResponsive_showPhone ipsResponsive_block'>
		<h3 class='ipsType_sectionHead cAuthorPane_author ipsResponsive_showPhone ipsResponsive_inlineBlock ipsType_break ipsType_blendLinks ipsTruncate ipsTruncate_line'>
			{template="userLink" group="global" app="core" params="$comment->author(), $comment->warningRef(), TRUE"}
			<span class='ipsResponsive_showPhone ipsResponsive_inline'>&nbsp;&nbsp;{template="reputationBadge" group="global" app="core" params="$comment->author()"}</span>
		</h3>
		<div class='cAuthorPane_photo'>
			{template="userPhoto" app="core" group="global" params="$comment->author(), 'large', $comment->warningRef()"}
		</div>
	</div>
	<aside class='ipsComment_author cAuthorPane ipsColumn ipsColumn_medium ipsResponsive_hidePhone'>
		<h3 class='ipsType_sectionHead cAuthorPane_author ipsType_blendLinks ipsType_break'><strong>{template="userLink" group="global" app="core" params="$comment->author(), $comment->warningRef(), FALSE"}
			</strong> <span class='ipsResponsive_showPhone ipsResponsive_inline'>&nbsp;&nbsp;{template="reputationBadge" group="global" app="core" params="$comment->author()"}</span></h3>

		<ul class='cAuthorPane_info ipsList_reset'>
			{{if $comment->author()->member_title && $comment->author()->member_id}}
				<li class='ipsType_break'>{$comment->author()->member_title}</li>
			{{elseif $comment->author()->rank['title'] && $comment->author()->member_id}}
				<li class='ipsType_break'>{$comment->author()->rank['title']}</li>
			{{endif}}
			{{if $comment->author()->rank['image'] && $comment->author()->member_id}}
				<li>{$comment->author()->rank['image']|raw}</li>
			{{endif}}

			<li class='cAuthorPane_photo'>
				{template="userPhoto" app="core" group="global" params="$comment->author(), 'large', $comment->warningRef()"}
			</li>
			<li>{expression="\IPS\Member\Group::load( $comment->author()->member_group_id )->formattedName" raw="true"}</li>
			{{if \IPS\Member\Group::load( $comment->author()->member_group_id )->g_icon }}
				<li><img src='{file="$comment->author()->group['g_icon']" extension="core_Theme"}' alt='' class='cAuthorGroupIcon'></li>
			{{endif}}
			{{if $comment->author()->member_id}}
				<li>{template="reputationBadge" group="global" app="core" params="$comment->author()"}</li>
				<li class='ipsType_light'>{lang="member_post_count" pluralize="$comment->author()->member_posts"}</li>
				{{if $comment->author()->reputationImage()}}
					<li class='ipsPad_half'>
						<img src='{file="$comment->author()->reputationImage()" extension="core_Theme"}' title='{{if $comment->author()->reputation()}}{$comment->author()->reputation()}{{endif}}' alt=''>
					</li>
				{{endif}}
				{template="customFieldsDisplay" group="global" app="core" params="$comment->author()"}
			{{endif}}
		</ul>
	</aside>
	<div class='ipsColumn ipsColumn_fluid'>
		{template="post" group="topics" app="forums" params="$item, $comment, $item::$formLangPrefix . 'comment', $item::$application, $item::$module, $itemClassSafe"}
	</div>
</article>]]></template>
 <template template_group="topics" template_name="postRating" template_data="$item, $comment, $votes=array()" template_location="front" template_app="forums"><![CDATA[{{$idField = $comment::$databaseColumnId;}}
<div class='cRatingColumn ipsClearfix {{if $comment->post_bwoptions['best_answer']}}cRatingColumn_on{{else}}ipsAreaBackground_light{{endif}} {{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === 1}}cRatingColumn_up{{elseif isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === -1}}cRatingColumn_down{{endif}} ipsColumn ipsColumn_narrow ipsType_center' data-controller='forums.front.topic.answers'>
	
	<ul class='ipsList_reset cPostRating_controls'>
	{{if !$item->isArchived() }}
		{{if $comment->post_bwoptions['best_answer'] or $item->canSetBestAnswer()}}
			<li class='cPostRating_bestAnswer'>
				{{if $item->canSetBestAnswer() and !$comment->post_bwoptions['best_answer']}}
					<a href='{$item->url()->csrf()->setQueryString( array( 'do' => 'bestAnswer', 'answer' => $comment->pid ) )}' title='{lang="set_as_best_answer"}' class='cBestAnswerIndicator cBestAnswerIndicator_off' data-ipsTooltip><i class='fa fa-check'></i></a>
				{{else}}
					{{if $item->canSetBestAnswer()}}
						<a href='{$item->url()->csrf()->setQueryString( array( 'do' => 'unsetBestAnswer' ) )}' title='{lang="unset_as_best_answer"}' class='cBestAnswerIndicator' data-ipsTooltip><i class='fa fa-check'></i></a>
					{{else}}
						<strong class='cBestAnswerIndicator' data-ipsTooltip title='{lang="best_answer_tooltip"}'><i class='fa fa-check'></i></strong>
					{{endif}}
				{{endif}}
			</li>
		{{endif}}
	
		{{if $comment->canVote()}}
			<li class='cPostRating_up'>
				<a href='{$item->url()->setQueryString( array( 'do' => 'rateAnswer', 'answer' => $comment->pid, 'rating' => 1 ) )->csrf()}' class='cAnswerRate cAnswerRate_up {{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === 1}}ipsType_positive{{endif}}' title='{{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === 1}}{lang="remove_your_vote"}{{else}}{lang="vote_answer_up"}{{endif}}' data-ipsTooltip><i class='fa fa-caret-up'></i></a>
			</li>
		{{else}}
			<li class='cPostRating_up'>
				<span class='cAnswerRate cAnswerRate_up cAnswerRate_noPermission' {{if !\IPS\Member::loggedIn()->member_id}}data-ipsTooltip title='{lang="sign_in_rate_answer"}'{{endif}}><i class='fa fa-caret-up'></i></span>
			</li>
		{{endif}}

			<li class='cPostRating_count'>
				<span title="{lang="votes_no_number" pluralize="$comment->post_field_int"}" data-role="voteCount" data-voteCount="{$comment->post_field_int}" class='cAnswerRating {{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === 1}}ipsType_positive{{elseif isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === -1}}ipsType_negative{{endif}}'>{$comment->post_field_int}</span>
			</li>

		{{if $comment->canVote() && \IPS\Settings::i()->forums_answers_downvote}}
			<li  class='cPostRating_down'>
				<a href='{$item->url()->setQueryString( array( 'do' => 'rateAnswer', 'answer' => $comment->pid, 'rating' => -1 ) )->csrf()}' class='cAnswerRate cAnswerRate_down {{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === -1}}ipsType_negative{{endif}}' title='{{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === -1}}{lang="remove_your_vote"}{{else}}{lang="vote_answer_down"}{{endif}}' data-ipsTooltip><i class='fa fa-caret-down'></i></a>
			</li>
		{{elseif \IPS\Settings::i()->forums_answers_downvote}}
			<li  class='cPostRating_down'>
				<span class='cAnswerRate cAnswerRate_down cAnswerRate_noPermission' {{if !\IPS\Member::loggedIn()->member_id}}data-ipsTooltip title='{lang="sign_in_rate_answer"}'{{endif}}><i class='fa fa-caret-down'></i></span>
			</li>
		{{endif}}
	{{else}}
		{{if isset($comment->post_field_int) }}
			<li class='cPostRating_count'>
				<span title="{lang="votes_no_number" pluralize="$comment->post_field_int"}" data-role="voteCount" data-voteCount="{$comment->post_field_int}" class='cAnswerRating {{if isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === 1}}ipsType_positive{{elseif isset( $votes[ $comment->$idField ] ) && $votes[ $comment->$idField ] === -1}}ipsType_negative{{endif}}'>{$comment->post_field_int}</span>
			</li>
		{{endif}}
	{{endif}}
	</ul>

</div>]]></template>
 <template template_group="topics" template_name="topic" template_data="$topic, $comments, $question=NULL, $votes=array(), $nextUnread=NULL, $pagination, $topicVotes=array()" template_location="front" template_app="forums"><![CDATA[
{{if $club = $topic->container()->club()}}
	{{if settings.clubs and settings.clubs_header == 'full'}}
		{template="header" app="core" group="clubs" params="$club, $topic->container()"}
	{{endif}}
	<div id='elClubContainer'>
{{endif}}

{{if $topic->isArchived()}}
	<div class='ipsMessage ipsMessage_info ipsSpacer_bottom'>
		<h4 class='ipsMessage_title'>{lang="topic_is_archived"}</h4>
		<p class='ipsType_reset'>
			{lang="topic_archived_desc"}
		</p>
	</div>
{{endif}}

{{if $topic->isQuestion()}}
	<div class='ipsColumns'>
		<div class='cRatingColumn cRatingColumn_question ipsColumn ipsColumn_narrow ipsType_center'>
			<ul class='ipsList_reset'>
				{{if $topic->canVote()}}
					<li>
						<a href='{$topic->url()->setQueryString( array( 'do' => 'rateQuestion', 'rating' => 1 ) )->csrf()}' class='cAnswerRate cAnswerRate_up {{if isset( $topicVotes[ \IPS\Member::loggedIn()->member_id ] ) && $topicVotes[ \IPS\Member::loggedIn()->member_id ] === 1}}ipsType_positive{{endif}}' title='{{if isset( $topicVotes[ \IPS\Member::loggedIn()->member_id ] ) && $topicVotes[ \IPS\Member::loggedIn()->member_id ] === 1}}{lang="remove_your_vote"}{{else}}{lang="vote_question_up"}{{endif}}' data-ipsTooltip><i class='fa fa-caret-up'></i></a>
					</li>
				{{else}}
					<li>
						<span class='cAnswerRate cAnswerRate_up cAnswerRate_noPermission' {{if !\IPS\Member::loggedIn()->member_id}}data-ipsTooltip title='{lang="sign_in_rate_question"}'{{endif}}><i class='fa fa-caret-up'></i></span>
					</li>
				{{endif}}

					<li><span data-role="voteCount" data-voteCount="{expression="\intval( $topic->question_rating )"}" class='cAnswerRating {{if isset( $topicVotes[ \IPS\Member::loggedIn()->member_id ] ) && $topicVotes[ \IPS\Member::loggedIn()->member_id ] === 1}}ipsType_positive{{elseif isset( $topicVotes[ \IPS\Member::loggedIn()->member_id ] ) && $topicVotes[ \IPS\Member::loggedIn()->member_id ] === -1}}ipsType_negative{{endif}}'>{expression="\intval( $topic->question_rating )"}</span></li>

				{{if $topic->canVote() && \IPS\Settings::i()->forums_questions_downvote}}
					<li>
						<a href='{$topic->url()->setQueryString( array( 'do' => 'rateQuestion', 'rating' => -1 ) )->csrf()}' class='cAnswerRate cAnswerRate_down {{if isset( $topicVotes[ \IPS\Member::loggedIn()->member_id ] ) && $topicVotes[ \IPS\Member::loggedIn()->member_id ] === -1}}ipsType_negative{{endif}}' title='{{if isset( $topicVotes[ \IPS\Member::loggedIn()->member_id ] ) && $topicVotes[ \IPS\Member::loggedIn()->member_id ] === -1}}{lang="remove_your_vote"}{{else}}{lang="vote_question_down"}{{endif}}' data-ipsTooltip><i class='fa fa-caret-down'></i></a>
					</li>
				{{elseif \IPS\Settings::i()->forums_questions_downvote}}
					<li>
						<span class='cAnswerRate cAnswerRate_down cAnswerRate_noPermission' {{if !\IPS\Member::loggedIn()->member_id}}data-ipsTooltip title='{lang="sign_in_rate_question"}'{{endif}}><i class='fa fa-caret-down'></i></span>
					</li>
				{{endif}}
			</ul>
		</div>
		<div class='ipsColumn ipsColumn_fluid'>
{{endif}}
<div class="ipsPageHeader ipsClearfix">
	{{if !$topic->isArchived() and !$topic->container()->password}}
		<div class='ipsPos_right ipsResponsive_noFloat ipsResponsive_hidePhone'>
			{template="follow" app="core" group="global" params="'forums', 'topic', $topic->tid, $topic->followersCount()"}
		</div>
		<div class='ipsPos_right ipsResponsive_noFloat ipsResponsive_hidePhone'>
			{template="promote" app="core" group="global" params="$topic"}
		</div>
		
	{{endif}}
	<div class='ipsPhotoPanel ipsPhotoPanel_small ipsPhotoPanel_notPhone ipsClearfix'>
		{template="userPhoto" group="global" app="core" params="$topic->author(), 'small', $topic->warningRef()"}
		<div>
			<h1 class='ipsType_pageTitle ipsContained_container'>
				{{if $topic->mapped('pinned') || $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1 || $topic->hidden() === -2}}
					{{if $topic->hidden() === -1}}
						<span><span class="ipsBadge ipsBadge_icon ipsBadge_warning" data-ipsTooltip title='{$topic->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span></span>
					{{elseif $topic->hidden() === -2}}
						<span><span class="ipsBadge ipsBadge_icon ipsBadge_warning" data-ipsTooltip title='{$topic->deletedBlurb()}'><i class='fa fa-trash'></i></span></span>
					{{elseif $topic->hidden() === 1}}
						<span><span class="ipsBadge ipsBadge_icon ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span></span>
					{{endif}}
					{{if $topic->mapped('pinned')}}
						<span><span class="ipsBadge ipsBadge_icon ipsBadge_positive" data-ipsTooltip title='{lang="pinned"}'><i class='fa fa-thumb-tack'></i></span></span>
					{{endif}}
					{{if $topic->mapped('featured')}}
						<span><span class="ipsBadge ipsBadge_icon ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span></span>
					{{endif}}
				{{endif}}

				{{if $topic->prefix() OR ( $topic->canEdit() AND $topic::canTag( NULL, $topic->container() ) AND $topic::canPrefix( NULL, $topic->container() ) )}}
					<span {{if !$topic->prefix()}}class='ipsHide'{{endif}} {{if ( $topic->canEdit() AND $topic::canTag( NULL, $topic->container() ) AND $topic::canPrefix( NULL, $topic->container() ) )}}data-editablePrefix{{endif}}>
						{template="prefix" group="global" app="core" params="$topic->prefix( TRUE ), $topic->prefix()"}
					</span>
				{{endif}}
				{{if $topic->canEdit()}}
					<span class='ipsType_break ipsContained' data-controller="core.front.core.moderation">
						<span data-role="editableTitle" title='{lang="click_hold_edit"}'>{$topic->title}</span>
					</span>
				{{else}}
					<span class='ipsType_break ipsContained'>
						<span>{$topic->title}</span>
					</span>
				{{endif}}
			</h1>
			{{if $topic->locked() && $topic->topic_open_time && $topic->topic_open_time > time()}}
				<p class='ipsType_reset ipsType_medium'><strong><i class='fa fa-clock-o'></i> {lang="topic_unlocks_at" htmlsprintf="\IPS\DateTime::ts( $topic->topic_open_time )->html(), \IPS\DateTime::ts( $topic->topic_open_time )->localeTime( FALSE )"}</strong></p>
			{{elseif !$topic->locked() && $topic->topic_close_time && $topic->topic_close_time > time()}}
				<p class='ipsType_reset ipsType_medium'><strong><i class='fa fa-clock-o'></i> {lang="topic_locks_at" htmlsprintf="\IPS\DateTime::ts( $topic->topic_close_time )->html(), \IPS\DateTime::ts( $topic->topic_close_time )->localeTime( FALSE )"}</strong></p>
			{{endif}}
			<p class='ipsType_reset ipsType_blendLinks {{if \count( $topic->tags() ) OR ( $topic->canEdit() AND $topic::canTag( NULL, $topic->container() ) )}}ipsSpacer_bottom ipsSpacer_half{{endif}}'>
				<span class='ipsType_normal'>
				{{if $topic->isQuestion()}}
					{lang="ask_byline_no_date" htmlsprintf="$topic->author()->link( $topic->warningRef() )"}
				{{else}}
					{lang="byline_itemprop" htmlsprintf="$topic->author()->link()"} <span class='ipsType_light'>{datetime="$topic->start_date"} {lang="in"} <a href="{$topic->container()->url()}">{$topic->container()->_formattedTitle|raw}</a></span>
				{{endif}}
				</span>
				<br>
			</p>
			{{if \count( $topic->tags() ) OR ( $topic->canEdit() AND $topic::canTag( NULL, $topic->container() ) )}}
				{template="tags" group="global" app="core" params="$topic->tags(), FALSE, FALSE, ( $topic->canEdit() AND $topic::canTag( NULL, $topic->container() ) ) ? $topic->url() : NULL"}
			{{endif}}
		</div>
	</div>
</div>

{{if $topic->isQuestion()}}
	</div>
</div>
{{endif}}

{template="contentItemMessages" group="global" app="core" params="$topic->getMessages(), $topic"}

{{if $topic->hidden() === 1 and $topic->canUnhide()}}
	<div class="ipsMessage ipsMessage_warning ipsSpacer_top">
		<p class="ipsType_reset">{lang="topic_pending_approval"}</p>
		<ul class='ipsList_inline ipsSpacer_top'>
			<li><a href="{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unhide' ) )}" class="ipsButton ipsButton_positive ipsButton_verySmall" title='{lang="approve_title_topic"}'><i class="fa fa-check"></i> {lang="approve"}</a></li>
			{{if $topic->canDelete()}}
				<li><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete' ) )}' data-confirm  title='{lang="topic_delete_title"}' class='ipsButton ipsButton_negative ipsButton_verySmall'><i class='fa fa-times'></i> {lang="delete"}</a></li>
			{{endif}}
		</ul>
	</div>
{{endif}}

<div class='ipsClearfix'>
	{{if $topic->container()->forum_allow_rating}}
		<div class='ipsPos_left ipsType_light ipsResponsive_hidePhone'>
			{{if $topic->canRate()}}
				<p class='ipsType_reset ipsType_small'>
					{{if $topic->isQuestion()}}{lang="rate_this_question"}{{else}}{lang="rate_this_topic"}{{endif}}
				</p>
			{{endif}}
			{$topic->rating()|raw}
		</div>
	{{endif}}
	
	<ul class="ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_both {{if !$topic->canComment() and !( $topic->canPin() or $topic->canUnpin() or $topic->canFeature() or $topic->canUnfeature() or $topic->canHide() or $topic->canUnhide() or $topic->canMove() or $topic->canLock() or $topic->canUnlock() or $topic->canDelete() or $topic->availableSavedActions() )}}ipsResponsive_hidePhone{{endif}}">
		{{if $topic->canComment()}}
			<li class='ipsToolList_primaryAction'>
				<span data-controller='forums.front.topic.reply'>
					{{if $topic->container()->forums_bitoptions['bw_enable_answers']}}
						<a href='#replyForm' class='ipsButton {{if $topic->locked()}}ipsButton_negative{{else}}ipsButton_important{{endif}} ipsButton_medium ipsButton_fullWidth' data-action='replyToTopic'>{lang="answer_this_question"}{{if $topic->locked()}} ({lang="locked"}){{endif}}</a>
					{{else}}
						<a href='#replyForm' class='ipsButton {{if $topic->locked()}}ipsButton_negative{{else}}ipsButton_important{{endif}} ipsButton_medium ipsButton_fullWidth' data-action='replyToTopic'>{lang="reply_to_this_topic"}{{if $topic->locked()}} ({lang="locked"}){{endif}}</a>
					{{endif}}
				</span>
			</li>
		{{endif}}
		{{if $topic->container()->can('add')}}
			<li class='ipsResponsive_hidePhone'>
				{{if $topic->container()->forums_bitoptions['bw_enable_answers']}}
					<a href="{$topic->container()->url()->setQueryString( 'do', 'add' )}" class='ipsButton ipsButton_link ipsButton_medium ipsButton_fullWidth' title='{lang="ask_a_question_desc"}'>{lang="ask_a_question"}</a>
				{{else}}
					<a href="{$topic->container()->url()->setQueryString( 'do', 'add' )}" class='ipsButton ipsButton_link ipsButton_medium ipsButton_fullWidth' title='{lang="start_new_topic_desc"}'>{lang="start_new_topic"}</a>
				{{endif}}
			</li>
		{{endif}}
		{{if ( $topic->canPin() or $topic->canUnpin() or $topic->canFeature() or $topic->canUnfeature() or $topic->canHide() or $topic->canUnhide() or $topic->canMove() or $topic->canLock() or $topic->canUnlock() or $topic->canDelete() or $topic->availableSavedActions() or $topic->canMerge() or $topic->canUnarchive() or $topic->canRemoveArchiveExcludeFlag() or \IPS\Member::loggedIn()->modPermission('can_view_moderation_log') ) or ( $topic->hidden() == -2 AND \IPS\Member::loggedIn()->modPermission('can_manage_deleted_content') )}}
			<li>
				<a href='#elTopicActions_menu' id='elTopicActions' class='ipsButton ipsButton_link ipsButton_medium ipsButton_fullWidth' data-ipsMenu>{lang="moderator_actions"} <i class='fa fa-caret-down'></i></a>
				<ul id='elTopicActions_menu' class='ipsMenu ipsMenu_auto ipsHide'>
					{{if \IPS\Member::loggedIn()->modPermission('can_manage_deleted_content') AND $topic->hidden() == -2}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'restore' ) )}' data-confirm data-confirmSubMessage='{lang="restore_as_visible_desc"}'>{lang="restore_as_visible"}</a></li>
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'restoreAsHidden' ) )}' data-confirm data-confirmSubMessage='{lang="restore_as_hidden_desc"}'>{lang="restore_as_hidden"}</a></li>
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete', 'immediate' => 1 ) )}' data-confirm data-confirmSubMessage='{lang="delete_immediately_desc"}'>{lang="delete_immediately"}</a></li>
					{{else}}
						{{if $topic->canFeature()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'feature' ) )}'>{lang="feature"}</a></li>
						{{endif}}
						{{if $topic->canUnfeature()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unfeature' ) )}' >{lang="unfeature"}</a></li>
						{{endif}}
						{{if $topic->canPin()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'pin' ) )}' >{lang="pin"}</a></li>
						{{endif}}
						{{if $topic->canUnpin()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unpin' ) )}' >{lang="unpin"}</a></li>
						{{endif}}
						{{if $topic->canHide()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'hide' ) )}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
						{{endif}}
						{{if $topic->canUnhide()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unhide' ) )}' >{{if $topic->hidden() === 1}}{lang="approve"}{{else}}{lang="unhide"}{{endif}}</a></li>
						{{endif}}
						{{if $topic->canLock()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'lock' ) )}' >{lang="lock"}</a></li>
						{{endif}}
						{{if $topic->canUnlock()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unlock' ) )}' >{lang="unlock"}</a></li>
						{{endif}}
						{{if $topic->canMove()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'move' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="move"}"  >{lang="move"}</a></li>
						{{endif}}
						{{if $topic->canMerge()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'merge' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="merge"}" >{lang="merge"}</a></li>
						{{endif}}
						{{if $topic->canUnarchive()}}
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'unarchive' ) )}' data-confirm data-confirmSubMessage="{$topic->unarchiveBlurb()}" >{lang="unarchive"}</a></li>
						{{endif}}
                        {{if $topic->canRemoveArchiveExcludeFlag()}}
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'removeArchiveExclude' ) )}' >{lang="remove_archive_exlude"}</a></li>
						{{endif}}
						{{if $topic->canDelete()}}				
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete' ) )}' data-confirm  >{lang="delete"}</a></li>
						{{endif}}
						{{if $topic->canOnMessage( 'add' )}}
							<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'messageForm' ) )}' data-ipsDialog data-ipsDialog-title='{lang="add_message"}'>{lang="add_message"}</a></li>
						{{endif}}
						{{if !$topic->isArchived() and $topic->availableSavedActions()}}
							<li class='ipsMenu_sep'><hr></li>
							{{foreach $topic->availableSavedActions() as $action}}
								<li class="ipsMenu_item"><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'savedAction', 'action' => $action->_id ) )}' data-confirm>{$action->_title}</a></li>
							{{endforeach}}
						{{endif}}
						{{if \IPS\Member::loggedIn()->modPermission('can_view_moderation_log')}}	
							<li class='ipsMenu_sep'><hr></li>
							<li class="ipsMenu_item"><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'modLog' ) )}' data-ipsDialog data-ipsDialog-title='{lang="moderation_history"}'>{lang="moderation_history"}</a></li>
						{{endif}}
					{{endif}}
				</ul>
			</li>
		{{endif}}
	</ul>
</div>
{{if $poll = $topic->getPoll()}}
{$poll|raw}
<br>
{{endif}}
<div data-controller='core.front.core.commentFeed,forums.front.topic.view, core.front.core.ignoredComments' {{if settings.auto_polling_enabled}}data-autoPoll{{endif}} data-baseURL='{$topic->url()}' {{if $topic->isLastPage()}}data-lastPage{{endif}} data-feedID='topic-{$topic->tid}' class='cTopic ipsClear ipsSpacer_top'>
	{{if $topic->isQuestion() && $question}}
		<div class='ipsAreaBackground ipsPad'>
			<h2 class='ipsType_sectionHead ipsType_reset ipsSpacer_bottom'>{lang="question_title"}</h2>
			{template="postContainer" group="topics" app="forums" params="$topic, $question, $votes, 'cPostQuestion'"}
		</div>
		
		<div class='ipsSpacer_both'>
			<h2 class='ipsType_sectionTitle ipsType_reset ipsType_medium ipsHide'>{lang="answer_count" pluralize="( $topic->posts ) ? $topic->posts - 1 : 0"}</h2>
			<div class="ipsClearfix ipsClear">
				<ul class="ipsPos_right ipsButtonRow ipsClearfix">
					{{if ( \count( $topic->commentMultimodActions() ) && ( $topic->posts > 1 OR $topic->mapped('unapproved_comments') > 0 OR $topic->mapped('hidden_comments') > 0 ) ) || $pagination}}
					<li>
						<a class="ipsJS_show" href="#elCheck_menu" id="elCheck" title='{lang="select_rows_tooltip"}' data-ipsTooltip data-ipsAutoCheck data-ipsAutoCheck-context="#elPostFeed" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active">
							<span class="cAutoCheckIcon ipsType_medium"><i class="fa fa-square-o"></i></span> <i class="fa fa-caret-down"></i>
							<span class='ipsNotificationCount' data-role='autoCheckCount'>0</span>
						</a>
						<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide" id="elCheck_menu">
							<li class="ipsMenu_title">{lang="select_rows"}</li>
							<li class="ipsMenu_item" data-ipsMenuValue="all"><a href="#">{lang="all"}</a></li>
							<li class="ipsMenu_item" data-ipsMenuValue="none"><a href="#">{lang="none"}</a></li>
							<li class="ipsMenu_sep"><hr></li>
							<li class="ipsMenu_item" data-ipsMenuValue="hidden"><a href="#">{lang="hidden"}</a></li>
							<li class="ipsMenu_item" data-ipsMenuValue="unhidden"><a href="#">{lang="unhidden"}</a></li>
							<li class="ipsMenu_item" data-ipsMenuValue="unapproved"><a href="#">{lang="unapproved"}</a></li>
						</ul>
					</li>
					{{endif}}
					<li>
						<a href='{$topic->url()}' id="elSortBy_answers" {{if !isset( request.sortby )}}class='ipsButtonRow_active{{endif}}'>{lang="sort_by_answers"}</a>
					</li>
					<li>
						<a href='{$topic->url()->setQueryString( 'sortby', 'date' )}' id="elSortBy_date" {{if isset( request.sortby ) and request.sortby == 'date'}}class='ipsButtonRow_active'{{endif}}>{lang="sort_by_date"}</a>
					</li>
				</ul>
				{{if $pagination}}
					{$pagination|raw}
				{{endif}}
			</div>
		</div>
	{{else}}
			{{if ( \count( $topic->commentMultimodActions() ) && ( $topic->posts > 1 OR $topic->mapped('unapproved_comments') > 0 OR $topic->mapped('hidden_comments') > 0 ) ) || $pagination}}

				<div class="ipsClearfix ipsClear ipsSpacer_bottom">
					{{if \count( $topic->commentMultimodActions() )}}
						<ul class="ipsButtonRow ipsPos_right ipsClearfix">
							<li>
								<a class="ipsJS_show" href="#elCheck_menu" id="elCheck" title='{lang="select_rows_tooltip"}' data-ipsTooltip data-ipsAutoCheck data-ipsAutoCheck-context="#elPostFeed" data-ipsMenu data-ipsMenu-activeClass="ipsButtonRow_active">
									<span class="cAutoCheckIcon ipsType_medium"><i class="fa fa-square-o"></i></span> <i class="fa fa-caret-down"></i>
									<span class='ipsNotificationCount' data-role='autoCheckCount'>0</span>
								</a>
								<ul class="ipsMenu ipsMenu_auto ipsMenu_withStem ipsHide" id="elCheck_menu">
									<li class="ipsMenu_title">{lang="select_rows"}</li>
									<li class="ipsMenu_item" data-ipsMenuValue="all"><a href="#">{lang="all"}</a></li>
									<li class="ipsMenu_item" data-ipsMenuValue="none"><a href="#">{lang="none"}</a></li>
									<li class="ipsMenu_sep"><hr></li>
									<li class="ipsMenu_item" data-ipsMenuValue="hidden"><a href="#">{lang="hidden"}</a></li>
									<li class="ipsMenu_item" data-ipsMenuValue="unhidden"><a href="#">{lang="unhidden"}</a></li>
									<li class="ipsMenu_item" data-ipsMenuValue="unapproved"><a href="#">{lang="unapproved"}</a></li>
								</ul>
							</li>
						</ul>
					{{endif}}
					{{if $pagination}}
						{$pagination|raw}
					{{endif}}
				</div>
			{{endif}}
	{{endif}}

	{template="featuredComments" group="global" app="core" params="$topic->featuredComments(), $topic->url()->setQueryString( 'recommended', 'comments' ), 'recommended_posts', 'post_lc'"}
	
	<div id="elPostFeed" data-role='commentFeed' data-controller='core.front.core.moderation' {{if $topic->isQuestion()}}class='ipsPad ipsAreaBackground'{{endif}}{{if $topic->isQuestion() AND $topic->topic_answered_pid}} data-topicAnswerID="{$topic->topic_answered_pid}"{{endif}}>
		<form action="{$topic->url()->csrf()->setQueryString( 'do', 'multimodComment' )}" method="post" data-ipsPageAction data-role='moderationTools'>
			{{$postCount=0; $timeLastRead = $topic->timeLastRead(); $lined = FALSE;}}
			{{if \count( $comments )}}
				{{foreach $comments as $comment}}
					{{if !$topic->isQuestion() and !$lined and $timeLastRead and $timeLastRead->getTimestamp() < $comment->mapped('date')}}
						{{if $lined = TRUE and $postCount}}
							<hr class="ipsCommentUnreadSeperator">
						{{endif}}
					{{endif}}
					{{$postCount++;}}
					{template="postContainer" group="topics" app="forums" params="$topic, $comment, $votes, ( $topic->isQuestion() ) ? 'cPostQuestion' : ''"}
					{{if $postCount == 1 AND $advertisement = \IPS\core\Advertisement::loadByLocation( 'ad_topic_view' )}}
						{$advertisement|raw}
					{{endif}}
				{{endforeach}}
			{{else}}
				{{if $topic->isQuestion()}}
					<p class='ipsType_center ipsType_light ipsType_large ipsPad' data-role="noComments">
						{lang="no_answers"}
					</p>
				{{endif}}
			{{endif}}
			{template="commentMultimod" app="core" group="global" params="$topic"}
		</form>
	</div>

	{{if $pagination}}
		<div class='ipsSpacer_top ipsClearfix ipsClear'>
			{$pagination|raw}
		</div>
	{{endif}}

	{{if $topic->commentForm() || $topic->locked() || \IPS\Member::loggedIn()->restrict_post || \IPS\Member::loggedIn()->members_bitoptions['unacknowledged_warnings'] || !\IPS\Member::loggedIn()->checkPostsPerDay()}}
		<a id='replyForm'></a>
		<div data-role='replyArea' class='cTopicPostArea ipsAreaBackground ipsPad {{if !$topic->canComment()}}cTopicPostArea_noSize{{endif}} ipsSpacer_top'>
			{{if $topic->commentForm()}}
				{{if $topic->locked()}}
					<p class='ipsType_reset ipsType_warning ipsComposeArea_warning ipsSpacer_bottom ipsSpacer_half'><i class='fa fa-info-circle'></i> {lang="topic_locked_can_comment"}</p>
				{{elseif ( $topic->getPoll() and $topic->getPoll()->poll_only )}}
					<p class='ipsType_reset ipsType_warning ipsComposeArea_warning ipsSpacer_bottom ipsSpacer_half'><i class='fa fa-info-circle'></i> {lang="topic_poll_can_comment"}</p>
				{{endif}}
				{$topic->commentForm()|raw}
			{{else}}
				{{if $topic->locked()}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'topic_locked_cannot_comment'"}
				{{elseif \IPS\Member::loggedIn()->restrict_post}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'restricted_cannot_comment', \IPS\Member::loggedIn()->warnings(5,NULL,'rpa'), \IPS\Member::loggedIn()->restrict_post"}
				{{elseif \IPS\Member::loggedIn()->members_bitoptions['unacknowledged_warnings']}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'unacknowledged_warning_cannot_post', \IPS\Member::loggedIn()->warnings( 1, FALSE )"}
				{{elseif !\IPS\Member::loggedIn()->checkPostsPerDay()}}
					{template="commentUnavailable" group="forms" location="front" app="core" params="'member_exceeded_posts_per_day'"}
				{{endif}}
			{{endif}}
		</div>
	{{endif}}

	{{if !$topic->isArchived() and !$topic->container()->password}}
		<div class='ipsResponsive_noFloat ipsResponsive_showPhone ipsResponsive_block ipsSpacer_top'>
			{template="follow" app="core" group="global" params="'forums', 'topic', $topic->tid, $topic->followersCount()"}
		</div>
		<div class='ipsResponsive_noFloat ipsResponsive_showPhone ipsResponsive_block ipsSpacer_top'>
			{template="promote" app="core" group="global" params="$topic"}
		</div>
	{{endif}}
</div>

{{if ( $topic->canPin() or $topic->canUnpin() or $topic->canFeature() or $topic->canUnfeature() or $topic->canHide() or $topic->canUnhide() or $topic->canMove() or $topic->canLock() or $topic->canUnlock() or $topic->canDelete() or $topic->availableSavedActions() or $topic->canMerge() or $topic->canUnarchive() or $topic->canRemoveArchiveExcludeFlag() or \IPS\Member::loggedIn()->modPermission('can_view_moderation_log') ) or ( $topic->hidden() == -2 AND \IPS\Member::loggedIn()->modPermission('can_manage_deleted_content') )}}
	<ul class="ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_top ipsResponsive_hidePhone">
		<li>
			<a href='#elTopicActionsBottom_menu' id='elTopicActionsBottom' class='ipsButton ipsButton_link ipsButton_medium ipsButton_fullWidth' data-ipsMenu>{lang="moderator_actions"} <i class='fa fa-caret-down'></i></a>
			<ul id='elTopicActionsBottom_menu' class='ipsMenu ipsMenu_auto ipsHide'>
				{{if \IPS\Member::loggedIn()->modPermission('can_manage_deleted_content') AND $topic->hidden() == -2}}
					<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'restore' ) )}' data-confirm data-confirmSubMessage='{lang="restore_as_visible_desc"}'>{lang="restore_as_visible"}</a></li>
					<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'restoreAsHidden' ) )}' data-confirm data-confirmSubMessage='{lang="restore_as_hidden_desc"}'>{lang="restore_as_hidden"}</a></li>
					<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete', 'immediate' => 1 ) )}' data-confirm data-confirmSubMessage='{lang="delete_immediately_desc"}'>{lang="delete_immediately"}</a></li>
				{{else}}
					{{if $topic->canFeature()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'feature' ) )}'>{lang="feature"}</a></li>
					{{endif}}
					{{if $topic->canUnfeature()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unfeature' ) )}' >{lang="unfeature"}</a></li>
					{{endif}}
					{{if $topic->canPin()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'pin' ) )}' >{lang="pin"}</a></li>
					{{endif}}
					{{if $topic->canUnpin()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unpin' ) )}' >{lang="unpin"}</a></li>
					{{endif}}
					{{if $topic->canHide()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'hide' ) )}' data-ipsDialog data-ipsDialog-title="{lang="hide"}">{lang="hide"}</a></li>
					{{endif}}
					{{if $topic->canUnhide()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unhide' ) )}' >{{if $topic->hidden() === 1}}{lang="approve"}{{else}}{lang="unhide"}{{endif}}</a></li>
					{{endif}}
					{{if $topic->canLock()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'lock' ) )}' >{lang="lock"}</a></li>
					{{endif}}
					{{if $topic->canUnlock()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'unlock' ) )}' >{lang="unlock"}</a></li>
					{{endif}}
					{{if $topic->canMove()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'move' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="move"}"  >{lang="move"}</a></li>
					{{endif}}
					{{if $topic->canMerge()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'merge' ) )}' data-ipsDialog data-ipsDialog-size='narrow' data-ipsDialog-title="{lang="merge"}" >{lang="merge"}</a></li>
					{{endif}}
					{{if $topic->canUnarchive()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'unarchive' ) )}' data-confirm data-confirmSubMessage="{$topic->unarchiveBlurb()}" >{lang="unarchive"}</a></li>
					{{endif}}
					{{if $topic->canRemoveArchiveExcludeFlag()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'removeArchiveExclude' ) )}' >{lang="remove_archive_exlude"}</a></li>
					{{endif}}
					{{if $topic->canDelete()}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'moderate', 'action' => 'delete' ) )}' data-confirm  >{lang="delete"}</a></li>
					{{endif}}
					{{if $topic->canOnMessage( 'add' )}}
						<li class='ipsMenu_item'><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'messageForm' ) )}' data-ipsDialog data-ipsDialog-title='{lang="add_message"}'>{lang="add_message"}</a></li>
					{{endif}}
					{{if !$topic->isArchived() and $topic->availableSavedActions()}}
						<li class='ipsMenu_sep'><hr></li>
						{{foreach $topic->availableSavedActions() as $action}}
							<li class="ipsMenu_item"><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'savedAction', 'action' => $action->_id ) )}' data-confirm>{$action->_title}</a></li>
						{{endforeach}}
					{{endif}}
					{{if \IPS\Member::loggedIn()->modPermission('can_view_moderation_log')}}
						<li class='ipsMenu_sep'><hr></li>
						<li class="ipsMenu_item"><a href='{$topic->url()->csrf()->setQueryString( array( 'do' => 'modLog' ) )}' data-ipsDialog data-ipsDialog-title='{lang="moderation_history"}'>{lang="moderation_history"}</a></li>
					{{endif}}
				{{endif}}
			</ul>
		</li>
	</ul>
{{endif}}

<div class='ipsGrid ipsGrid_collapsePhone ipsPager ipsClearfix ipsSpacer_top ipsContained'>
	<div class="ipsGrid_span6 ipsType_left ipsPager_prev ipsPager_noDesc">
		{{if \IPS\forums\Forum::isSimpleView( $topic->container() )}}
			<a href="{url="app=forums&module=forums&controller=index" seoTemplate="forums"}" title="{{if $topic->isQuestion() }}{lang="go_back_to_qa_forum"}{{else}}{lang="go_back_to_forum"}{{endif}}" rel="parent">
				<span class="ipsPager_type">{{if $topic->isQuestion() }}{lang="go_back_to_qa_forum"}{{else}}{lang="go_back_to_forum"}{{endif}}</span>
			</a>
		{{else}}
			<a href="{$topic->container()->url()}" title="{lang="go_to_forum" sprintf="$topic->container()->metaTitle()"}" rel="parent">
				<span class="ipsPager_type">{{if $topic->isQuestion() }}{lang="go_back_to_qa_forum"}{{else}}{lang="go_back_to_forum"}{{endif}}</span>
			</a>
		{{endif}}
	</div>
	{{if $nextUnread !== NULL}}
		<div class='ipsGrid_span6 ipsType_right ipsPager_next ipsPager_noDesc'>
			<a href="{$topic->url()->setQueryString( array( 'do' => 'nextUnread' ) )}" title='{{if $topic->isQuestion()}}{lang="view_next_unread_question_title"}{{else}}{lang="view_next_unread_title"}{{endif}}'>
				<span class="ipsPager_type">{{if $topic->isQuestion()}}{lang="view_next_unread_question"}{{else}}{lang="view_next_unread"}{{endif}}</span>
			</a>
		</div>
	{{endif}}
</div>

{{if !$topic->container()->disable_sharelinks}}
	<hr class='ipsHr'>
	{template="sharelinks" app="core" group="global" params="$topic"}
{{endif}}

{{if $topic->container()->club()}}
	</div>
{{endif}}]]></template>
 <template template_group="widgets" template_name="forumStatistics" template_data="$stats, $orientation='vertical'" template_location="front" template_app="forums"><![CDATA[<h3 class='ipsType_reset ipsWidget_title'>{lang="block_forumStatistics"}</h3>
<div class='ipsWidget_inner'>
	{{if $orientation == 'vertical'}}
		<div class='ipsPad_half'>
			<ul class='ipsDataList'>
				<li class='ipsDataItem'>
					<div class='ipsDataItem_main ipsPos_middle'>
						<strong>{lang="total_topics"}</strong>
					</div>
					<div class='ipsDataItem_stats ipsDataItem_statsLarge'>
						<span class='ipsDataItem_stats_number'>{number="$stats['total_topics']"}</span>
					</div>
				</li>
				<li class='ipsDataItem'>
					<div class='ipsDataItem_main ipsPos_middle'>
						<strong>{lang="total_posts"}</strong>
					</div>
					<div class='ipsDataItem_stats ipsDataItem_statsLarge'>
						<span class='ipsDataItem_stats_number'>{number="$stats['total_posts']"}</span>
					</div>
				</li>
			</ul>
		</div>
	{{else}}
		<div class='ipsGrid ipsGrid_collapsePhone ipsWidget_stats'>
			<div class='ipsGrid_span6 ipsType_center'>
				<span class='ipsType_large ipsWidget_statsCount'>{number="$stats['total_topics']"}</span><br>
				<span class='ipsType_light ipsType_medium'>{lang="total_topics"}</span>
			</div>
			<div class='ipsGrid_span6 ipsType_center'>
				<span class='ipsType_large ipsWidget_statsCount'>{number="$stats['total_posts']"}</span><br>
				<span class='ipsType_light ipsType_medium'>{lang="total_posts"}</span>
			</div>
		</div>
	{{endif}}
</div>]]></template>
 <template template_group="widgets" template_name="hotTopics" template_data="$topics, $orientation='vertical'" template_location="front" template_app="forums"><![CDATA[{{if !empty( $topics ) }}
	<h3 class='ipsWidget_title ipsType_reset'>{lang="block_hotTopics"}</h3>

	{{if $orientation == 'vertical'}}
		<div class='ipsPad_half ipsWidget_inner'>
			<ul class='ipsDataList ipsDataList_reducedSpacing'>
				{{foreach $topics as $topic}}
					<li class='ipsDataItem{{if $topic->hidden()}} ipsModerated{{endif}}'>
						<div class='ipsDataItem_icon ipsPos_top'>
							{template="userPhoto" group="global" app="core" params="$topic->author(), 'tiny'"}
						</div>
						<div class='ipsDataItem_main cWidgetComments'>
							<div class="ipsCommentCount ipsPos_right {{if ( $topic->posts - 1 ) === 0}}ipsFaded{{endif}}" data-ipsTooltip title='{lang="replies_number" pluralize="$topic->posts - 1"}'>{expression="\IPS\Member::loggedIn()->language()->formatNumber( $topic->posts - 1 )"}</div>
							
							<div class='ipsType_break ipsContained'>
								{{if $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1}}
									{{if $topic->hidden() === -1}}
										<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$topic->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span></span>
									{{elseif $topic->hidden() === 1}}
										<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span></span>
									{{endif}}
									{{if $topic->mapped('featured')}}
										<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span></span>
									{{endif}}
								{{endif}}
								<a href="{$topic->url()->setQueryString( 'do', 'getNewComment' )}" title='{lang="view_this_topic" sprintf="$topic->title"}' class='ipsDataItem_title'>{$topic->title}</a>
							</div>
							<p class='ipsType_reset ipsType_medium ipsType_blendLinks ipsContained'>
								<span>{lang="byline_nodate" htmlsprintf="$topic->author()->link()"}</span><br>
								<span class='ipsType_light'>{lang="topic_started_date" htmlsprintf="\IPS\DateTime::ts( $topic->mapped('date') )->html()"}</span>
							</p>
						</div>
					</li>
				{{endforeach}}
			</ul>
		</div>
	{{else}}
		<div class='ipsWidget_inner'>
			<ul class='ipsDataList'>
				{{foreach $topics as $topic}}
					{template="row" group="global" app="forums" params="NULL, NULL, $topic, FALSE"}
				{{endforeach}}
			</ul>
		</div>
	{{endif}}
{{endif}}]]></template>
 <template template_group="widgets" template_name="poll" template_data="$topic, $poll, $orientation='vertical'" template_location="front" template_app="forums">{$poll|raw}
</template>
 <template template_group="widgets" template_name="pollFormWidget" template_data="$url, $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL" template_location="front" template_app="forums"><![CDATA[<form accept-charset='utf-8' class="ipsForm {$class}" action="{$url->setQueryString( 'do', 'widgetPoll' )}" method="post" {{if $uploadField}}enctype="multipart/form-data"{{endif}} {{foreach $attributes as $k => $v}}{$k}="{$v}"{{endforeach}} data-ipsForm>
	<input type="hidden" name="{$id}_submitted" value="1">
	{{foreach $hiddenValues as $k => $v}}
		<input type="hidden" name="{$k}" value="{$v}">
	{{endforeach}}		
	{{foreach $elements as $collection}}
		<ol class='ipsList_reset cPollList cPollList_questions'>
			{{$i = 0;}}
			{{foreach $collection as $idx => $input}}
				{{$i++;}}
				<li class='ipsFieldRow ipsFieldRow_noLabel'>
					<h4 class='ipsType_normal ipsType_reset'><span class='ipsType_break ipsContained'>{$i}. {$input->label}</span></h4>
					{{if !$input->options['multiple']}}
						{template="radio" app="core" location="global" group="forms" params="$input->name, $input->value, $input->required, $input->options['options'], $input->options['disabled'], '', $input->options['disabled']"}
					{{else}}
						{template="checkboxset" app="core" location="global" group="forms" params="$input->name, $input->value, $input->required, $input->options['options'], $input->options['disabled'], $input->options['toggles'], isset( $input->options['descriptions'] ) ? $input->options['descriptions'] : NULL, $input->options['userSuppliedInput']"}
					{{endif}}
					{{if $input->error}}
						<br>
						<span class="ipsType_warning">{lang="$input->error"}</span>
					{{endif}}
				</li>
			{{endforeach}}
		</ol>
	{{endforeach}}
	<hr class='ipsHr'>
	<ul class="ipsList_reset ipsFieldRow_fullWidth ipsClearfix">
		{{foreach $actionButtons as $button}}
			<li class='ipsSpacer_bottom ipsSpacer_half'>{$button|raw}</li>
		{{endforeach}}
		<li class='ipsSpacer_bottom ipsSpacer_half'>
			<a class='ipsButton ipsButton_fullWidth ipsButton_link ipsButton_small' title='{lang="show_results_title"}' href="{$url->setQueryString('do', 'widgetPoll')->setQueryString( array( '_poll' => 'results', 'nullVote' => 1 ) )->csrf()}" {{if !settings.allow_result_view}}data-viewResults-confirm="{lang="warn_allow_result_view"}"{{endif}} data-action='viewResults'>
				{lang="show_results"}
			</a>
		</li>
		<li>
			<a class='ipsButton ipsButton_fullWidth ipsButton_link ipsButton_small' title='{lang="show_results_title"}' href="{$url}">
				{lang="poll_view_topic"}
			</a>
		</li>
	</ul>
</form>]]></template>
 <template template_group="widgets" template_name="pollWidget" template_data="$poll, $url" template_location="front" template_app="forums"><![CDATA[{{if !isset( \IPS\Request::i()->fetchPoll )}}
<section data-controller='core.front.core.poll'>
{{endif}}
	{{if $poll->canVote() and request._poll != 'results' and ( !$poll->getVote() or request._poll == 'form') and $pollForm = $poll->buildForm()}}
		<h3 class='ipsWidget_title ipsType_reset'>
			<span class='ipsType_break ipsContained'>
				<span class='ipsType_small ipsType_light ipsPos_right' data-ipsTooltip title='{lang="poll_num_votes" pluralize="$poll->votes"}'><i class='fa fa-check-square-o'></i> {$poll->votes}</span>
				{$poll->poll_question}
			</span>
		</h3>
		<div class='ipsPad ipsWidget_inner ipsClearfix' data-role='pollContents'>
			{$pollForm->customTemplate( array( \IPS\Theme::i()->getTemplate( 'widgets', 'forums', 'front' ), 'pollFormWidget' ), $url )|raw}
		</div>
	{{elseif ( $poll->canViewResults() and !$poll->canVote() ) or $poll->getVote() or ( request._poll == 'results' and settings.allow_result_view )}}
		<h3 class='ipsWidget_title ipsType_reset'>
			<span class='ipsType_break ipsContained'>
				<span class='ipsType_small ipsType_light ipsPos_right' data-ipsTooltip title='{lang="poll_num_votes" pluralize="$poll->votes"}'><i class='fa fa-check-square-o'></i> {$poll->votes}</span>
				{$poll->poll_question}
			</span>
		</h3>
		<div class='ipsPad ipsWidget_inner ipsClearfix' data-role='pollContents'>
			<ol class='ipsList_reset cPollList'>
				{{$i = 0;}}
				{{foreach $poll->choices as $questionId => $question}}
					{{$i++;}}
					<li>
						<h3 class='ipsType_normal ipsType_reset'><span class='ipsType_break ipsContained'>{$i}. {$question['question']}</span></h3>
						<br>
						<ul class='ipsList_reset cPollList_choices'>
							{{foreach $question['choice'] as $k => $choice}}
								<li class='ipsGrid ipsGrid_collapsePhone'>
									<div class='ipsGrid_span4 ipsType_right ipsType_richText ipsType_small ipsType_break'>
										{$choice|raw}
									</div>
									<div class='ipsGrid_span7'>
										<span class='cPollVoteBar'>
											<span style='width: {{if array_sum( $question['votes'] ) > 0 }}{expression="\intval( ( $question['votes'][ $k ] / array_sum( $question['votes'] ) ) * 100 )"}{{else}}0{{endif}}%' data-votes='{{if array_sum( $question['votes'] ) > 0}}{expression="round( ( $question['votes'][ $k ] / array_sum( $question['votes'] ) ) * 100, 2 )"}{{else}}0{{endif}}%' {{if array_sum( $question['votes'] ) && \intval( ( $question['votes'][ $k ] / array_sum( $question['votes'] ) ) * 100 ) > 30}}class='cPollVoteBar_inside'{{endif}}></span>
										</span>
									</div>
								</li>
							{{endforeach}}
						</ul>
					</li>
				{{endforeach}}
			</ol>
			<hr class='ipsHr'>
			<ul class='ipsList_reset'>
				{{if $poll->canVote() || !member.member_id}}
					{{if $poll->canVote()}}
						<li>
							<a href="{$url->setQueryString('do', 'widgetPoll')->setQueryString( '_poll', 'form' )}" title='{lang="show_vote_options"}' class='ipsButton ipsButton_link ipsButton_small ipsButton_fullWidth' data-action='viewResults'>
								<i class='fa fa-caret-left'></i> {lang="show_vote_options"}
							</a>
						</li>
					{{endif}}
					{{if !member.member_id}}
						<li class='ipsType_light'>
							{lang="poll_guest" sprintf="\IPS\Http\Url::internal( 'app=core&module=system&controller=login', 'front', 'login' ), \IPS\Http\Url::internal( 'app=core&module=system&controller=register', 'front', 'register' )"}
						</li>
					{{endif}}
				{{endif}}
				<li>
					<a class='ipsButton ipsButton_link ipsButton_small ipsButton_fullWidth ipsSpacer_top' href="{$url}">{lang="poll_view_topic"}</a>
				</li>
			</ul>
		</div>
	{{else}}
		<h3 class='ipsWidget_title ipsType_reset'>
			<span class='ipsType_break ipsContained'>
				<span class='ipsType_small ipsType_light ipsPos_right' data-ipsTooltip title='{lang="poll_num_votes" pluralize="$poll->votes"}'><i class='fa fa-check-square-o'></i> {$poll->votes}</span>
				{$poll->poll_question}
			</span>
		</h3>
		<div class='ipsPad_half ipsWidget_inner ipsClearfix' data-role='pollContents'>
			{lang="no_permission_poll"}{{if !\IPS\Member::loggedIn()->member_id}} {lang="poll_guest" sprintf="\IPS\Http\Url::internal( 'app=core&module=system&controller=login', 'front', 'login' ), \IPS\Http\Url::internal( 'app=core&module=system&controller=register', 'front', 'register' )"}{{endif}}
		</div>
	{{endif}}
{{if !isset( \IPS\Request::i()->fetchPoll )}}
</section>
{{endif}}]]></template>
 <template template_group="widgets" template_name="postFeed" template_data="$comments, $title, $orientation='vertical'" template_location="front" template_app="forums"><![CDATA[{{if !empty( $comments ) }}
	<h3 class='ipsType_reset ipsWidget_title'>{$title}</h3>
	{{if $orientation == 'vertical'}}
		<div class='ipsWidget_inner ipsPad_half'>
			<ul class='ipsDataList ipsDataList_reducedSpacing'>
				{{foreach $comments as $comment}}
					<li class='ipsDataItem'>
						<div class='ipsDataItem_icon ipsPos_top'>
							{template="userPhoto" group="global" app="core" params="$comment->author(), 'tiny'"}
						</div>
						<div class='ipsDataItem_main'>
							<div class='ipsType_break ipsContained'><a href="{$comment->url()}" title='{lang="view_this_topic" sprintf="$comment->item()->title"}' class='ipsType_medium ipsTruncate ipsTruncate_line'>{$comment->item()->title}</a></div>
							<p class='ipsType_reset ipsType_light ipsType_medium ipsType_blendLinks'>{lang="byline_nodate" htmlsprintf="$comment->author()->link()"} &middot; <a href='{$comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->pid ) )}' class='ipsType_blendLinks'>{$comment->dateLine()|raw}</a></p>
							<div class='ipsType_medium ipsType_textBlock ipsType_richText ipsType_break ipsContained ipsSpacer_top ipsSpacer_half' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='{{if $orientation == 'vertical'}}6 lines{{else}}2 lines{{endif}}' data-ipsTruncate-watch='false'>
								{$comment->truncated( TRUE, NULL )|raw}
							</div>
						</div>
					</li>
				{{endforeach}}
			</ul>
		</div>
	{{else}}
		<div class='ipsWidget_inner'>
			<ul class='ipsDataList'>
				{{foreach $comments as $comment}}
					<li class='ipsDataItem ipsClearfix'>
						<div class='ipsComment_header ipsPhotoPanel ipsPhotoPanel_mini'>
							{template="userPhoto" app="core" group="global" params="$comment->author(), 'mini', $comment->warningRef()"}
							<div>
								<p class='ipsPos_right ipsType_reset'>
									{{if $comment->canReportOrRevoke() === TRUE}}
										<a href='{$comment->url('report')}' data-ipsDialog data-ipsDialog-remoteSubmit data-ipsDialog-size='medium' data-ipsDialog-flashMessage='{lang="report_submit_success"}' data-ipsDialog-title="{lang="report"}" data-action='reportComment' title='{lang="report_content"}'>{lang="report"}</a> &middot; 
									{{endif}}

									<a class='ipsType_blendLinks' href='{$comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->pid ) )}' data-ipsTooltip title='{lang="share_this_comment"}' data-ipsMenu data-ipsMenu-closeOnClick='false' id='elShareComment_{$comment->pid}' data-role='shareComment'><i class='fa fa-share-alt'></i></a>
								</p>
								<h3 class='ipsComment_author ipsType_blendLinks'>
									<strong class='ipsType_normal'>{template="userLink" app="core" group="global" params="$comment->author(), $comment->warningRef()"}</strong>
									{template="reputationBadge" group="global" app="core" params="$comment->author()"}
								</h3>
								<p class='ipsComment_meta ipsType_light ipsType_medium'>
									<a href='{$comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->pid ) )}' class='ipsType_blendLinks'>{$comment->dateLine()|raw}</a>
									{{if $comment->editLine()}}
										({lang="edited_lc"})
									{{endif}}
									{{if $comment->hidden()}}
										&middot; {$comment->hiddenBlurb()}
									{{endif}}
								</p>
					
								{{if member.modPermission('mod_see_warn') and $comment->warning}}
									{template="commentWarned" group="global" app="core" params="$comment"}
								{{endif}}
							</div>
						</div>

						<div class='ipsPad ipsClearfix'>
							<div class='ipsType_break ipsContained'><a href="{$comment->url()}" title='{lang="view_this_topic" sprintf="$comment->item()->title"}' class='ipsDataItem_title ipsTruncate ipsTruncate_line'>{wordbreak="$comment->item()->title"}</a></div>
							<div data-role='commentContent' class='ipsType_normal ipsType_richText ipsContained' data-controller='core.front.core.lightboxedImages'>
								{{if $comment->hidden() === 1 && $comment->author()->member_id == \IPS\Member::loggedIn()->member_id}}
									<strong class='ipsType_medium ipsType_warning'><i class='fa fa-info-circle'></i> {lang="comment_awaiting_approval"}</strong>
								{{endif}}
								{$comment->content()|raw}
								
								{{if $comment->editLine()}}
									{$comment->editLine()|raw}
								{{endif}}
							</div>
							
							{{if $comment->hidden() !== 1 && \IPS\IPS::classUsesTrait( $comment, 'IPS\Content\Reactable' ) and settings.reputation_enabled}}
								<div class='ipsItemControls'>
									{template="reputation" group="global" app="core" params="$comment"}
								</div>
							{{endif}}
						</div>
					</li>
				{{endforeach}}
			</ul>
		</div>
	{{endif}}
{{endif}}
]]></template>
 <template template_group="widgets" template_name="topicFeed" template_data="$topics, $title, $orientation='vertical'" template_location="front" template_app="forums"><![CDATA[{{if !empty( $topics ) }}
	<h3 class='ipsWidget_title ipsType_reset'>{$title}</h3>

	{{if $orientation == 'vertical'}}
		<div class='ipsPad_half ipsWidget_inner'>
			<ul class='ipsDataList ipsDataList_reducedSpacing'>
				{{foreach $topics as $topic}}
					<li class='ipsDataItem{{if $topic->unread()}} ipsDataItem_unread{{endif}}{{if $topic->hidden()}} ipsModerated{{endif}}'>
						<div class='ipsDataItem_icon ipsPos_top'>
							{template="userPhoto" group="global" app="core" params="$topic->author(), 'tiny'"}
						</div>
						<div class='ipsDataItem_main cWidgetComments'>
							<div class="ipsCommentCount ipsPos_right {{if ( $topic->posts - 1 ) === 0}}ipsFaded{{endif}}" data-ipsTooltip title='{lang="replies_number" pluralize="$topic->posts - 1"}'>{expression="\IPS\Member::loggedIn()->language()->formatNumber( $topic->posts - 1 )"}</div>
							
							<div class='ipsType_break ipsContained'>
								{{if $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1}}
									{{if $topic->hidden() === -1}}
										<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{$topic->hiddenBlurb()}'><i class='fa fa-eye-slash'></i></span></span>
									{{elseif $topic->hidden() === 1}}
										<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning" data-ipsTooltip title='{lang="pending_approval"}'><i class='fa fa-warning'></i></span></span>
									{{endif}}
									{{if $topic->mapped('featured')}}
										<span><span class="ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive" data-ipsTooltip title='{lang="featured"}'><i class='fa fa-star'></i></span></span>
									{{endif}}
								{{endif}}							
								<a href="{$topic->url()->setQueryString( 'do', 'getNewComment' )}" title='{lang="view_this_topic" sprintf="$topic->title"}' class='ipsDataItem_title'>{$topic->title}</a>
							</div>
							<p class='ipsType_reset ipsType_medium ipsType_blendLinks ipsContained'>
								<span>{lang="byline_nodate" htmlsprintf="$topic->author()->link()"}</span><br>
								<span class='ipsType_light'>{lang="topic_started_date" htmlsprintf="\IPS\DateTime::ts( $topic->mapped('date') )->html()"}</span>
							</p>
						</div>
					</li>
				{{endforeach}}
			</ul>
		</div>
	{{else}}
		<div class='ipsWidget_inner'>
			<ul class='ipsDataList'>
				{{foreach $topics as $topic}}
					{template="row" group="global" app="forums" location="front" params="NULL, NULL, $topic, FALSE"}
				{{endforeach}}
			</ul>
		</div>
	{{endif}}
{{endif}}]]></template>
 <css css_location="front" css_app="forums" css_attributes="" css_path="." css_name="embed.css"></css>
 <css css_location="front" css_app="forums" css_attributes="" css_path="." css_name="forums_responsive.css"><![CDATA[/* BOTH */
@media screen and (max-width: 979px) {
	.cAuthorPane {
		margin-bottom: 0 !important;
	}

	.cTopicList .cBestAnswerIndicator {
		width: 24px;
		height: 24px;
		line-height: 24px;
		font-size: 14px;
	}

	.cTopicList .ipsDataItem_icon {
		min-width: 25px;
	}

	html[dir="ltr"] .cTopicList .ipsDataItem_icon + .ipsDataItem_main, 
	html[dir="ltr"] .cTopicList .ipsDataItem_icon + .ipsDataItem_main + .ipsDataItem_stats {
		margin-left: 30px !important;
	}
	html[dir="rtl"] .cTopicList .ipsDataItem_icon + .ipsDataItem_main, 
	html[dir="rtl"] .cTopicList .ipsDataItem_icon + .ipsDataItem_main + .ipsDataItem_stats {
		margin-right: 30px !important;
	}

	.cTopicList .ipsDataItem_main {
		padding: 0;
	}
	
	.cForumFluidTable .ipsDataItem_stats {
		min-width: 130px !important;
	}

	/* Fluid view juggling */
	html[dir="ltr"] .cForumFluidTable .ipsDataItem_modCheck {
		position: absolute;
		top: 15px;
		right: 0 !important;
		left: auto !important;
	}
	
	html[dir="rtl"] .cForumFluidTable .ipsDataItem_modCheck {
		position: absolute;
		right: 15px;
		left: 0 !important;
		right: auto !important;
	}
	
	/* User photo */
	html[dir="ltr"] .cForumFluidTable .cTopicList .ipsDataItem_icon {
		left: 5px;
		top: 15px;
		position: absolute;
	}
	
	html[dir="rtl"] .cForumFluidTable .cTopicList .ipsDataItem_icon {
		right: 5px;
		top: 15px;
		position: absolute;
	}
	
	/* Unread dot */
	html[dir="ltr"] .cForumFluidTable .ipsItemStatus {
		position: absolute;
		top: 60px;
		left: 15px;
	}
	
	html[dir="rtl"] .cForumFluidTable .ipsItemStatus {
		position: absolute;
		top: 60px;
		right: 15px;
	}
	
	html[dir="ltr"] .cForumFluidTable .cTopicList .ipsDataItem_icon + .ipsDataItem_main, html[dir="ltr"] .cForumFluidTable .cTopicList .ipsDataItem_icon + .ipsDataItem_main + .ipsDataItem_stats {
		margin-left: 40px !important;
	}
	
	html[dir="rtl"] .cForumFluidTable .cTopicList .ipsDataItem_icon + .ipsDataItem_main, html[dir="rtl"] .cForumFluidTable .cTopicList .ipsDataItem_icon + .ipsDataItem_main + .ipsDataItem_stats {
		margin-right: 40px !important;
	}
	
	html[dir="ltr"] .cForumFluidTable .ipsDataItem.ipsDataItem_responsivePhoto .ipsDataItem_main {
		margin-right: 10px !important;
	}
	
	html[dir="rtl"] .cForumFluidTable .ipsDataItem.ipsDataItem_responsivePhoto .ipsDataItem_main {
		margin-left: 10px !important;
	}

	.cForumMiniList_wrapper {
		display: none;
	}

		.cForumMiniList_wrapper .ipsSideMenu {
			border: 0;
		}

	.ipsDialog .cForumMiniList_wrapper,
	.cForumMiniList {
		display: block !important;
	}

	.ipsDialog #elFluidFormFilters {
		padding: 10px 15px 15px;
		border: 0;
		margin-top: 10px;
	}

	/* loading styles */
	.cForumFluidTable .ipsDataItem.ipsDataItem_loading {
		padding-left: 0;
		padding-right: 0;
	}

	html[dir="ltr"] .cForumFluidTable .ipsDataItem_loading > div > span:last-child {
		right: 15px;
	}
	html[dir="rtl"] .cForumFluidTable .ipsDataItem_loading > div > span:last-child {
		left: 15px;
	}
}

/* TABLETS */
@media screen and (min-width: 768px) and (max-width: 979px) {
	.cForumQuestion .ipsDataItem_main {
		width: 100%;
		padding-left: 5px !important;
	}

	.cForumQuestion .ipsDataItem_main,
	.cForumQuestion .cForumQuestion_stat {
		display: table-cell;
	}
	.cForumQuestions .cForumQuestion .cForumQuestion_stat + .ipsDataItem_modCheck {
		position: absolute;
		top: 40px;
		padding: 0 4px;
	} 
}

/* PHONES */
@media screen and (max-width: 767px) {

	/* Adjust author pane for mobile display */
	.cPost.ipsComment .cAuthorPane {
		text-align: left;
		min-height: 57px;
		position: relative;
	}

		.cPost.ipsComment:not( .ipsComment_selected ):not( .ipsModerated ) .cAuthorPane {
			background: {theme="area_background_light"};
		}

	html[dir="rtl"] .cPost.ipsComment .cAuthorPane {
		text-align: right;
	}

	.cPost.ipsComment .ipsUserPhoto {
		display: inline-block;
	}

	.cPost.ipsComment .ipsUserPhoto > img {
		width: 40px;
		height: 40px;
	}

	.cPost.ipsComment .cAuthorPane_photo {
		position: absolute;
		top: 7px;
		margin: 0;
	}
	html[dir="ltr"] .cPost.ipsComment .cAuthorPane_photo {
		left: 7px;
	}
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane_photo {
		right: 7px;
	}

	html[dir="ltr"] .cPost.ipsComment .cAuthorPane_info,
	html[dir="ltr"] .cPost.ipsComment .cAuthorPane_author {
		margin-left: 45px;
	}
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane_info,
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane_author {
		margin-right: 45px;
	}

	.cPost.ipsComment .cAuthorPane_author {
		line-height: 16px;
		margin-top: -5px;
		max-width: calc(100% - 80px);
	}

		.cPost.ipsComment .cAuthorPane_author > a {
			font-size: 15px;
		}

	/* Adjusts meta line, e.g. posted date */
	html[dir] .cPost .ipsComment_meta {
		position: absolute;
		top: -28px;
		padding: 0;
	}
	html[dir="ltr"] .ipsComment_meta {
		left: 60px;
		right: 0;
		margin-right: 0;
	}
	html[dir="rtl"] .ipsComment_meta {
		right: 60px;
		left: 0;
		margin-left: 0;
	}

	html[dir="ltr"] .cPost.ipsComment_popular .ipsComment_meta {
		padding-right: 40px;
	}
	html[dir="rtl"] .cPost.ipsComment_popular .ipsComment_meta {
		padding-left: 40px;
	}

	.cPost .ipsComment_meta .cPost_moderator {
		position: absolute;
		top: -22px;
		margin: 0 !important;
	}
	html[dir="ltr"] .cPost .ipsComment_meta .cPost_moderator {
		right: -2px;
	}
	html[dir="rtl"] .cPost .ipsComment_meta .cPost_moderator {
		left: -2px;
	}

	/* on popular posts we show a flag, so we need to adjust positioning for that */
	.cPost.ipsComment.ipsComment_popular .ipsComment_popularFlag {
		top: -60px;
		height: 55px;
		padding-top: 18px;
	}

	html[dir] .ipsComment.ipsComment_popular [data-role="commentContent"] {
		padding-right: 0;
		padding-left: 0;
	}

	html[dir="ltr"] .cPost.ipsComment.ipsComment_popular .ipsComment_meta .cPost_moderator {
		right: 38px;
	}
	html[dir="rtl"] .cPost.ipsComment.ipsComment_popular .ipsComment_meta .cPost_moderator {
		left: 38px;
	}

	/* Q&A-specific changes */
	.cPost.cPostQuestion {
		margin-bottom: 20px;
	}

	.cPost .cRatingColumn {
		margin-bottom: 0 !important;
		padding: 7px 7px 0 7px !important;
	}

		.cPost .cRatingColumn ul.cPostRating_controls li {
			display: inline-block;
			float: left;
		}

		.cPost .cRatingColumn ul.cPostRating_controls .cPostRating_bestAnswer {
			float: right;
		}

		.cPost .cRatingColumn .cAnswerRate {
			font-size: 40px;
		}

		.cPost .cRatingColumn .cAnswerRate.cAnswerRate_up {
			top: -1px;
		}

		.cPost .cRatingColumn .cAnswerRating {
			margin: 0 10px;
			font-size: 16px;
			font-weight: bold;
		}

		.cPost .cRatingColumn .cBestAnswerIndicator {
			width: 30px;
			height: 30px;
			line-height: 30px;
			font-size: 15px;
		}

	/* ---- */

	.cForumGrid .cForumGrid_forumInfo.ipsPad {
		padding: 15px;
	}

	html[dir] .cPost .cPost_contentWrap {
		padding: 15px 0 0 0;
	}

	html[dir] .cPost .ipsComment_content {
		padding-left: 10px;
		padding-right: 10px;
		position: static;
	}
	
	.cPost .cAuthorPane + .ipsColumn {
		margin-bottom: 0;
	}

	.cPost .ipsItemControls {
		margin-bottom: -7px;
	}

	html[dir="ltr"] .cTopic .ipsComment.ipsComment_ignored {
		padding-left: 7px;
	}
	html[dir="rtl"] .cTopic .ipsComment.ipsComment_ignored {
		padding-right: 7px;
	}

	/* Forum view */
	.cForumRow .ipsItemStatus_custom {
		max-width: 26px;
	}

	html[dir="ltr"] .cForumQuestions.cTopicList .ipsDataItem_main {
		margin-left: 40px;
	}
	html[dir="rtl"] .cForumQuestions.cTopicList .ipsDataItem_main {
		margin-right: 40px;
	}

	.cForumQuestions.cTopicList .cForumQuestion_stat {
		display: inline-block !important;
	}

	.cForumQuestions .cForumQuestion .cForumQuestion_stat,
	.cForumQuestions .cForumQuestion .cForumQuestion_stat span:first-child {
		display: inline-block;
		min-width: 0;
		color: inherit;
	}

		.cForumQuestions .cForumQuestion .cForumQuestion_stat span {
			font-size: 13px;
			color: inherit;
			font-weight: bold;
		}

		html[dir="ltr"] .cForumQuestions .cForumQuestion .ipsDataItem_modCheck,
		html[dir="ltr"] .cForumQuestions .cForumQuestion .ipsDataItem_main + .cForumQuestion_stat {
			margin-left: 30px;
		}
		html[dir="rtl"] .cForumQuestions .cForumQuestion .ipsDataItem_modCheck,
		html[dir="rtl"] .cForumQuestions .cForumQuestion .ipsDataItem_main + .cForumQuestion_stat {
			margin-right: 30px;
		}

			.cForumQuestions .cForumQuestion .cForumQuestion_stat + .ipsDataItem_modCheck {
				position: absolute;
				top: 50px;
			} 
			html[dir="ltr"] .cForumQuestions .cForumQuestion .cForumQuestion_stat + .ipsDataItem_modCheck {
				left: -15px;
			}
			html[dir="rtl"] .cForumQuestions .cForumQuestion .cForumQuestion_stat + .ipsDataItem_modCheck {
				right: -15px;
			}

			html[dir="ltr"] .cForumQuestions .cForumQuestion .cForumQuestion_stat + .cForumQuestion_stat {
				margin-left: 10px;
			}
			html[dir="rtl"] .cForumQuestions .cForumQuestion .cForumQuestion_stat + .cForumQuestion_stat {
				margin-right: 10px;
			}
}]]></css>
 <css css_location="front" css_app="forums" css_attributes="" css_path="." css_name="forums.css"><![CDATA[.cForumList .ipsDataItem {
	border-bottom-width: 1px;
}

.cForumList .ipsDataItem_main {
	vertical-align: middle;
}

.cForumList .ipsDataItem_title {
	font-size: 18px;
}

.cForumGrid {
	min-height: 230px !important;
	margin-bottom: 15px;
	position: relative;
	padding: 0 0 80px 0 !important;
	border: 1px solid rgba(0,0,0,0.1);
}

	.cForumGrid .cForumGrid_icon {
		max-width: 40px;
	}

	.cForumGrid .cForumGrid_info {
		position: absolute;
		bottom: 15px;
		left: 15px;
		right: 15px;
	}

	.cForumGrid_unread .cForumGrid_title {
		font-weight: bold;
		line-height: 1.1;
	}

	.cForumGrid .cForumGrid_forumInfo {
		min-height: 70px;
		border-bottom: 1px solid rgba(0,0,0,0.05);
	}

.cForumTopicTable .ipsDataItem_title {
	display: inline;
}

.cForumTitle {
	transition: 0.3s linear all;
}

	.cForumRow_hidden .cForumTitle {
		opacity: 0.5;
	}

	.cForumRow_hidden > .ipsDataList {
		display: none !important;
	}

.cForumToggle {
	font-size: 18px;
	opacity: 0.2;
	transition: 0.3s all linear;
	width: 20px;
	height: 20px;
}

	.cForumToggle:hover {
		opacity: 1;
	}

	.cForumToggle:after {
		content: "\f078";
		font-family: "FontAwesome";
		font-size: 18px;
	}

	.cForumRow_hidden .cForumToggle:after {
		content: "\f053";
	}
	html[dir="rtl"] .cForumRow_hidden .cForumToggle:after {
		content: "\f054";
	}

html[dir="ltr"] .cTopicList .ipsDataItem_icon {
	min-width: 25px;
	padding-right: 0;
}
html[dir="rtl"] .cTopicList .ipsDataItem_icon {
	min-width: 25px;
	padding-left: 0;
}

.cTopicList .ipsDataItem_main {
	padding: 12px 10px;
}

.cTopicHovercard .cTopicHovercard_container {
	height: 200px;
	overflow: auto;
	border-bottom: 0;
}

.cTopicHovercard .ipsType_richText {
	font-size: 12px;
}

.cTopicHovercard hr.ipsHr {
	margin: 7px 0;
}

/* Q&A RATINGS */
.cForumQuestion_stat > span:first-child {
	display: block;
	font-size: 22px;
}

.cRatingColumn {
	width: 65px;
	padding: 15px 15px 0 15px !important;
}

	.cRatingColumn.cRatingColumn_question {
		padding-top: 0 !important;
	}

	.cRatingColumn_on {
		background: #e4ecdd;
	}

	.cRatingColumn_up {
		border-color: #4a7c20;
	}

	.cRatingColumn_down {
		border-color: #a52638;
	}

	.cRatingColumn > ul > li {
		display: block;
	}

	.cRatingColumn_question {
		padding-top: 15px;
	}

		html[dir="ltr"] .cRatingColumn_question + .ipsColumn {
			padding-left: 15px;
		}
		html[dir="rtl"] .cRatingColumn_question + .ipsColumn {
			padding-right: 15px;
		}

.cAnswerRate {
	font-size: 60px;
	line-height: 10px;
	position: relative;
	display: block;
	overflow: hidden;
}	

	.cAnswerRate.cAnswerRate_up {
		margin-bottom: 10px;
	}

html[dir="ltr"] .cAnswerRate {
	left: 1px;
}
html[dir="rtl"] .cAnswerRate {
	right: 1px;
}

	.cAnswerRate:not( .ipsType_positive ):not( .ipsType_negative ), 
	.cAnswerRate:hover:not( .ipsType_positive ):not( .ipsType_negative ) {
		color: {theme="text_color"};
	}

		span.cAnswerRate:not( .ipsType_positive ):not( .ipsType_negative ),
		span.cAnswerRate:hover:not( .ipsType_positive ):not( .ipsType_negative ) {
			color: {theme="text_light"};
			opacity: 0.5;
			cursor: not-allowed;
		}

		.cAnswerRate.ipsType_positive:hover {
			color: #4a7c20;
		}

		.cAnswerRate.ipsType_negative:hover {
			color: #a52638;
		}

	.cAnswerRate > .fa {
		line-height: 30px;
	}

	span.cAnswerRate.cAnswerRate_noPermission {
		opacity: 0.25 !important;
	}

.cAnswerRating {
	font-size: 26px;
	font-weight: 500;
	line-height: 30px;
	display: block;
	margin-top: -8px;
}

.cBestAnswerIndicator {
	display: inline-block;
	color: #fff;
	font-size: 22px;
	width: 36px;
	height: 36px;
	text-align: center;
	line-height: 36px;
	position: relative;
	background: #4a7c20;
	border-radius: 36px;
	margin-bottom: 5px;
}
	
	.ipsDataList .cBestAnswerIndicator {
		margin-bottom: 0;
	}

	.cBestAnswerIndicator_off {
		background: #d4d4d4;
	}

		.cBestAnswerIndicator_off:hover {
			background: #c9c9c9;
			color: #fff;
		}

	a.cBestAnswerIndicator:not( .cBestAnswerIndicator_off ):hover {
		line-height: 34px;
	}

		a.cBestAnswerIndicator:not( .cBestAnswerIndicator_off ):hover i.fa:before {
			content: '\f00d';
			color: #fff;
		}

/* POST WRAPPER STYLES */
.cPost {}

.cPost.ipsModerated,
.cPost.ipsModerated .cAuthorPane {
	background: {theme="moderated"};
}

.cPost.ipsComment_selected:not( .ipsComment_moderated ) {
	background: {theme="selected"};
}

/*.cTopic .cPost.ipsComment:last-of-type {
	margin-bottom: 0;
}*/

.cPost.cPostQuestion:not( .ipsComment_popular ):not( .ipsComment_selected ):not( .ipsComment_highlighted ) {
	border: 0;
}

html[dir="ltr"] .cPost .ipsComment_meta {
	padding: 18px 0 10px;
	margin-right: 15px;
}
html[dir="rtl"] .cPost .ipsComment_meta  {
	padding: 18px 0px 10px;
	margin-left: 15px;
}

	html[dir="ltr"] .cPost.ipsComment_popular .ipsComment_meta {
		padding-right: 45px;
	}
	html[dir="rtl"] .cPost.ipsComment_popular .ipsComment_meta {
		padding-left: 45px;
	}

.cPost .ipsComment_controls {
	margin: 0;
	padding: 0;
}

.cPost .cPost_contentWrap {
	position: relative;
	padding: 7px 15px 15px 0;
	/*min-height: 200px;*/
}
html[dir="rtl"] .cPost .cPost_contentWrap {
	padding: 7px 0px 15px 15px;
}

.cPost.ipsComment .ipsType_richText {
	margin-top: 0;
}

html[dir] .cPost .ipsComment_content {
	padding-right: 0;
	padding-left: 0;
}

.cAuthorPane {
	text-align: center;
	padding: 15px !important;
}

	.cAuthorPane_photo {
		margin: 10px 0;
		position: relative;
	}

	.cAuthorPane_author {
		display: block;
		/*word-break: break-all;*/
		line-height: 1.2;
		word-wrap: initial;
		overflow: hidden;
		text-overflow: ellipsis;
		-moz-hyphens: initial;
		margin-bottom: 3px;
	}

		.cAuthorPane_author strong {
			font-weight: 500;
		}

	.cAuthorPane_info .ipsRepBadge {
		font-size: inherit;
	}

	.cAuthorPane .cAuthorGroupIcon {
		max-width: 100%;
	}

.ipsApp .cTopic [data-role="commentFeed"] > .ipsComment:first-child {
	padding-top: 15px;
}

.cPostShareMenu h5 {
	margin-bottom: 5px;
}

html[dir="ltr"] .cTopic .ipsComment.ipsComment_ignored {
	padding-left: 200px;
}
html[dir="rtl"] .cTopic .ipsComment.ipsComment_ignored {
	padding-right: 200px;
}

/* REPLY AREA / CREATE TOPIC */
.cTopicPostArea .ipsComposeArea {
	margin-top: 0;
}

/*.cTopicPostArea:not( .cTopicPostArea_noSize ) .ipsComposeArea_dummy {
	min-height: 200px;
}*/

/*.cTopicPostArea hr {
	display: none;
}*/

.cCreateTopic_date input {
	max-width: 100% !important;
	width: 100% !important;
	margin-bottom: 7px;
}
html[dir="ltr"] .cCreateTopic_date input {
	padding-left: 35px !important;
}
html[dir="rtl"] .cCreateTopic_date input {
	padding-right: 35px !important;
}

.cCreateTopic_date li {
	position: relative;
}

.cCreateTopic_date i {
	position: absolute;
	top: 10px;
	font-size: 18px;
}
html[dir="ltr"] .cCreateTopic_date i {
	left: 10px;
}
html[dir="rtl"] .cCreateTopic_date i {
	right: 10px;
}

/* FEATURED TOPICS */
.cFeaturedTopics h2 {
	font-weight: 500;
}

/* PHONES */
@media screen and (max-width: 767px) {
	.cPost.ipsComment .cAuthorPane {
		text-align: left;
	}
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane {
		text-align: right;
	}

	.cPost.ipsComment .ipsUserPhoto {
		display: inline-block;
	}

	.cPost.ipsComment .ipsUserPhoto > img {
		width: 50px;
		height: 50px;
	}

	.cPost.ipsComment .cAuthorPane_photo {
		position: absolute;
		top: 0;
		margin: 0;
	}
	html[dir="ltr"] .cPost.ipsComment .cAuthorPane_photo {
		left: 0;
	}
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane_photo {
		right: 0;
	}

	html[dir="ltr"] .cPost.ipsComment .cAuthorPane_info,
	html[dir="ltr"] .cPost.ipsComment .cAuthorPane_author {
		margin-left: 65px;
	}
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane_info,
	html[dir="rtl"] .cPost.ipsComment .cAuthorPane_author {
		margin-right: 65px;
	}

	.cPost.ipsComment .cAuthorPane_author {
		line-height: 1.1;
	}

		.cPost.ipsComment .cAuthorPane_author > a 	{
			font-size: 14px;
			line-height: 18px;
			font-weight: bold;
		}
}

/* Mini sidebar list */
.cForumMiniList_button.ipsButton_split {
	margin-top: 2px;
}

.cForumMiniList_wrapper {
	padding: 9px 5px 0;
}

/* Topic view container color hint */
.cForumContainerHint {
	width: 10px;
	height: 53px;
	float: left;
	margin-right: 10px;
	padding-top: 6px;
	border-radius: 4px;
}

.cForumContainerHint {
	height: 33px;
}

ul.ipsButton_split.cForumMiniList_buttonShowFlow {
	margin-top: 8px;
}

ul.ipsButton_split.cForumMiniList_button {
	text-transform: none;
}

html[dir] .cForumMiniList_wrapper > .ipsSideMenu > .ipsSideMenu_list.cForumMiniList_multiRoot > li > .cForumMiniList {
	border: 0;
}

html[dir="ltr"] .ipsSideMenu > .cForumMiniList > li:not( .cForumMiniList_category ) > .cForumMiniList {
	margin-left: 0;
}
html[dir="rtl"] .ipsSideMenu > .cForumMiniList > li:not( .cForumMiniList_category ) > .cForumMiniList {
	margin-right: 0;
}

.cForumMiniList .ipsSideMenu_item + .ipsSideMenu_list .ipsSideMenu_item {
	font-size: 13px;
	padding: 5px 10px;
	line-height: 18px;
}

.cForumMiniList .ipsSideMenu_item {
	font-size: 14px;
	padding: 7px 10px;
	display: flex;
}

.cForumMiniList .ipsSideMenu_item .cForumMiniList_title {
	min-width: 0;
}

.cForumMiniList.cForumMiniList_multiRoot > li > a {
	font-size: 17px;
	font-weight: 500;
	padding: 10px 9px;
	margin-bottom: 4px;
	color: #000;
}

html[dir="ltr"] .cForumMiniList_count {
	margin-left: 12px;
}
html[dir="rtl"] .cForumMiniList_count {
	margin-right: 12px;
}

	.cForumMiniList_count .fa {
		font-size: 8px;
	}

.cForumMiniList .cForumMiniList_blob {
	width: 22px;
	height: 18px;
	text-align: center;
	border-radius: 2px;
	display: inline-block;
	vertical-align: middle;
	background: #3e4148;
	color: #fff;
	opacity: 0.3;
	position: relative;
	top: -1px;
}

html[dir="ltr"] .cForumMiniList .cForumMiniList_blob {
	margin-right: 5px;
}
html[dir="rtl"] .cForumMiniList .cForumMiniList_blob {
	margin-left: 5px;
}

	.cForumMiniList .cForumMiniList_blob > span {
		position: absolute;
		top: 2px;
		left: 2px;
		right: 2px;
		bottom: 2px;
		background: #fff;
		border-radius: 1px;
	}

	.cForumMiniList .cForumMiniList_blob .fa {
		text-align: center;
		line-height: 18px;
		width: auto;
		font-size: inherit;
		display: none;
		font-size: 11px;
		margin-top: 1px;
	}

	.cForumMiniList .cForumMiniList_selected > .cForumMiniList_blob {
		opacity: 1;
	}

	.cForumMiniList .cForumMiniList_selected > .cForumMiniList_blob .fa {
		display: block;
	}
	.cForumMiniList .cForumMiniList_selected > .cForumMiniList_blob > span {
		display: none;
	}

.cForumFluidTable .ipsDataItem_lastPoster.ipsDataItem_noPhoto {
	min-width: 170px;
}

.cForumFluidTable .ipsItemStatus {
	position: relative;
	top: -1px;
}

.cForumFluidTable .ipsBadge_pill {
	height: 18px;
	line-height: 18px;
	position: relative;
	top: -2px;
}

.cForumMiniList_multiRoot {
	margin-top: -4px;
}

.cForumMiniList > li > a.cForumMiniList_selected {
	background: #e5e5e5;
}

/* Loading styles */
.cForumFluidTable .ipsDataItem_loading > div > span:last-child:after {
	left: 10px;
	width: 38px;
	height: 38px;
	border-radius: 38px;
}

html[dir="ltr"] .cForumFluidTable .ipsDataItem_loading > div > span:last-child {
	left: 56px;
	right: 500px;
}
html[dir="rtl"] .cForumFluidTable .ipsDataItem_loading > div > span:last-child {
	right: 56px;
	left: 500px;
}

html[dir="ltr"] .cForumFluidTable .ipsDataItem_loading > div > span:last-child:after {
	left: -46px;
}
html[dir="rtl"] .cForumFluidTable .ipsDataItem_loading > div > span:last-child:after {
	right: -46px;
}

.cForumFluidTable .ipsDataItem_loading > div > span:first-child {
	width: 0;
	height: 0;
}

.cForumFluidTable .ipsDataItem_loading > div > span:first-child {
	top: 15px;
}]]></css>
 <css css_location="front" css_app="forums" css_attributes="" css_path="." css_name="posts.css"><![CDATA[

/*.ipsApp .ipsPost_wrap {
	padding-left: 0;
	margin-bottom: 30px;
}

	.ipsPost_wrap.ipsPost_lastPost {
		border-bottom: 0;
	}

.ipsPost_ignored {
	border-top: 4px solid #f6f6f6;
	border-bottom: 4px solid #f6f6f6;
}

.ipsPost {
	font-size: 14px;
	line-height: 1.7;
	background: #fff;
}

	.ipsPost_posted {
		font-size: 13px;
		color: #c4c4c4;
		margin-bottom: 5px;
	}

		.ipsPost_posted .ipsBadge {
			vertical-align: middle;
		}

	.ipsPost_controls {
		font-size: 13px;
		margin-top: 10px;
	}

	.ipsPost_controls li {
		display: inline-block;
		float: right;
		margin: 0 0 0 20px;
		line-height: 28px;
	}

		.ipsPost_controls .ipsPos_left {
			float: left;
			margin-left: 0;
		}

	.ipsPost_controls a {
		text-decoration: none;
		transition: all 0.5s linear;
	}

		.ipsPost_controls a.ipsButton:not( .ipsButton_simple ){
			color: #fff;
		}

	.ipsPost_ignored > .ipsPost {
		margin-left: 200px;
	}

.ipsPost .ipsImage {
	margin: 0 5px 10px 0;
}

.ipsAuthorPane {
	text-align: center;
	padding: 15px 10px;
}

	.ipsAuthorPane h3 {
		font-size: 18px;
		margin-bottom: 10px;
	}

		.ipsAuthorPane h3 a {
			color: #2f2f2f;
			text-decoration: none;
		}

	.ipsAuthorPane_info {
		margin-top: 8px;
	}


.ipsApp .ipsPost_wrap.ipsPost_topicView.ipsPost_bestAnswer {
	background: #7a8871;
	font-size: 15px;
}
	
	.ipsPost_bestAnswer .ipsPost {
		background: #fff;
	}

	.ipsPost_bestAnswer .ipsPost:before {
		width: 0;
		height: 0;
		position: absolute;
		display: block;
		content: "";
		border-width: 15px;
		border-style: solid;
		left: -30px;
		top: 15px;
		border-color: transparent #fcfffa transparent transparent;
	}

.ipsPost_bestAnswer_check {
	font-size: 50px;
	color: #fff;
	display:block;
}

.ipsPost_bestAnswerTitle {
	font-size: 15px;
	font-weight: bold;
	line-height: 24px;
	color: #355416;
}

.ipsPost_bestAnswer .ipsAuthorPane h3 a {
	color: #fff;
}*/]]></css>
</theme>
