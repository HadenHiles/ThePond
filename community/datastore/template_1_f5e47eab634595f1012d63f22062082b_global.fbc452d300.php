<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_admin_global extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = '0b2449a0f3ecc2efcbf0c0545e5a6ce8';\n\tfunction appmenu( $menu, $currentTab ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ul id='acpAppList' class='ipsList_reset' data-controller='core.admin.core.nav'>\n\t<li id='elLogo'>\n\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"&\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\n\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"logo.png\", \"core\", 'admin', false );\n$return .= <<<CONTENT\n' alt=''>\n\t\t<\/a>\n\t<\/li>\n\t\nCONTENT;\n\nforeach ( $menu['tabs'] as $tab => $items ):\n$return .= <<<CONTENT\n\n\t\t<li class='\nCONTENT;\n\nif ( $tab === $currentTab ):\n$return .= <<<CONTENT\nacpAppList_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-tab=\"tab_\nCONTENT;\n$return .= htmlspecialchars( $tab, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( $menu['defaults'][$tab], null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\nCONTENT;\n\n$totalBadge = 0;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $items as $appAndModule => $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $item as $key => $url ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$badgeNumber = NULL; try { $badgeNumber = \\IPS\\Application::load( mb_substr( $appAndModule, 0, mb_strpos( $appAndModule, '_' ) ) )->acpMenuNumber( $url ); } catch( \\Exception $ex ){ } \n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $badgeNumber ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$totalBadge += $badgeNumber;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<span class='acpAppList_icon'>\n\t\t\t\t\t<i class='fa fa-\nCONTENT;\n\n$val = \"menutab__{$tab}_icon\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><\/i>\n\t\t\t\t<\/span>\n\t\t\t\t\nCONTENT;\n\nif ( $totalBadge > 0 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class='ipsNotificationCount'>\nCONTENT;\n$return .= htmlspecialchars( $totalBadge, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/a>\n\t\t\t<ul class='ipsList_reset ipsScrollbar ipsScrollbar_light'>\n\t\t\t\t<li class='acpAppList_header'>\nCONTENT;\n\n$val = \"menutab__{$tab}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nforeach ( $items as $appAndModule => $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li data-menuKey='\nCONTENT;\n$return .= htmlspecialchars( $appAndModule, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<h3>\nCONTENT;\n\n$val = \"menu__{$appAndModule}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t\t<ul class='ipsList_reset'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $item as $key => $url ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$badgeNumber = NULL; try { $badgeNumber = \\IPS\\Application::load( mb_substr( $appAndModule, 0, mb_strpos( $appAndModule, '_' ) ) )->acpMenuNumber( $url ); } catch( \\Exception $ex ){ } \n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $badgeNumber ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( $url, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"menu__{$appAndModule}_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<span class='ipsNotificationCount'>\nCONTENT;\n$return .= htmlspecialchars( $badgeNumber, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( $url, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"menu__{$appAndModule}_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<li id='elHideMenu' class='ipsJS_show'>\n\t\t<a href='#'>\n\t\t\t<i class='fa fa-angle-left' data-action='toggleClose'><\/i>\n\t\t\t<i class='fa fa-angle-right' data-action='toggleOpen'><\/i>\n\t\t<\/a>\n\t<\/li>\n\t<li id='elReorderAppMenu'>\n\t\t<a href='#' data-action='reorder' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'reorder_menu', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-bars'><\/i><\/a>\n\t\t<a href='#' data-action='saveOrder' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save_reorder_menu', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip class='ipsButton ipsButton_important ipsButton_narrow ipsButton_verySmall ipsButton_fullWidth ipsHide'><i class='fa fa-check'><\/i><\/a>\n\t<\/li>\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction blankTemplate( $html ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<meta charset=\"utf-8\">\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeCSS(  );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeJS(  );\n$return .= <<<CONTENT\n\n{$html}\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction block( $title, $content, $margins=TRUE, $class='', $id=NULL, $showTitle=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $title and $showTitle ):\n$return .= <<<CONTENT\n\n<div class='ipsClearfix ipsPad'>\n\t<h1 class='ipsType_pageTitle'>\nCONTENT;\n$return .= htmlspecialchars( $title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h1>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<div class='acpBlock \nCONTENT;\n$return .= htmlspecialchars( $class, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $id !== NULL ):\n$return .= <<<CONTENT\nid=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t{$content}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction breadcrumb(  ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( \\count( \\IPS\\Output::i()->breadcrumb ) ):\n$return .= <<<CONTENT\n\n\t<nav class='ipsBreadcrumb ipsSubNavigation'>\n\t\t<ul id='breadcrumb'>\n\t\t\t\nCONTENT;\n\n$i = 0;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Output::i()->breadcrumb as $k => $b ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t\nCONTENT;\n\nif ( $b[0] === NULL ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$b[1]}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $b[0], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<span>\nCONTENT;\n\n$val = \"{$b[1]}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( ( $i + 1 != \\count( \\IPS\\Output::i()->breadcrumb ) ) ):\n$return .= <<<CONTENT\n<i class='fa fa-angle-right'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\n$i++;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/nav>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction buttons( $buttons ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ul class='ipsToolList ipsToolList_horizontal ipsClearfix'>\n\t\nCONTENT;\n\nforeach ( $buttons as $button ):\n$return .= <<<CONTENT\n\n\t\t<li class='\nCONTENT;\n\nif ( isset( $button['hidden'] ) and $button['hidden'] ):\n$return .= <<<CONTENT\nipsJS_hide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( isset( $button['id'] ) ):\n$return .= <<<CONTENT\nid=\"\nCONTENT;\n$return .= htmlspecialchars( $button['id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t<a\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['link'] ) ):\n$return .= <<<CONTENT\nhref='\nCONTENT;\n$return .= htmlspecialchars( $button['link'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\ttitle='\nCONTENT;\n\n$val = \"{$button['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'\n\t\t\t\tclass='ipsButton ipsButton_alternate ipsButton_small ipsButton_fullWidth \nCONTENT;\n\nif ( isset( $button['class'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $button['class'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'\n\t\t\t\trole=\"button\"\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['id'] ) ):\n$return .= <<<CONTENT\nid=\"\nCONTENT;\n$return .= htmlspecialchars( $button['id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_button\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['target'] ) ):\n$return .= <<<CONTENT\ntarget=\"\nCONTENT;\n$return .= htmlspecialchars( $button['target'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nif ( $button['target'] == '_blank' ):\n$return .= <<<CONTENT\n rel=\"noopener\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['data'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $button['data'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\tdata-\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['hotkey'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\tdata-keyAction='\nCONTENT;\n$return .= htmlspecialchars( $button['hotkey'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t>\n\t\t\t\t\nCONTENT;\n\nif ( $button['icon'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<i class='fa fa-\nCONTENT;\n$return .= htmlspecialchars( $button['icon'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i>&nbsp;\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$val = \"{$button['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\n\t\t\t\t\nCONTENT;\n\nif ( isset($button['dropdown']) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t&nbsp;<i class='fa fa-caret-down'><\/i>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/a>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction controlStrip( $buttons, $otherClasses=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ul class='ipsControlStrip ipsType_noBreak ipsList_reset \nCONTENT;\n\nif ( $otherClasses ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $otherClasses, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsControlStrip>\n\t\nCONTENT;\n\nforeach ( $buttons as $k => $button ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsControlStrip_button \nCONTENT;\n\nif ( isset( $button['hidden'] ) and $button['hidden'] ):\n$return .= <<<CONTENT\nipsJS_hide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( isset( $button['id'] ) ):\n$return .= <<<CONTENT\nid=\"\nCONTENT;\n$return .= htmlspecialchars( $button['id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t<a\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['link'] ) ):\n$return .= <<<CONTENT\nhref='\nCONTENT;\n$return .= htmlspecialchars( $button['link'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\ttitle='\nCONTENT;\n\n$val = \"{$button['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'\n\t\t\t\tdata-ipsTooltip\n\t\t\t\taria-label=\"\nCONTENT;\n\n$val = \"{$button['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"\n\t\t\t\tdata-controlStrip-action=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\n\t\t\t\t\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['class'] ) ):\n$return .= <<<CONTENT\nclass='\nCONTENT;\n$return .= htmlspecialchars( $button['class'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['data'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $button['data'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\tdata-\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['hotkey'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\tdata-keyAction='\nCONTENT;\n$return .= htmlspecialchars( $button['hotkey'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( isset( $button['target'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\ttarget=\"\nCONTENT;\n$return .= htmlspecialchars( $button['target'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\n\t\t\t\t\t\nCONTENT;\n\nif ( $button['target'] == '_blank' ):\n$return .= <<<CONTENT\n rel=\"noopener\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t>\n\t\t\t\t<i class='ipsControlStrip_icon fa fa-fw fa-\nCONTENT;\n$return .= htmlspecialchars( $button['icon'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i>\n\t\t\t\t<span class='ipsControlStrip_item'>\nCONTENT;\n\n$val = \"{$button['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction decision( $blurb, $options ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsAreaBackground_light ipsPad ipsType_center'>\n\t<div class='ipsType_large'><strong>\nCONTENT;\n\n$val = \"{$blurb}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/div>\n\t<br><br>\n\t<ul class='ipsList_inline'>\n\t\t\nCONTENT;\n\nforeach ( $options as $lang => $link ):\n$return .= <<<CONTENT\n\n\t\t\t<li>\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $link, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$val = \"{$lang}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_medium ipsButton_primary'>\nCONTENT;\n\n$val = \"{$lang}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction definitionTable( $rows, $sidebar=NULL, $parse=TRUE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $sidebar !== NULL ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsColumns\">\n\t\t<div class=\"ipsColumn ipsColumn_fluid\">\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<ul class='ipsDataList'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $rows as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size6\">\n\t\t\t\t\t\t\t<strong class=\"title\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $parse ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/strong>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<em class=\"ipsType_light\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'unknown', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/em>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\nCONTENT;\n\nif ( $sidebar !== NULL ):\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div class=\"ipsColumn ipsColumn_fixed ipsColumn_veryWide\">\n\t\t\t{$sidebar}\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction error( $title, $message, $code, $extra ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsMessage ipsMessage_error'>\n\t<span class=\"ipsMessage_code\">\nCONTENT;\n$return .= htmlspecialchars( $code, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t{$message}\n<\/div>\n\n\nCONTENT;\n\nif ( $extra ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsSpacer_top\">\n\t\t<h3 class=\"ipsType_minorHeading\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'error_technical_details', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t<textarea rows=\"13\" style=\"font-family: monospace;\">\nCONTENT;\n$return .= htmlspecialchars( $extra, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/textarea>\n\t\t<p class=\"ipsType_small ipsType_light\">\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'error_technical_details_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'support', 'system_logs_view' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'error_technical_details_logs', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'support', 'get_support' ) ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsType_center ipsSpacer_top\">\n\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=support&controller=support\", \"admin\", \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'get_support', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'get_support', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction globalTemplate( $title,$html,$location=array() ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<!DOCTYPE html>\n<html lang=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Member::loggedIn()->language()->bcp47(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" dir=\"\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->language()->isrtl ):\n$return .= <<<CONTENT\nrtl\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nltr\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>\nCONTENT;\n$return .= htmlspecialchars( $title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/title>\n\t\t<!--[if lt IE 9]>\n\t\t    <script src=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"applications\/core\/interface\/html5shiv\/html5shiv.js\", \"none\", \"\", array(), \\IPS\\Http\\Url::PROTOCOL_RELATIVE ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\"><\/script>\n\t\t<![endif]-->\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeCSS(  );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeJS(  );\n$return .= <<<CONTENT\n\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\t\t<meta name=\"referrer\" content=\"origin-when-cross-origin\">\n\t<\/head>\n\t<body data-baseurl=\"\nCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<CONTENT\n\" class='ipsApp ipsApp_admin \nCONTENT;\n\nif ( ( \\IPS\\IN_DEV || \\IPS\\Settings::i()->theme_designers_mode ) AND !\\IPS\\DEV_HIDE_DEV_TOOLS ):\n$return .= <<<CONTENT\ncAdminDevModeOn\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->cookie['hasJS'] ) ):\n$return .= <<<CONTENT\nipsJS_has\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsJS_none\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->cookie['hideAdminMenu'] ) ):\n$return .= <<<CONTENT\ncAdminHideMenu\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nforeach ( \\IPS\\Output::i()->bodyClasses as $class ):\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= htmlspecialchars( $class, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n' data-controller=\"\nCONTENT;\n\n$return .= htmlspecialchars( implode( ',', \\IPS\\Output::i()->globalControllers ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( isset( \\IPS\\Output::i()->inlineMessage ) ):\n$return .= <<<CONTENT\ndata-message=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Output::i()->inlineMessage, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-pageApp='\nCONTENT;\n$return .= htmlspecialchars( $location['app'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-pageLocation='admin' data-pageModule='\nCONTENT;\n$return .= htmlspecialchars( $location['module'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-pageController='\nCONTENT;\n$return .= htmlspecialchars( $location['controller'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->id ) ):\n$return .= <<<CONTENT\ndata-pageID='\nCONTENT;\n\n$return .= htmlspecialchars( (int) \\IPS\\Request::i()->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t<a href='#content' id='acpJumpToContent'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'jump_to_content', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t<a id='content'><\/a>\n\t\t\nCONTENT;\n\nif ( ( \\IPS\\IN_DEV || \\IPS\\Settings::i()->theme_designers_mode ) AND !\\IPS\\DEV_HIDE_DEV_TOOLS ):\n$return .= <<<CONTENT\n\n\t\t\t<a class='cAdminDevModeWarning' data-ipsDialog data-ipsDialog-content='#elDevModeDialog' data-ipsDialog-size='narrow' data-ipsDialog-title=\"\nCONTENT;\n\nif ( \\IPS\\IN_DEV ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_indev_on_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelseif ( \\IPS\\Settings::i()->theme_designers_mode ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_designersmode_on_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsTooltip title=\"\nCONTENT;\n\nif ( \\IPS\\IN_DEV ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_indev_on', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelseif ( \\IPS\\Settings::i()->theme_designers_mode ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_designersmode_on', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\"><i class='fa fa-warning'><\/i><\/a>\n\t\t\t<div class='cAdminDevModeBar'><\/div>\n\t\t\t<div id='elDevModeDialog' class='ipsHide ipsPad'>\n\t\t\t\t<p class='ipsType_reset ipsSpacer_bottom ipsType_normal'>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\IN_DEV ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_indev_on_blurb', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelseif ( \\IPS\\Settings::i()->theme_designers_mode ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_designersmode_on_blurb', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t\t<p class='ipsType_normal'>\n\t\t\t\t\t<i class='fa fa-warning'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_not_production_tho', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div id='ipsLayout_header' class='ipsClearfix' role='banner' data-controller='core.admin.core.mobileNav'>\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'livesearch', 'livesearch_manage') ):\n$return .= <<<CONTENT\n\n\t\t\t\t<i class='fa fa-search'><\/i> <input type='text' class='' id='acpSearchKeyword' placeholder='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'search_admincp', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<ul id='elAdminControls' class='ipsList_reset'>\n\t\t\t\t<li class='ipsResponsive_showDesktop ipsResponsive_block'>\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::baseUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' target='_blank' rel=\"noopener\">\n\t\t\t\t\t\t<i class='fa fa-home'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'site', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n                \nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'core', 'support', 'get_support' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsResponsive_showDesktop ipsResponsive_block'>\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=support&controller=support\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<i class='fa fa-question-circle'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'support', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n                \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$notificationsCount = \\IPS\\core\\AdminNotification::notificationCount();\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"cAcpNotifications \nCONTENT;\n\nif ( $notificationsCount ):\n$return .= <<<CONTENT\ncAcpNotifications_active\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" id=\"elFullAcpNotifications\" data-ipsMenu data-ipsMenu-closeOnClick=\"false\" data-controller=\"core.admin.core.notificationMenu\">\n\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=overview&controller=notifications\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<i class=\"fa fa-bell\" data-role=\"notificationIcon\"><\/i>\n\t\t\t\t\t\t<span class=\"ipsNotificationCount \nCONTENT;\n\nif ( !$notificationsCount ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-role=\"notificationCount\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $notificationsCount );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/a>\n\t\t\t\t\t<div id='elFullAcpNotifications_menu' class='ipsMenu ipsMenu_wide ipsHide'>\n\t\t\t\t\t\t<div class='ipsMenu_headerBar'>\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=overview&controller=notifications&do=settings\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" class=\"ipsType_light ipsPos_right\"><i class=\"fa fa-cog\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'notification_options', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<h4 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_notifications', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsMenu_innerContent'>\n\t\t\t\t\t\t\t<ol class='ipsDataList' data-role=\"notificationList\"><\/ol>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsMenu_footerBar ipsType_center'>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=overview&controller=notifications\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'><i class='fa fa-bars'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_notifications', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\t<li id='elAdminUser' class='ipsCursor_pointer ipsResponsive_showDesktop ipsResponsive_block' data-ipsMenu>\n\t\t\t\t\t<img src='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Member::loggedIn()->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsUserPhoto ipsUserPhoto_tiny'>\n\t\t\t\t\t<i class='fa fa-angle-down'><\/i>\n\t\t\t\t<\/li>\n\t\t\t\t<li id='elAdminNav' class='ipsResponsive_hideDesktop' data-ipsDrawer data-ipsDrawer-drawerelem=\"#elMobileDrawer\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'admincp_menu', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t<a href=\"#\"><i class=\"fa fa-bars\"><\/i><\/a>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<main class='ipsColumns ipsColumns_noSpacing' id='acpMainLayout'>\n\t\t\t<nav class='ipsColumn ipsColumn_veryWide ipsResponsive_hidePhone' id='acpAppMenu'>\n\t\t\t\t\nCONTENT;\n\nif ( isset( \\IPS\\Output::i()->sidebar['appmenu'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Output::i()->sidebar['appmenu'];\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/nav>\n\t\t\t<div class='ipsColumn ipsColumn_fluid' id='acpMainArea'>\n\t\t\t\t\nCONTENT;\n\nif ( !\\in_array( \\IPS\\Request::i()->controller, array( 'notifications', 'upgrade' ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div data-controller=\"core.admin.core.notificationList\" class=\"cNotificationList\">\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\core\\AdminNotification::notifications( NULL, array( \\IPS\\core\\AdminNotification::SEVERITY_HIGH, \\IPS\\core\\AdminNotification::SEVERITY_CRITICAL ) ) as $notification ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$style = $notification->style();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div class=\"ipsAreaBackground_light ipsPad ipsPhotoPanel ipsPhotoPanel_small ipsPhotoPanel_notPhone cAcpNotificationBanner cAcpNotificationBanner_\nCONTENT;\n$return .= htmlspecialchars( $style, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$dismissible = $notification->dismissible();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $dismissible !== $notification::DISMISSIBLE_NO ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=overview&controller=notifications&do=dismiss&id={$notification->id}\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" class=\"ipsPos_right cAcpNotificationBanner_close\" title=\"\nCONTENT;\n\n$val = \"acp_notification_dismiss_{$dismissible}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip data-action=\"dismiss\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-times\"><\/i>\n\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<i class='fa fa-\nCONTENT;\n\nif ( $style == $notification::STYLE_INFORMATION OR $style == $notification::STYLE_EXPIRE ):\n$return .= <<<CONTENT\ninfo-circle\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nwarning\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n cAcpNotificationBanner_mainIcon ipsPos_left ipsResponsive_hidePhone'><\/i>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h2 class='ipsType_sectionHead'><strong>{$notification->title()}<\/strong><\/h2>\n\t\t\t\t\t\t\t\t\t<div class='ipsType_richText ipsType_normal'>{$notification->body()}<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( !\\in_array( 'acpHeader', \\IPS\\Output::i()->hiddenElements) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( \\IPS\\Output::i()->customHeader ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Output::i()->customHeader;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div id='acpPageHeader'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'admin' )->breadcrumb(  );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class='acpPageHeader_flex'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Output::i()->showTitle ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<h1 class='ipsType_pageTitle ipsType_break'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Output::i()->editUrl ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Output::i()->editUrl, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsType_medium\" data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'edit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-pencil\"><\/i><\/a>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\IN_DEV ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->searchKeywords( 'app=' . \\IPS\\Request::i()->app . '&module=' . \\IPS\\Request::i()->module . '&controller=' . \\IPS\\Request::i()->controller . ( ( isset( \\IPS\\Request::i()->do ) and \\IPS\\Request::i()->do != 'do' ) ? ( '&do=' . \\IPS\\Request::i()->do ) : '' ) . ( ( \\IPS\\Request::i()->controller == 'enhancements' and ( isset( \\IPS\\Request::i()->id ) ) ) ? ( '&id=' . \\IPS\\Request::i()->id ) : '' ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/h1>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset(\\IPS\\Output::i()->sidebar['actions']) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div class='acpToolbar ipsClearfix'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'admin' )->pageButtons( \\IPS\\Output::i()->sidebar['actions'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<div id='acpContent'>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Output::i()->inlineMessage ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<noscript>\n\t\t\t\t\t\t\t<div class=\"ipsMessage ipsMessage_information ipsMessageInABottle\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Output::i()->inlineMessage, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/noscript>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\nCONTENT;\n\nif ( !\\IPS\\Output::i()->responsive ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsResponsive_showPhone ipsResponsive_block ipsType_center'>\n\t\t\t\t\t\t\t<i class='ipsType_huge fa fa-tablet'><\/i><br>\n\t\t\t\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'not_mobile', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\t\t<p class='ipsType_normal'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'not_mobile_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsResponsive_hidePhone'>\n\t\t\t\t\t\t\t{$html}\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t{$html}\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/main>\n\t\t\n\t\t<div id='acpLiveSearchResults' class='ipsHide' data-controller='core.admin.core.liveSearch'>\n\t\t\t<div class='cAcpSearch'>\n\t\t\t\t<div class='cAcpSearch_areas' data-role=\"searchMenu\">\n\t\t\t\t\t<div data-ipsSideMenu data-ipsSideMenu-type='radio'>\n\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Application::allExtensions( 'core', 'LiveSearch', TRUE, 'core', 'Settings' ) as $key => $extension ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $extension->hasAccess() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li class=\"ipsSideMenu_item ipsSideMenu_itemDisabled\" data-ipsMenuValue='\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( method_exists( $extension, 'isDefault' ) and $extension->isDefault() ):\n$return .= <<<CONTENT\ndata-role=\"defaultTab\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n><a href=\"#\">\nCONTENT;\n\n$val = \"acp_search_title_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <span data-role=\"resultCount\" class='ipsSideMenu_itemCount ipsLoading ipsLoading_tiny ipsPad_top'>&nbsp;&nbsp;<\/span><\/a><\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='cAcpSearch_results ipsPad ipsScrollbar' data-role=\"searchResults\"><\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<ul id='elAdminUser_menu' class='ipsMenu ipsMenu_narrow ipsHide'>\n\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=overview&controller=dashboard&do=whatsNew\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'><i class='fa fa-question-circle'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'whats_new_link', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=members&do=adminDetails\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-url='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=members&do=adminDetails\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'change_details', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-size='narrow'><i class='fa fa-pencil'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'change_details', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\n$languages = \\IPS\\Lang::roots();\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\count( $languages ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsMenu_item ipsMenu_subItems'>\n\t\t\t\t\t<a href='#elNavLang_menu' id='elNavLang'><i class='fa fa-globe'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_language', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<ul id='elNavLang_menu' class='ipsMenu ipsMenu_selectable ipsHide'>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $languages as $id => $lang  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsMenu_item\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->acp_language == $id || ( $lang->default && \\IPS\\Member::loggedIn()->acp_language === 0 ) ):\n$return .= <<<CONTENT\n ipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=language&id={$id}\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"\", array(), 0 )->addRef(\\IPS\\Request::i()->url()), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\nif ( $lang->get__icon() ):\n$return .= <<<CONTENT\n<i class='\nCONTENT;\n$return .= htmlspecialchars( $lang->get__icon(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i> \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $lang->title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $lang->default ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'default', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\count( \\IPS\\Theme::themes() ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsMenu_item ipsMenu_subItems'>\n\t\t\t\t\t<a href='#elNavTheme_menu' id='elNavTheme'><i class='fa fa-leaf'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'acp_skin', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<ul id='elNavTheme_menu' class='ipsMenu ipsMenu_selectable ipsHide'>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Theme::themes() as $id => $set  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $set->canAccess() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsMenu_item\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->acp_skin == $id || ($set->is_acp_default && \\IPS\\Member::loggedIn()->acp_skin === 0 ) ):\n$return .= <<<CONTENT\n ipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=theme&id={$id}\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"\", array(), 0 )->addRef(\\IPS\\Request::i()->url()), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"{$set->_title}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $set->is_acp_default ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'default', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsMenu_sep'><hr><\/li>\n\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=login&do=logout\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'><i class='fa fa-power-off'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sign_out', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t<\/ul>\n\t\t\nCONTENT;\n\nif ( isset( \\IPS\\Output::i()->sidebar['mobilenav'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Output::i()->sidebar['mobilenav'];\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/body>\n<\/html>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction message( $message, $type, $debug=NULL, $parse=TRUE, $pad=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $pad ):\n$return .= <<<CONTENT\n<div class=\"ipsPad_half\">\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $debug !== NULL ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsMessage ipsMessage_\nCONTENT;\n$return .= htmlspecialchars( $type, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nif ( $parse ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$val = \"{$message}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t{$message}\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<br><br>\n\t\t<pre>\nCONTENT;\n$return .= htmlspecialchars( $debug, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/pre>\n\t<\/div>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<p class=\"ipsMessage ipsMessage_\nCONTENT;\n$return .= htmlspecialchars( $type, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nif ( $parse ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$val = \"{$message}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t{$message}\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/p>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $pad ):\n$return .= <<<CONTENT\n<\/div>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction mobileNavigation( $menu, $currentTab ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div id='elMobileDrawer' class='ipsDrawer ipsHide'>\n\t<div class='ipsDrawer_menu'>\n\t\t<div class='ipsDrawer_content'>\n\t\t\t<ul id='elUserNav_mobile' class='ipsList_inline signed_in ipsClearfix'>\n\t\t\t\t<li><a href='..\/'><i class='fa fa-home'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'site', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=members&do=adminDetails\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'> <i class='fa fa-pencil'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'my_details', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=login&do=logout\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'><i class='fa fa-power-off'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sign_out', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<\/ul>\n\t\t\t<ul class='ipsDrawer_list'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $menu['tabs'] as $tab => $items ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDrawer_itemParent'>\n\t\t\t\t\t\t<h4 class='ipsDrawer_title'>\n\t\t\t\t\t\t\t<span class='acpAppList_icon'><i class='fa fa-\nCONTENT;\n\n$val = \"menutab__{$tab}_icon\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><\/i><\/span>\n\t\t\t\t\t\t\t<span class='acpAppList_app'>\nCONTENT;\n\n$val = \"menutab__{$tab}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t<\/h4>\n\t\t\t\t\t\t<ul class='ipsDrawer_list'>\n\t\t\t\t\t\t\t<li data-action=\"back\"><a href='#'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'mobile_menu_back', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $items as $appAndModule => $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='ipsDrawer_listTitle'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"menu__{$appAndModule}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $item as $key => $url ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( $url, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"menu__{$appAndModule}_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t\n\t\t\nCONTENT;\n\n$languages = \\IPS\\Lang::getEnabledLanguages();\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\count( \\IPS\\Theme::themes() ) > 1 || \\count( $languages ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class='ipsList_inline ipsType_center ipsPad_half cMobileNav_utilities'>\n\t\t\t\t\nCONTENT;\n\nif ( \\count( \\IPS\\Theme::themes() ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li><a href='#' data-ipsMenu id='elNavThemeMob'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'skin', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-angle-up'><\/i><\/a><\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( \\count( $languages ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li><a href='#' data-ipsMenu id='elNavLangMob'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'language', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-angle-up'><\/i><\/a><\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( \\count( $languages ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t<ul id='elNavLangMob_menu' class='ipsMenu ipsMenu_selectable ipsHide'>\n\t\t\t\nCONTENT;\n\nforeach ( $languages as $id => $lang  ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsMenu_item\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->acp_language == $id || ( $lang->default && \\IPS\\Member::loggedIn()->acp_language === 0 ) ):\n$return .= <<<CONTENT\n ipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=language&id=$id\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\nif ( $lang->get__icon() ):\n$return .= <<<CONTENT\n<i class='\nCONTENT;\n$return .= htmlspecialchars( $lang->get__icon(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i> \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $lang->title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $lang->default ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'default', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\count( \\IPS\\Theme::themes() ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t<ul id='elNavThemeMob_menu' class='ipsMenu ipsMenu_selectable ipsHide'>\n\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Theme::themes() as $id => $set  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $set->canAccess() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsMenu_item\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->acp_skin == $id || ($set->is_acp_default && \\IPS\\Member::loggedIn()->acp_skin === 0 ) ):\n$return .= <<<CONTENT\n ipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=theme&id=$id\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"{$set->_title}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $set->is_acp_default ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'default', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction nodeMoveDeleteContent( $url, $itemLang, $number, $destination ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class=\"ipsPad ipsAreaBackground_reset\">\n\t<p class=\"ipsType_reset ipsSpacer_bottom\">\n\t\t\nCONTENT;\n\nif ( $destination ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$sprintf = array($number, $itemLang, $destination->_title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'node_mass_content_move_blurb', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$sprintf = array($number, $itemLang); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'node_mass_content_delete_blurb', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/p>\n\t<p class=\"ipsType_reset ipsSpacer_bottom\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'node_mass_content_blurb_2', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n<\/div>\n<div class=\"ipsAreaBackground_light ipsClearfix ipsPad ipsType_center\">\n\t<a class=\"ipsButton ipsButton_primary\" \nCONTENT;\n\nif ( $number ):\n$return .= <<<CONTENT\nhref=\"\nCONTENT;\n$return .= htmlspecialchars( $url->setQueryString( 'confirm', 1 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ndisabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'node_mass_content_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction paddedBlock( $content ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsPad_half'>\n\t{$content}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction pageButtons( $buttons ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !empty( $buttons ) ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nusort( $buttons, function ($a, $b ){ if( isset( $a['primary'] ) && $a['primary'] ){ return 1; }else{ return 0;} } );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$hasSecondary = false;\n$return .= <<<CONTENT\n\n\t<ul class=\"ipsList ipsList_inline\" data-controller='core.admin.core.pageActions'>\n\t\t\nCONTENT;\n\nforeach ( $buttons as $action ):\n$return .= <<<CONTENT\n\n\t\t\t<li \nCONTENT;\n\nif ( isset( $action['primary'] ) && $action['primary'] ):\n$return .= <<<CONTENT\nclass='acpToolbar_primary'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\nCONTENT;\n\nif ( !( isset( $action['primary'] ) && $action['primary'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$hasSecondary = true;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<a\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $action['link'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\thref='\nCONTENT;\n\nif ( mb_substr( $action['link'], 0, 1 ) === '#' or preg_match( '\/^[a-z]{3,5}:\\\/\\\/.*$\/', $action['link'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $action['link'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"{$action['link']}\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\thref='#'\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $action['id'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\tid='\nCONTENT;\n$return .= htmlspecialchars( $action['id'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $action['menu'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\tdata-ipsMenu\n\t\t\t\t\t\t\nCONTENT;\n\nif ( !isset( $action['id'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\tid='\nCONTENT;\n\n$id = md5( mt_rand() );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\tclass='ipsButton ipsButton_verySmall \nCONTENT;\n\nif ( isset( $action['primary'] ) && $action['primary'] ):\n$return .= <<<CONTENT\nipsButton_primary\nCONTENT;\n\nelseif ( isset( $action['color'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $action['color'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsButton_normal\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( isset( $action['class'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $action['class'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $action['target'] ) ):\n$return .= <<<CONTENT\ntarget=\"\nCONTENT;\n$return .= htmlspecialchars( $action['target'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nif ( $action['target'] == '_blank' ):\n$return .= <<<CONTENT\n rel=\"noopener\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $action['tooltip'] ) ):\n$return .= <<<CONTENT\ntitle=\"\nCONTENT;\n$return .= htmlspecialchars( $action['tooltip'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsTooltip\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( isset( $action['data'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $action['data'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\tdata-\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t>\n\t\t\t\t\t<i class='fa fa-\nCONTENT;\n$return .= htmlspecialchars( $action['icon'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i> &nbsp;&nbsp;<span data-role=\"title\">\nCONTENT;\n\n$val = \"{$action['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\nCONTENT;\n\nif ( isset( $action['menu'] ) || isset( $action['dropdown'] ) ):\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/a>\n\t\t\t\t\nCONTENT;\n\nif ( isset( $action['menu'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div id='\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu' class='ipsMenu \nCONTENT;\n\nif ( isset( $action['menuClass'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $action['menuClass'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsHide'>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $action['menu'] as $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $item['hr'] ) and $item['hr'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li class='ipsMenu_sep'><hr><\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( isset( $item['class'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $item['class'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $item['link'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( isset( $item['target'] ) ):\n$return .= <<<CONTENT\ntarget='\nCONTENT;\n$return .= htmlspecialchars( $item['target'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nif ( $item['target'] == '_blank' ):\n$return .= <<<CONTENT\n rel=\"noopener\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( isset( $item['data'] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n\nforeach ( $item['data'] as $k => $v ):\n$return .= <<<CONTENT\n data-\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $item['icon'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-\nCONTENT;\n$return .= htmlspecialchars( $item['icon'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i> &nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<span data-role=\"title\">\nCONTENT;\n\n$val = \"{$item['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $hasSecondary ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='acpToolbar_more ipsResponsive_hideDesktop'>\n\t\t\t\t<a href='#' class='ipsButton ipsButton_light ipsButton_verySmall' data-action='expandPageActions'>\n\t\t\t\t\t<span data-role='more'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'more_page_options', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-angle-down'><\/i><\/span>\n\t\t\t\t\t<span data-role='fewer' class='ipsHide'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'fewer_page_options', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-angle-up'><\/i><\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction searchKeywords( $url, $lang=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\IPS\\IN_DEV and !\\IPS\\DEV_HIDE_DEV_TOOLS ):\n$return .= <<<CONTENT\n\n\t<span id='acplsi_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsMenu data-ipsMenu-closeOnClick='false' data-ipsMenu-appendTo='.ipsDialog > div, #acpMainLayout' class='ipsCursor_pointer'>\n\t\t\nCONTENT;\n\nif ( isset( \\IPS\\Dispatcher::i()->searchKeywords[ $url ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t<span class=\"ipsBadge ipsBadge_style1 cACPkeywords\">\n\t\t\t\t<i class=\"fa fa-search\"><\/i> \nCONTENT;\n\n$return .= htmlspecialchars( \\count( \\IPS\\Dispatcher::i()->searchKeywords[ $url ]['keywords'] ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/span>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<span class=\"ipsBadge ipsBadge_style1 cACPkeywords\">\n\t\t\t\t<i class=\"fa fa-search\"><\/i> 0\n\t\t\t<\/span>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/span>\n\t<div id='acplsi_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu' class='ipsMenu ipsMenu_wide ipsHide' data-controller=\"core.admin.core.acpSearchKeywords\" data-url=\"\nCONTENT;\n\n$return .= htmlspecialchars( base64_encode( $url ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=ajax&do=searchKeywords\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\">\n\t\t<div class=\"ipsMenu_headerBar\">\n\t\t\t<h4 class=\"ipsType_sectionHead\"><i class='fa fa-cogs'><\/i> &nbsp;Developer Options<\/h4>\n\t\t<\/div>\n\t\t<div class='ipsPad'>\n\t\t\t<ul class='ipsForm'>\n\t\t\t\t<li class='ipsFieldRow ipsFieldRow_fullWidth ipsClearfix'>\n\t\t\t\t\t<div class='ipsFieldRow_title'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'keywords_language', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsFieldRow_content'>\n\t\t\t\t\t\t<input type='text' data-role=\"lang_key\" value=\"\nCONTENT;\n\nif ( isset( \\IPS\\Dispatcher::i()->searchKeywords[ $url ] ) ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Dispatcher::i()->searchKeywords[ $url ]['lang_key'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelseif ( $lang ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $lang, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nmenu__\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->app, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->module, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->controller, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsFieldRow ipsFieldRow_fullWidth ipsClearfix'>\n\t\t\t\t\t<div class='ipsFieldRow_title'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'keywords_restriction', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsFieldRow_content'>\t\t\t\t\t\n\t\t\t\t\t\t<select data-role=\"restriction\">\n\t\t\t\t\t\t\t\nCONTENT;\n\n$value = isset( \\IPS\\Dispatcher::i()->searchKeywords[ $url ] ) ? \\IPS\\Dispatcher::i()->searchKeywords[ $url ]['restriction'] : \\IPS\\Dispatcher::i()->menuRestriction;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Dispatcher::i()->moduleRestrictions as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\is_array( $v ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<optgroup label=\"\nCONTENT;\n\n$val = \"r__{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $v as $_k => $_v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<option value='\nCONTENT;\n$return .= htmlspecialchars( $_k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $value == $_k ):\n$return .= <<<CONTENT\nselected\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$val = \"r__{$_v}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/option>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/optgroup>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<option value='\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $value == $k ):\n$return .= <<<CONTENT\nselected\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\nCONTENT;\n\n$val = \"{$v}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/option>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/select>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsFieldRow ipsFieldRow_fullWidth ipsClearfix'>\n\t\t\t\t\t<div class='ipsFieldRow_title'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'keywords_keywords', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsFieldRow_content'>\n\t\t\t\t\t\t<div class=\"ipsField_stack\" data-ipsStack>\n\t\t\t\t\t\t\t<ul class=\"ipsList_reset\" data-role=\"stack\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( \\IPS\\Dispatcher::i()->searchKeywords[ $url ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( \\IPS\\Dispatcher::i()->searchKeywords[ $url ]['keywords'] as $word ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<li class='ipsField_stackItem' data-role=\"stackItem\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ipsField_stackDrag ipsDrag\" data-action='stackDrag'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-bars ipsDrag_dragHandle'><\/i>\n\t\t\t\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ipsField_stackDelete ipsCursor_pointer\" data-action=\"stackDelete\">\n\t\t\t\t\t\t\t\t\t\t\t\t&times;\n\t\t\t\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\t\t\t<div data-ipsStack-wrapper><input type='text' data-role=\"keywords\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $word, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"><\/div>\n\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li class='ipsField_stackItem' data-role=\"stackItem\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsField_stackDrag ipsDrag\" data-action='stackDrag'>\n\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-bars ipsDrag_dragHandle'><\/i>\n\t\t\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsField_stackDelete ipsCursor_pointer\" data-action=\"stackDelete\">\n\t\t\t\t\t\t\t\t\t\t\t&times;\n\t\t\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\t\t<div data-ipsStack-wrapper><input type='text' data-role=\"keywords\"><\/div>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<button class=\"ipsField_stackAdd ipsButton ipsButton_light ipsButton_small\" data-action=\"stackAdd\" role=\"button\"><i class='fa fa-plus-circle'><\/i>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'stack_add', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<div class=\"ipsAreaBackground ipsClearfix ipsPad ipsType_center\">\n\t\t\t<button type=\"button\" class=\"ipsButton ipsButton_primary ipsButton_primary ipsButton_fullWidth\" data-action=\"save\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'save', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction shortMessage( $message, $classes=array(), $parse=TRUE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<span class='\nCONTENT;\n\n$return .= htmlspecialchars( implode( ' ', $classes ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\nif ( $parse ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$val = \"{$message}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n{$message}\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/span>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction sidebar( $items, $activeItem ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<ul class=\"ipsList_reset\">\n\t\nCONTENT;\n\nforeach ( $items as $appAndModule => $moduleItems ):\n$return .= <<<CONTENT\n\n\t\t<li class='\nCONTENT;\n\nif ( \\count( $moduleItems ) > 1 ):\n$return .= <<<CONTENT\nhas_sub\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $appAndModule == $activeItem ):\n$return .= <<<CONTENT\nactive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\nCONTENT;\n\nif ( \\count( $moduleItems ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$val = \"menu__{$appAndModule}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<ul class=\"ipsList_reset\">\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $moduleItems as $key => $url ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( $url, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"menu__{$appAndModule}_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $moduleItems as $key => $url ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( $url, null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"menu__{$appAndModule}_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction tabs( $tabNames, $activeId, $defaultContent, $url, $tabParam='tab', $tabClasses='', $panelClasses='' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='acpBlock'>\n\t<div class='ipsTabs \nCONTENT;\n$return .= htmlspecialchars( $tabClasses, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ipsClearfix acpFormTabBar' id='elTabs_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsTabBar data-ipsTabBar-contentArea='#ipsTabs_content_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( \\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\ndata-ipsTabBar-updateURL='false'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t<a href='#elTabs_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action='expandTabs'><i class='fa fa-caret-down'><\/i><\/a>\n\t\t<ul role='tablist'>\n\t\t\t\nCONTENT;\n\nforeach ( $tabNames as $i => $name ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href='\nCONTENT;\n\nif ( $i ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $url->setQueryString( $tabParam, $i ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' id='\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_tab_\nCONTENT;\n$return .= htmlspecialchars( $i, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsTabs_item \nCONTENT;\n\nif ( $i == $activeId ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$val = \"{$name}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' role=\"tab\" aria-selected=\"\nCONTENT;\n\nif ( $i == $activeId ):\n$return .= <<<CONTENT\ntrue\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nfalse\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$name}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\IN_DEV ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->searchKeywords( $url->setQueryString( 'tab', $i )->acpQueryString(), $name );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n\t<section id='ipsTabs_content_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='acpFormTabContent'>\n\t\t\nCONTENT;\n\nforeach ( $tabNames as $i => $name ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $i == $activeId ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div id='ipsTabs_elTabs_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_tab_\nCONTENT;\n$return .= htmlspecialchars( $i, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel' class=\"ipsTabs_panel \nCONTENT;\n$return .= htmlspecialchars( $panelClasses, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" aria-labelledby=\"\nCONTENT;\n\n$return .= htmlspecialchars( md5( $url->acpQueryString() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_tab_\nCONTENT;\n$return .= htmlspecialchars( $i, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" aria-hidden=\"false\">\n\t\t\t\t\t{$defaultContent}\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/section>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction updatebadge( $version, $url, $released='', $blank=TRUE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<a href='\nCONTENT;\n$return .= htmlspecialchars( $url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsType_blendLinks\"\nCONTENT;\n\nif ( $blank ):\n$return .= <<<CONTENT\ntarget='_blank' rel=\"noopener\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-ipstooltip title='\nCONTENT;\n\nif ( $released ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($version, $released); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'new_version_tip_date', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($version); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'new_version_tip', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'new_version_available', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userLink( $member ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $member->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $member->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userPhoto( $member, $size='small' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $member->member_id ):\n$return .= <<<CONTENT\n\n\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $member->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsUserPhoto ipsUserPhoto_\nCONTENT;\n$return .= htmlspecialchars( $size, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\" rel=\"noopener\">\n\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $member->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt='' referrerpolicy='origin-when-cross-origin'>\n\t<\/a>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<span class=\"ipsUserPhoto ipsUserPhoto_\nCONTENT;\n$return .= htmlspecialchars( $size, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $member->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt='' referrerpolicy='origin-when-cross-origin'>\n\t<\/span>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
