<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_front_profile extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = '0b2449a0f3ecc2efcbf0c0545e5a6ce8';\n\tfunction allFollowers( $member, $followers, $followersCount ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_followers', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h3>\n\t<br>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $followersCount > 50 ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$url = \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=followers&id={$member->member_id}\", 'front', 'profile_followers', $member->members_seo_name );\n$return .= <<<CONTENT\n\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<div data-role=\"tablePagination\">\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $url, ceil( $followersCount \/ 50 ), \\IPS\\Request::i()->page ?: 1, 50 );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<br>\n<ul class='ipsDataList'>\n\t\nCONTENT;\n\nif ( \\count( $followers ) ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $followers AS $follower ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsDataItem ipsClearfix \nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load($follower['follow_member_id']), 'tiny', NULL, '', FALSE );\n$return .= <<<CONTENT\n<br>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $follower['follow_member_id'] and ( !\\IPS\\Member::load($follower['follow_member_id'])->members_bitoptions['pp_setting_moderate_followers'] or \\IPS\\Member::loggedIn()->following( 'core', 'member', $follower['follow_member_id'] ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsPos_right'>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollow( 'core', 'member', $follower['follow_member_id'], \\IPS\\Member::load( $follower['follow_member_id'] )->followersCount(), TRUE );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<strong class='ipsDataItem_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::load($follower['follow_member_id'])->link( NULL, FALSE );\n$return .= <<<CONTENT\n<\/strong> \nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\n \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'anon_follower', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<br>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member\\Group::load( \\IPS\\Member::load($follower['follow_member_id'])->member_group_id )->formattedName;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/ul>\n\nCONTENT;\n\nif ( $followersCount > 50 ):\n$return .= <<<CONTENT\n\n\t<br>\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<div data-role=\"tablePagination\">\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $url, ceil( $followersCount \/ 50 ), \\IPS\\Request::i()->page ?: 1, 50 );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction fieldTab( $field, $value ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<h2 class='ipsType_pageTitle ipsSpacer_top'>\nCONTENT;\n\n$val = \"{$field}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n<div class='ipsType_richText ipsType_normal ipsSpacer_top' data-controller='core.front.core.lightboxedImages'>\n\t{$value}\n<\/div>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction followers( $member, $followers ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<h2 class='ipsWidget_title ipsType_reset'>\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id === $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t<a href='#elFollowPref_menu' data-role='followOption' data-ipsMenu data-ipsMenu-selectable='radio' data-ipsMenu-appendTo='#elFollowers' id='elFollowPref' class='ipsType_blendLinks ipsType_small ipsPos_right'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'options', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t<ul id='elFollowPref_menu' class='ipsMenu ipsMenu_selectable ipsMenu_normal ipsHide'>\n\t\t\t<li data-ipsMenuValue='enable' class='ipsMenu_item \nCONTENT;\n\nif ( !$member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=changeFollow&enabled=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'allow_follow', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t<li data-ipsMenuValue='disable' class='ipsMenu_item \nCONTENT;\n\nif ( $member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=changeFollow&enabled=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disallow_follow', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t<li class='ipsMenu_sep'><hr><\/li>\n\t\t\t<li class='ipsPad_half ipsType_center ipsType_light ipsType_medium'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_setting_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$pluralize = array( ($followers !== NULL) ? $member->followersCount() : 0 ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'x_followers', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n<\/h2>\n<div class='ipsWidget_inner'>\n\t\nCONTENT;\n\nif ( \\count( $followers ) ):\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsGrid ipsSpacer_top'>\n\t\t\t\nCONTENT;\n\nforeach ( $followers as $idx => $follower ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $idx <= 11 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsGrid_span3 ipsType_center \nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsTooltip title='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Member::load( $follower['follow_member_id'] )->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\n \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'anon_follower', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load($follower['follow_member_id']), 'mini', NULL, '', FALSE );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<p class='ipsType_center ipsPad_half ipsType_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_followers_yet', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\n\nCONTENT;\n\nif ( $followers !== NULL and $member->followersCount() > 12 ):\n$return .= <<<CONTENT\n\n\t<p class='ipsType_right ipsType_reset ipsPad_half ipsType_small ipsType_light ipsAreaBackground_light'>\n\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=followers&id={$member->member_id}\", null, \"profile_followers\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsType_blendLinks'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_followers', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-right'><\/i><\/a>\n\t<\/p>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction hovercard( $member, $addWarningUrl ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$rnd = mt_rand();\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$referrer = \\IPS\\Request::i()->referrer;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$coverPhoto = $member->coverPhoto();\n$return .= <<<CONTENT\n\n<!-- When altering this template be sure to also check for similar in main profile view -->\n<div class=\"ipsPad_half cUserHovercard\" id=\"elUserHovercard_\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $rnd, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<div class='ipsPageHead_special' id='elProfileHeader_\nCONTENT;\n$return .= htmlspecialchars( $rnd, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.global.core.coverPhoto' data-url=\"\nCONTENT;\n$return .= htmlspecialchars( $member->url()->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-coverOffset='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->offset, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container'>\n\t\t\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->file->url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' alt=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container' style=\"background-color: \nCONTENT;\n$return .= htmlspecialchars( $member->coverPhotoBackgroundColor(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"pattern.png\", \"core\", 'global', false );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' data-action=\"toggleCoverPhoto\" alt=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><img src='\nCONTENT;\n$return .= htmlspecialchars( $member->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsUserPhoto ipsUserPhoto_medium\"><\/a>\n\t\t<h2 class=\"ipsType_reset ipsType_sectionHead ipsTruncate ipsTruncate_line ipsType_blendLinks\"><span class='ipsPageHead_barText_small'><a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $member->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/span><\/h2>\n\t\t<p class='ipsType_reset ipsType_normal'><span class='ipsPageHead_barText_small'>\nCONTENT;\n\n$return .= \\IPS\\Member\\Group::load( $member->member_group_id )->formattedName;\n$return .= <<<CONTENT\n<\/span><\/p>\n\t<\/div>\n\t<br>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->reputationBadge( $member );\n$return .= <<<CONTENT\n\n\t<div class='cUserHovercard_data'>\n\t\t<ul class=\"ipsDataList ipsDataList_reducedSpacing\">\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_member_posts', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $member->member_posts );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/li>\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_joined', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n\n$val = ( $member->joined instanceof \\IPS\\DateTime ) ? $member->joined : \\IPS\\DateTime::ts( $member->joined );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/li>\n            \nCONTENT;\n\nif ( ( !$member->isOnlineAnonymously() ) OR ( $member->isOnlineAnonymously() AND \\IPS\\Member::loggedIn()->isAdmin() ) ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_last_visit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_main\">\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->isOnline() ):\n$return .= <<<CONTENT\n<i class=\"fa fa-circle ipsOnlineStatus_online\" data-ipsTooltip title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->last_activity ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$val = ( $member->last_activity instanceof \\IPS\\DateTime ) ? $member->last_activity : \\IPS\\DateTime::ts( $member->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'never', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n            \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( ( $member->isOnline() AND !$member->isOnlineAnonymously() ) OR ( $member->isOnlineAnonymously() AND \\IPS\\Member::loggedIn()->isAdmin() ) AND $member->location ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_users_location_lang', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_main\">{$member->location()}<\/span>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_see_emails') ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'email', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_main\">\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $member->email, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<br>\n\t\t\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_email_addresses', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->warn_on and !$member->inGroup( explode( ',', \\IPS\\Settings::i()->warn_protected ) ) and ( \\IPS\\Member::loggedIn()->modPermission('mod_see_warn') or ( \\IPS\\Settings::i()->warn_show_own and \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_warnings', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n$return .= htmlspecialchars( $member->warn_level, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n\t<br>\n\t<div class=\"ipsAreaBackground ipsPad ipsClearfix\">\n\t\t<ul class=\"ipsList_inline ipsType_blendLinks\">\n\t\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->member_id and \\IPS\\Member::loggedIn()->member_id !== $member->member_id ) && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm and \\IPS\\Member::loggedIn()->canAccessModule( \\IPS\\Application\\Module::get( 'core', 'messaging' ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=messaging&controller=messenger&do=compose&to={$member->member_id}\", null, \"messenger_compose\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'compose_new', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_sent', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsDialog-forceReload><i class='fa fa-envelope'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_send', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id && $member->canBeIgnored() and \\IPS\\Member::loggedIn()->member_id !== $member->member_id  ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li><a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=ignore&id={$member->member_id}\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"ignore\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\"><i class='fa fa-times-circle'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_ignore', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li><a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=content&id={$member->member_id}\", \"front\", \"profile_content\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\"><i class='fa fa-search'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'find_content', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->canWarn( $member ) || ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and !$member->modPermission() and !$member->isAdmin() ) ) and $member->member_id != \\IPS\\Member::loggedIn()->member_id  ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsPos_right\">\n\t\t\t\t\t<a href=\"#elUserHovercard_\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_more_menu\" id=\"elUserHovercard_\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $rnd, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_more\" title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'more_options', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip data-ipsMenu data-ipsMenu-appendTo=\"#elUserHovercard_\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $rnd, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<i class=\"fa fa-cog ipsType_large\"><\/i> <i class=\"fa fa-caret-down\"><\/i>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') AND $member->member_id != \\IPS\\Member::loggedIn()->member_id ) || \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class=\"ipsMenu ipsMenu_narrow ipsHide\" id=\"elUserHovercard_\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $rnd, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_more_menu\">\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and $member->member_id != \\IPS\\Member::loggedIn()->member_id and !$member->modPermission() and !$member->isAdmin() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->members_bitoptions['bw_is_spammer'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsMenu_item\"><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&do=flagAsSpammer&id={$member->member_id}&s=0&referrer={$referrer}\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-confirm data-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-flag\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsMenu_item\"><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&do=flagAsSpammer&id={$member->member_id}&s=1&referrer={$referrer}\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-confirm><i class=\"fa fa-flag\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsMenu_item\"><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $addWarningUrl, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-destructOnClose><i class=\"fa fa-exclamation-triangle\"><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction memberFollow( $app, $area, $id, $count, $search=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div data-followApp='\nCONTENT;\n$return .= htmlspecialchars( $app, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-followArea='\nCONTENT;\n$return .= htmlspecialchars( $area, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-followID='\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $search ):\n$return .= <<<CONTENT\ndata-buttonType='search'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n data-controller='core.front.core.followButton'>\n\t\nCONTENT;\n\nif ( $search ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberSearchFollowButton( $app, $area, $id, $count );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollowButton( $app, $area, $id, $count );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction memberFollowButton( $app, $area, $id, $count ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsResponsive_hidePhone ipsResponsive_block\">\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->following( $app, $area, $id ) ):\n$return .= <<<CONTENT\n\n\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_this_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip class=\"ipsButton ipsButton_positive\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick><i class='fa fa-check'><\/i><i class='fa fa-user'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span> <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\t\n\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_this_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip class=\"ipsButton ipsButton_primary\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick><i class='fa fa-plus'><\/i><i class='fa fa-user'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class=\"ipsResponsive_showPhone ipsResponsive_block\">\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->following( $app, $area, $id ) ):\n$return .= <<<CONTENT\n\n\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_this_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip class=\"ipsButton ipsButton_positive ipsButton_fullWidth ipsButton_small\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick><i class='fa fa-check'><\/i><i class='fa fa-user'><\/i> <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\t\n\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_this_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip class=\"ipsButton ipsButton_fullWidth ipsButton_small ipsButton_alternate\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick><i class='fa fa-plus'><\/i><i class='fa fa-user'><\/i><\/a>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction memberSearchFollowButton( $app, $area, $id, $count ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->following( $app, $area, $id ) ):\n$return .= <<<CONTENT\n\n\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}&from_search=1\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_this_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class=\"ipsButton ipsButton_small ipsButton_positive ipsButton_fullWidth\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\t\n\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}&from_search=1\", null, \"\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_this_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class=\"ipsButton ipsButton_small ipsButton_primary ipsButton_fullWidth\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction profile( $member, $mainContent, $visitors, $sidebarFields, $followers, $addWarningUrl ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n<!-- When altering this template be sure to also check for similar in the hovercard -->\n<div data-controller='core.front.profile.main' class='ipsBox'>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->profileHeader( $member, false );\n$return .= <<<CONTENT\n\n\t<div data-role=\"profileContent\">\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsColumns ipsColumns_noSpacing ipsColumns_collapseTablet' data-controller=\"core.front.profile.body\">\n\t\t\t<div class='ipsColumn ipsColumn_fixed ipsColumn_veryWide ipsAreaBackground' id='elProfileInfoColumn'>\n\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Application::appIsEnabled('nexus') and \\IPS\\Settings::i()->nexus_subs_enabled and \\IPS\\Settings::i()->nexus_subs_show_public ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"subscription\", \"nexus\", 'front' )->profileSubscription( $member );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->reputation_enabled and \\IPS\\Settings::i()->reputation_show_profile ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->reputation_leaderboard_on and \\IPS\\Settings::i()->reputation_show_days_won_trophy and $member->getReputationDaysWonCount() and $lastDayWon = $member->getReputationLastDayWon() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$formattedDate = $lastDayWon['date']->dayAndMonth() . (  $lastDayWon['date']->format('Y') == \\IPS\\DateTime::ts( time() )->format('Y' ) ? '' : \" \" . $lastDayWon['date']->format('Y') );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div class='ipsLeaderboard_trophy_1 cProfileSidebarBlock ipsSpacer_bottom '>\n\t\t\t\t\t\t\t\t<div class=\"ipsGrid\">\n\t\t\t\t\t\t\t\t\t<div class=\"ipsGrid_span2 ipsType_center\">\n\t\t\t\t\t\t\t\t\t\t<span class='ipsLeaderboard_trophy ipsLeaderboard_trophy_1'>\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-trophy\"><\/i>\n\t\t\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t<div class=\"ipsGrid_span10\">\n\t\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_medium'>\n\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<a class='ipsType_blendLinks' href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=discover&controller=popular&tab=leaderboard&custom_date_start={$lastDayWon['date']->getTimeStamp()}&custom_date_end={$lastDayWon['date']->getTimeStamp()}\", null, \"leaderboard_leaderboard\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->member_id == \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($formattedDate); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_you_won', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($member->name, $formattedDate); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_member_won', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t\t\t<\/strong>\n\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_small'>\nCONTENT;\n\nif ( $member->member_id == \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_you_congrats', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_member_congrats', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->group['gbw_view_reps'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=reputation\", null, \"profile_reputation\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" data-action=\"repLog\" title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_reputation', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<div class='cProfileRepScore ipsPad_half \nCONTENT;\n\nif ( $member->pp_reputation_points > 1 ):\n$return .= <<<CONTENT\ncProfileRepScore_positive\nCONTENT;\n\nelseif ( $member->pp_reputation_points < 0 ):\n$return .= <<<CONTENT\ncProfileRepScore_negative\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ncProfileRepScore_neutral\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_reputation', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t\t\t<span class='cProfileRepScore_points'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $member->pp_reputation_points );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->reputation() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class='cProfileRepScore_title'>\nCONTENT;\n$return .= htmlspecialchars( $member->reputation(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->reputationImage() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<div class='ipsAreaBackground_reset ipsAreaBackground_rounded ipsPad_half ipsType_center'>\n\t\t\t\t\t\t\t\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Theme\", $member->reputationImage() )->url;\n$return .= <<<CONTENT\n' alt=''>\n\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->group['gbw_view_reps'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsPad_half ipsType_right ipsType_light ipsType_small'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_show_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-right'><\/i>\n\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->warn_on and !$member->inGroup( explode( ',', \\IPS\\Settings::i()->warn_protected ) ) and ( \\IPS\\Member::loggedIn()->modPermission('mod_see_warn') or ( \\IPS\\Settings::i()->warn_show_own and \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t<div id='elWarningInfo' class='ipsPad \nCONTENT;\n\nif ( $member->mod_posts || $member->restrict_post || $member->temp_ban ):\n$return .= <<<CONTENT\nipsAreaBackground_negative\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsClearfix'>\n\t\t\t\t\t\t\t\t<i class='ipsPos_left \nCONTENT;\n\nif ( $member->warn_level > 0 || $member->mod_posts || $member->restrict_post || $member->temp_ban ):\n$return .= <<<CONTENT\nfa fa-exclamation-triangle\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nfa fa-circle-o ipsType_light\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><\/i>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$pluralize = array( $member->warn_level ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_warn_level', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$member->mod_posts && !$member->restrict_post && !$member->temp_ban ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_restrictions_applied', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'restrictions_applied', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<ul class='ipsList_bullets ipsSpacer_top ipsSpacer_half'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->mod_posts ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-ipsTooltip title=\"\nCONTENT;\n\nif ( $member->mod_posts == -1 ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_modq_perm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array(\\IPS\\DateTime::ts( $member->mod_posts )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_modq_temp', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_modq', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->restrict_post ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-ipsTooltip title=\"\nCONTENT;\n\nif ( $member->restrict_post == -1 ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_nopost_perm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array(\\IPS\\DateTime::ts( $member->restrict_post )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_nopost_temp', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_nopost', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->temp_ban ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-ipsTooltip title=\"\nCONTENT;\n\nif ( $member->temp_ban == -1 ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_banned_perm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array(\\IPS\\DateTime::ts( $member->temp_ban )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_banned_temp', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_banned', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->canWarn( $member ) || ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and !$member->modPermission() and !$member->isAdmin() ) ) and $member->member_id != \\IPS\\Member::loggedIn()->member_id  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t<ul class='\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->canWarn( $member ) && \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and $member->member_id != \\IPS\\Member::loggedIn()->member_id and !$member->modPermission() and !$member->isAdmin() ):\n$return .= <<<CONTENT\n ipsButton_split \nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n ipsList_inline \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $addWarningUrl, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elWarnUserButton' data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_member', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_member', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and $member->member_id != \\IPS\\Member::loggedIn()->member_id and !$member->modPermission() and !$member->isAdmin() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->members_bitoptions['bw_is_spammer'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&do=flagAsSpammer&id={$member->member_id}&s=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm data-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&do=flagAsSpammer&id={$member->member_id}&s=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $member->warnings( 1 ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<div data-role=\"recentWarnings\" class=''>\n\t\t\t\t\t\t\t\t\t<ol class='ipsDataList'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $member->warnings( 2 ) as $warning ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"ipsDataItem\" id='elWarningOverview_\nCONTENT;\n$return .= htmlspecialchars( $warning->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_icon ipsType_center'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&do=view&id={$member->member_id}&w={$warning->id}\", null, \"warn_view\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-size='narrow' class=\"ipsType_blendLinks\" data-ipsTooltip title='\nCONTENT;\n\n$pluralize = array( $warning->points ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'wan_action_points', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ipsPoints\">\nCONTENT;\n$return .= htmlspecialchars( $warning->points, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $warning->canDelete() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $warning->url('delete')->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'revoke_this_warning', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip data-action=\"revoke\" class='ipsPos_right ipsButton ipsButton_small ipsButton_light ipsButton_narrow' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'revoke_this_warning', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-size='medium'><i class=\"fa fa-undo\"><\/i><\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&do=view&id={$member->member_id}&w={$warning->id}\", null, \"warn_view\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-showFrom='#elWarningOverview_\nCONTENT;\n$return .= htmlspecialchars( $warning->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog-size='narrow' class=\"ipsType_blendLinks\" title=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"ipsType_reset ipsType_medium ipsType_unbold\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->warnings_acknowledge ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $warning->acknowledged ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong class='ipsType_success' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warning_acknowledged', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-check-circle'><\/i><\/strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong class='ipsType_light' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warning_not_acknowledged', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-circle-o'><\/i><\/strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"core_warn_reason_{$warning->reason}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class='ipsDataItem_meta ipsType_light'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::load( $warning->moderator )->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\n$val = ( $warning->date instanceof \\IPS\\DateTime ) ? $warning->date : \\IPS\\DateTime::ts( $warning->date );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_center ipsType_small ipsPad_half'>\n\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&id={$member->member_id}\", null, \"warn_list\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_verySmall ipsButton_light ipsButton_fullWidth' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_warnings', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-remoteVerify='false' data-ipsDialog-remoteSubmit='false' data-ipsDialog-title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_warnings', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_c', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n                        \nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and !$member->inGroup( explode( ',', \\IPS\\Settings::i()->warn_protected ) ) and \\IPS\\Member::loggedIn()->member_id != $member->member_id ):\n$return .= <<<CONTENT\n\n                            \nCONTENT;\n\nif ( $member->members_bitoptions['bw_is_spammer'] ):\n$return .= <<<CONTENT\n\n                                <a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&do=flagAsSpammer&id={$member->member_id}&s=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall ipsButton_fullWidth' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm data-confirmSubMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag_confirm', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n                            \nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n                                <a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&do=flagAsSpammer&id={$member->member_id}&s=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall ipsButton_fullWidth' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n                            \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n                        \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n                    \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $followers ) || \\IPS\\Member::loggedIn()->member_id === $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsWidget ipsWidget_vertical cProfileSidebarBlock ipsBox ipsSpacer_bottom' id='elFollowers' data-feedID='member-\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.front.profile.followers'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->followers( $member, $followers );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t \t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t \t\t\t\t\nCONTENT;\n\nif ( $member->group['g_icon'] || $member->member_title || $member->rank['title'] || $member->rank['image'] || ( ( ( $member->isOnline() AND !$member->isOnlineAnonymously() ) OR ( $member->isOnlineAnonymously() AND \\IPS\\Member::loggedIn()->isAdmin() ) ) AND $member->location ) || ( $member->birthday AND \\IPS\\Settings::i()->profile_birthday_type == 'public' or ( \\IPS\\Settings::i()->profile_birthday_type == 'private' and \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsWidget ipsWidget_vertical cProfileSidebarBlock ipsBox ipsSpacer_bottom' data-location='defaultFields'>\n\t\t\t\t\t\t\t<h2 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_about', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<div class='ipsWidget_inner ipsPad'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->group['g_icon']  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div class='ipsType_center ipsPad_half'><img src='\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Theme\", $member->group['g_icon'] )->url;\n$return .= <<<CONTENT\n' alt=''><\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing cProfileFields'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( ( ( $member->isOnline() AND !$member->isOnlineAnonymously() ) OR ( $member->isOnlineAnonymously() AND \\IPS\\Member::loggedIn()->isAdmin() ) ) AND $member->location ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3 ipsType_break\"><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_users_location_lang', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ipsDataItem_main\">{$member->location()}<\/span>\n\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->member_title || $member->rank['title'] || $member->rank['image'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3 ipsType_break'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_rank', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_generic ipsType_break'>\n\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->member_title ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $member->member_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $member->rank['title'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $member->rank['title'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t{$member->rank['image']}\n\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->birthday AND \\IPS\\Settings::i()->profile_birthday_type == 'public' or ( \\IPS\\Settings::i()->profile_birthday_type == 'private' and \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3 ipsType_break'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'bday', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic'>\nCONTENT;\n$return .= htmlspecialchars( $member->birthday, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $sidebarFields as $group => $fields ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $fields ) AND \\count( array_filter( $fields, function( $fieldValue ){ return $fieldValue['value']; } ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsWidget ipsWidget_vertical cProfileSidebarBlock ipsBox ipsSpacer_bottom' data-location='customFields'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $group != 'core_pfieldgroups_0' ):\n$return .= <<<CONTENT\n\n                                <h2 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n\n$val = \"{$group}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n                            \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n                            <div class='ipsWidget_inner ipsPad'>\n\t\t\t\t\t\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing cProfileFields'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $fields as $field => $value ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $value['value'] !== \"\" ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<li class='ipsDataItem ipsType_break'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $value['custom'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t{$value['value']}\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3 ipsType_break'><strong>\nCONTENT;\n\n$val = \"{$field}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_generic'><div class='ipsType_break ipsContained'>{$value['value']}<\/div><\/div>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_see_emails') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsWidget ipsWidget_vertical cProfileSidebarBlock ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t<h2 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_contact', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<div class='ipsWidget_inner ipsPad'>\n\t\t\t\t\t\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_email', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic'>\n\t\t\t\t\t\t\t\t\t\t\t<div class='ipsType_break ipsContained'><a href='mailto:\nCONTENT;\n$return .= htmlspecialchars( $member->email, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'email_this_user', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $member->email, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/div>\n\t\t\t\t\t\t\t\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_email_addresses', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( !empty( $visitors ) || \\IPS\\Member::loggedIn()->member_id == $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsWidget ipsWidget_vertical cProfileSidebarBlock ipsBox ipsSpacer_bottom' data-controller='core.front.profile.toggleBlock'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \\IPS\\Request::i()->app )->recentVisitorsBlock( $member, $visitors );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\n\t\t\t<\/div>\n\t\t\t<section class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t{$mainContent}\n\t\t\t<\/section>\n\t\t<\/div>\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction profileActivity( $member, $latestActivity, $statusForm=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-controller=\"core.front.statuses.statusFeed\">\n\t\nCONTENT;\n\nif ( $statusForm ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsAreaBackground ipsPad ipsSpacer_bottom'>\n\t\t\t<div class='ipsComposeArea ipsComposeArea_withPhoto ipsClearfix ipsContained' data-role='newStatus'>\n\t\t\t\t<div class='ipsPos_left ipsResponsive_hidePhone ipsResponsive_block'>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::loggedIn(), 'small' );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t<div class='ipsComposeArea_editor'>\n\t\t\t\t\t{$statusForm}\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\nCONTENT;\n\nelseif ( !\\count( $latestActivity ) ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPad ipsType_center ipsType_large ipsType_light'>\n\t\t\t\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_recent_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( $statusForm or \\count( $latestActivity ) ):\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsStream ipsList_reset' data-role='activityStream' id='elProfileActivityOverview'>\n\t\t\t\nCONTENT;\n\nforeach ( $latestActivity as $activity ):\n$return .= <<<CONTENT\n\n\t\t\t\t{$activity->html()}\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction profileClubs( $member, $clubs, $pagination ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( \\count( $clubs ) ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( $pagination ):\n$return .= <<<CONTENT\n\n\t\t{$pagination}\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t<ul class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='400' data-ipsGrid-maxItemSize='600' data-ipsGrid-equalHeights='row'>\n\t\t\nCONTENT;\n\nforeach ( $clubs as $club ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsGrid_span6 ipsBox'>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"clubs\", \"core\" )->clubCard( $club );\n$return .= <<<CONTENT\n<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\n\t\nCONTENT;\n\nif ( $pagination ):\n$return .= <<<CONTENT\n\n\t\t{$pagination}\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<p class='ipsType_light ipsType_large ipsType_center'>\n\t\t\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_no_clubs', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t<\/p>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction profileHeader( $member, $small=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$coverPhoto = $member->coverPhoto();\n$return .= <<<CONTENT\n\n<header data-role=\"profileHeader\">\n\t<div class='ipsPageHead_special \nCONTENT;\n\nif ( $small === true ):\n$return .= <<<CONTENT\ncProfileHeaderMinimal\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' id='elProfileHeader' data-controller='core.global.core.coverPhoto' data-url=\"\nCONTENT;\n$return .= htmlspecialchars( $member->url()->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-coverOffset='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->offset, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container'>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->lazy_load_enabled ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<img src='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Text\\Parser::blankImage(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-src='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->file->url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' data-action=\"toggleCoverPhoto\" alt=''>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $coverPhoto->file->url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' data-action=\"toggleCoverPhoto\" alt=''>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container' style=\"background-color: \nCONTENT;\n$return .= htmlspecialchars( $member->coverPhotoBackgroundColor(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"pattern.png\", \"core\", 'global', false );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' data-action=\"toggleCoverPhoto\" alt=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class='ipsButton_split' id='elEditProfile' data-hideOnCoverEdit>\n\t\t\t\t<li>\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=edit&id={$member->member_id}\", \"front\", \"edit_profile\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_overlaid' data-ipsDialog data-ipsDialog-modal='true' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<i class='fa fa-pencil'><\/i>&nbsp;<span class='ipsResponsive_hidePhone ipsResponsive_inline'>&nbsp;&nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nif ( $coverPhoto->editable ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t<a href='#elEditPhoto_menu' data-hideOnCoverEdit class='ipsButton ipsButton_overlaid' data-ipsMenu id='elEditPhoto' data-role='coverPhotoOptions'>\n\t\t\t\t\t\t<i class='fa fa-picture-o'><\/i>&nbsp;<span class='ipsResponsive_hidePhone ipsResponsive_inline'>&nbsp;&nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit_cover_photo_tab', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/span>\n\t\t\t\t\t<\/a>\n\t\t\t\t\t<ul class='ipsMenu ipsMenu_auto ipsHide' id='elEditPhoto_menu'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsMenu_item' data-role=\"photoEditOption\">\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url()->setQueryString( 'do', 'coverPhotoRemove' )->csrf(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action='removeCoverPhoto'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_remove', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t<li class='ipsMenu_item ipsHide' data-role=\"photoEditOption\">\n\t\t\t\t\t\t\t<a href='#' data-action='positionCoverPhoto'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_reposition', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsMenu_item'>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url()->setQueryString( 'do', 'coverPhotoUpload' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_add', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_add', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\t\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsColumns ipsColumns_collapsePhone' data-hideOnCoverEdit>\n\t\t\t<div class='ipsColumn ipsColumn_fixed ipsColumn_narrow ipsPos_center' id='elProfilePhoto'>\n\t\t\t\t\nCONTENT;\n\nif ( $member->pp_main_photo and ( mb_substr( $member->pp_photo_type, 0, 5 ) === 'sync-' or $member->pp_photo_type === 'custom' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Profile\", $member->pp_main_photo )->url;\n$return .= <<<CONTENT\n\" data-ipsLightbox class='ipsUserPhoto ipsUserPhoto_xlarge'>\t\t\t\t\t\n\t\t\t\t\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $member->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt=''>\n\t\t\t\t\t<\/a>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class='ipsUserPhoto ipsUserPhoto_xlarge'>\t\t\t\t\t\n\t\t\t\t\t\t<img src='\nCONTENT;\n$return .= htmlspecialchars( $member->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt=''>\n\t\t\t\t\t<\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ) AND explode( ':', $member->group['g_photo_max_vars'] )[0] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=editPhoto&id={$member->member_id}\", \"front\", \"edit_profile_photo\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_verySmall ipsButton_light ipsButton_narrow' data-action='editPhoto' data-ipsDialog data-ipsDialog-forceReload='true' data-ipsDialog-modal='true' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit_photo_tab', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit_photo_tab', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-photo'><\/i><\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t<div class='ipsPos_left ipsPad cProfileHeader_name ipsType_normal'>\n\t\t\t\t\t<h1 class='ipsType_reset ipsPageHead_barText'>\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $member->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->group['g_view_displaynamehistory'] AND $member->hasNameChanges() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url()->setQueryString( 'do', 'namehistory' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='cProfileHeader_history ipsType_large ipsPos_right' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'membername_history', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip data-ipsDialog data-ipsDialog-modal='true' data-ipsDialog-size='narrow' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'membername_history', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t<i class='fa fa-history'><\/i><\/span>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n                        \nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id AND \\IPS\\Member::loggedIn()->member_id === $member->member_id AND $member->isOnlineAnonymously() ):\n$return .= <<<CONTENT\n\n                            <span class='cProfileHeader_history ipsType_large ipsPos_right' title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_is_currently_anon', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip>\n                                <i class='fa fa-eye-slash'><\/i>\n                            <\/span>\n                        \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/h1>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<span class='ipsPageHead_barText'>\nCONTENT;\n\n$return .= \\IPS\\Member\\Group::load( $member->member_group_id )->formattedName;\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<ul class='ipsList_inline ipsPad ipsResponsive_hidePhone ipsResponsive_block ipsPos_left'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id and ( !$member->members_bitoptions['pp_setting_moderate_followers'] or \\IPS\\Member::loggedIn()->following( 'core', 'member', $member->member_id ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollow( 'core', 'member', $member->member_id, $member->followersCount() );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm and \\IPS\\Member::loggedIn()->canAccessModule( \\IPS\\Application\\Module::get( 'core', 'messaging' ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=messaging&controller=messenger&do=compose&to={$member->member_id}\", null, \"messenger_compose\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'compose_new', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_sent', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary'><i class='fa fa-envelope'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'>&nbsp; \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_send', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a><\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class='ipsGrid ipsAreaBackground ipsPad ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\nCONTENT;\n\n$span = 1;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id && \\IPS\\Member::loggedIn()->member_id != $member->member_id and !$member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$span++;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id && \\IPS\\Member::loggedIn()->member_id && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$span++;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id && \\IPS\\Member::loggedIn()->member_id != $member->member_id and !$member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsGrid_span\nCONTENT;\n\nif ( $span == 1 ):\n$return .= <<<CONTENT\n12\nCONTENT;\n\nelseif ( $span == 2 ):\n$return .= <<<CONTENT\n6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n4\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollow( 'core', 'member', $member->member_id, $member->followersCount() );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id && \\IPS\\Member::loggedIn()->member_id && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm ):\n$return .= <<<CONTENT\n\n\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=messaging&controller=messenger&do=compose&to={$member->member_id}\", null, \"messenger_compose\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'compose_new', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_sent', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsDialog-forceReload class='ipsGrid_span\nCONTENT;\n\nif ( $span == 1 ):\n$return .= <<<CONTENT\n12\nCONTENT;\n\nelseif ( $span == 2 ):\n$return .= <<<CONTENT\n6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n4\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsButton ipsButton_alternate ipsButton_small'><i class='\n\t\t\tfa fa-envelope'><\/i> <i class='fa fa-caret-right'><\/i><\/a>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div data-role='switchView' class='ipsGrid_span\nCONTENT;\n\nif ( $span == 1 ):\n$return .= <<<CONTENT\n12\nCONTENT;\n\nelseif ( $span == 2 ):\n$return .= <<<CONTENT\n6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n4\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t<div data-action=\"goToProfile\" data-type='phone' class='\nCONTENT;\n\nif ( $small != true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_small ipsButton_fullWidth' title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_profile', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-user'><\/i><\/a>\n\t\t\t<\/div>\n\t\t\t<div data-action=\"browseContent\" data-type='phone' class='\nCONTENT;\n\nif ( $small == true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=content&id={$member->member_id}\", \"front\", \"profile_content\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_alternate ipsButton_small ipsButton_fullWidth'  title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_content', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-newspaper-o'><\/i><\/a>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\n\t<div id='elProfileStats' class='ipsClearfix'>\n\t\t<div data-role='switchView' class='ipsResponsive_hidePhone ipsResponsive_block'>\n\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_veryLight ipsButton_medium ipsPos_right \nCONTENT;\n\nif ( $small != true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-action=\"goToProfile\" data-type='full' title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_profile', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-user'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'>&nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_view_profile', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t\t<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=content&id={$member->member_id}\", \"front\", \"profile_content\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_light ipsButton_medium ipsPos_right \nCONTENT;\n\nif ( $small == true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-action=\"browseContent\" data-type='full' title=\"\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_content', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-newspaper-o'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'>&nbsp;\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id === $member->member_id ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_browse_my_content', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_browse_content', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t<\/div>\n\t\t<ul class='ipsList_inline ipsPos_left'>\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_member_posts', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $member->member_posts );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'joined', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\nCONTENT;\n\n$val = ( $member->joined instanceof \\IPS\\DateTime ) ? $member->joined : \\IPS\\DateTime::ts( $member->joined );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n            \nCONTENT;\n\nif ( ( !$member->isOnlineAnonymously() ) OR ( $member->isOnlineAnonymously() AND \\IPS\\Member::loggedIn()->isAdmin() ) ):\n$return .= <<<CONTENT\n\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_last_visit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t<span>\n\t\t\t\t\t\nCONTENT;\n\nif ( ( $member->isOnline() AND !$member->isOnlineAnonymously() ) OR ( $member->isOnlineAnonymously() AND \\IPS\\Member::loggedIn()->isAdmin() ) ):\n$return .= <<<CONTENT\n\n                    \t<i class=\"fa fa-circle ipsOnlineStatus_online\" data-ipsTooltip title='\nCONTENT;\n\nif ( $member->isOnlineAnonymously() ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now_anon', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelseif ( $member->isOnline() ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><\/i>\n                    \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n                    \nCONTENT;\n\nif ( $member->last_activity ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$val = ( $member->last_activity instanceof \\IPS\\DateTime ) ? $member->last_activity : \\IPS\\DateTime::ts( $member->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'never', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n            \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->reputation_leaderboard_on and \\IPS\\Settings::i()->reputation_show_days_won_trophy and $member->getReputationDaysWonCount() ):\n$return .= <<<CONTENT\n\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_days_won_count', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t<span data-ipsTooltip title='\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_days_won_count_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $member->getReputationDaysWonCount() );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n<\/header>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction profileTabs( $member, $tabs, $activeTab, $activeTabContents ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\count( $tabs ) > 1 ):\n$return .= <<<CONTENT\n\n\t<div class='ipsTabs ipsTabs_stretch ipsClearfix' id='elProfileTabs' data-ipsTabBar data-ipsTabBar-contentArea='#elProfileTabs_content'>\n\t\t<a href='#elProfileTabs' data-action='expandTabs'><i class='fa fa-caret-down'><\/i><\/a>\n\t\t<ul role=\"tablist\">\n\t\t\t\nCONTENT;\n\nforeach ( $tabs as $tab => $title ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url()->setQueryString( 'tab', $tab ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elProfileTab_\nCONTENT;\n$return .= htmlspecialchars( $tab, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( $activeTab == $tab ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' role=\"tab\" aria-selected=\"\nCONTENT;\n\nif ( $activeTab == $tab ):\n$return .= <<<CONTENT\ntrue\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nfalse\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"{$title}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<div id='elProfileTabs_content' class='ipsTabs_panels ipsPad_double ipsAreaBackground_reset'>\n\t\nCONTENT;\n\nforeach ( $tabs as $tab => $title ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $activeTab == $tab ):\n$return .= <<<CONTENT\n\n\t\t\t<div id=\"ipsTabs_elProfileTabs_elProfileTab_\nCONTENT;\n$return .= htmlspecialchars( $tab, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel\" class='ipsTabs_panel ipsAreaBackground_reset'>\n\t\t\t\t{$activeTabContents}\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction recentVisitorsBlock( $member, $visitors ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $member->members_bitoptions['pp_setting_count_visitors'] ):\n$return .= <<<CONTENT\n\n\t\n\t<h2 class='ipsWidget_title ipsType_reset'>\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=visitors&id=$member->member_id\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='ipsType_light ipsType_normal ipsPos_right ipsFaded ipsFaded_more ipsFaded_withHover' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hide_recent_visitors', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='disable'><i class='fa fa-times'><\/i><\/a>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_recent_visitors', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/h2>\n\t<div class='ipsWidget_inner ipsPad'>\n\t\t<span class='ipsType_light'>\n\t\t\t\nCONTENT;\n\n$pluralize = array( $member->members_profile_views ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_views', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t<\/span>\n\t\t\nCONTENT;\n\nif ( \\is_array( $visitors ) AND \\count( $visitors )  ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing ipsSpacer_top'>\n\t\t\t\nCONTENT;\n\nforeach ( $visitors as $visitor ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t<div class='ipsType_center ipsDataItem_icon'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $visitor['member'], 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t<h3 class='ipsDataItem_title'>{$visitor['member']->link()}<\/h3>\n\t\t\t\t\t\t<p class='ipsDataItem_meta ipsType_light'>\nCONTENT;\n\n$val = ( $visitor['visit_time'] instanceof \\IPS\\DateTime ) ? $visitor['visit_time'] : \\IPS\\DateTime::ts( $visitor['visit_time'] );$return .= $val->html();\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsType_center ipsType_medium'>\n\t\t\t\t<p class='ipsType_light'>\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_recent_visitors', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<h2 class='ipsWidget_title ipsType_reset'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_recent_visitors', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/h2>\n\t<div class='ipsWidget_inner ipsPad'>\n\t\t<div class='ipsType_center ipsType_medium'>\n\t\t\t<p class='ipsType_light'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disabled_recent_visitors', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n            \nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t<a href='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=visitors&id={$member->member_id}&state=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n' class='' data-action='enable'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enable', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n            \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction singleStatus( $member, $status ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsPad' id='elSingleStatusUpdate'>\n\t<h2 class='ipsType_pageTitle \nCONTENT;\n\nif ( !isset( \\IPS\\Request::i()->status ) ):\n$return .= <<<CONTENT\nipsSpacer_top\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'viewing_single_status', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/h2>\n\t<p class='ipsType_reset ipsType_normal ipsSpacer_bottom'>\n\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $member->url()->setQueryString( array( 'do' => 'content', 'type' => 'core_statuses_status', 'change_section' => 1 ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-caret-left'><\/i> \nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_statuses_by_x', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t<\/p>\n\t<div data-controller='core.front.profile.statusFeed' class='cStatusUpdates ipsSpacer_top'>\n\t\t<ol class='ipsType_normal ipsList_reset' data-role='commentFeed'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"statuses\", \"core\" )->statusContainer( $status );\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction tableRow( $table, $headers, $members ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nforeach ( $members as $member ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$loadedMember = \\IPS\\Member::load( $member->member_id );\n$return .= <<<CONTENT\n\n\t<li class='ipsDataItem'>\n\t\t<div class='ipsDataItem_icon'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $loadedMember, 'medium' );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div class='ipsDataItem_main'>\n\t\t\t<h3 class='ipsType_sectionHead'>{$loadedMember->link()}<\/h3> \nCONTENT;\n\nif ( $loadedMember->isOnline() ):\n$return .= <<<CONTENT\n<i class=\"fa fa-circle ipsOnlineStatus_online\" data-ipsTooltip title='\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<br>\n\t\t\t<span class='ipsType_normal'>\nCONTENT;\n\n$return .= \\IPS\\Member\\Group::load( $member->member_group_id )->formattedName;\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<ul class='ipsList_inline ipsType_light'>\n\t\t\t\t<li><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_member_posts', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n: \nCONTENT;\n$return .= htmlspecialchars( $loadedMember->member_posts, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/li>\n\t\t\t\t<li>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_joined', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$val = ( $loadedMember->joined instanceof \\IPS\\DateTime ) ? $loadedMember->joined : \\IPS\\DateTime::ts( $loadedMember->joined );$return .= $val->html();\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nif ( $loadedMember->last_activity ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_last_visit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$val = ( $loadedMember->last_activity instanceof \\IPS\\DateTime ) ? $loadedMember->last_activity : \\IPS\\DateTime::ts( $loadedMember->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t\nCONTENT;\n\nif ( $table->canModerate() ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsDataItem_modCheck'>\n\t\t\t\t<span class='ipsCustomInput'>\n\t\t\t\t\t<input type='checkbox' data-role='moderation' name=\"moderate[\nCONTENT;\n$return .= htmlspecialchars( $member->member_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n]\" data-actions=\"\nCONTENT;\n\n$return .= htmlspecialchars( implode( ' ', $table->multimodActions( $member ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-state=''>\n\t\t\t\t\t<span><\/span>\n\t\t\t\t<\/span>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/li>\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userContent( $member, $types, $currentAppModule, $currentType, $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$baseUrl = \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=content\", 'front', 'profile_content', $member->members_seo_name );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n<div data-controller='core.front.profile.main'>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->profileHeader( $member, true );\n$return .= <<<CONTENT\n\n\t<div data-role=\"profileContent\">\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsColumns ipsColumns_collapsePhone ipsSpacer_top\">\n\t\t\t<div class=\"ipsColumn ipsColumn_wide\">\n\t\t\t\t<div class=\"ipsSideMenu ipsAreaBackground_light ipsPad\" id=\"modcp_menu\" data-ipsTabBar data-ipsTabBar-contentArea='#elUserContent' data-ipsTabBar-itemselector=\".ipsSideMenu_item\" data-ipsTabBar-activeClass=\"ipsSideMenu_itemActive\" data-ipsSideMenu>\n\t\t\t\t\t<h3 class=\"ipsSideMenu_mainTitle ipsAreaBackground_light ipsType_medium\">\n\t\t\t\t\t\t<a href=\"#user_content\" class=\"ipsPad_double\" data-action=\"openSideMenu\"><i class=\"fa fa-bars\"><\/i> &nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'user_content_type', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;<i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<\/h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $baseUrl->setQueryString( array( 'change_section' => 1 ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( !$currentType ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_activity', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $types as $app => $_types ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<h4 class='ipsSideMenu_subTitle'>\nCONTENT;\n\n$val = \"module__{$app}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $_types as $key => $class ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $baseUrl->setQueryString( array( 'type' => $key, 'change_section' => 1 ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $currentType == $key ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"{$class::$title}_pl\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\t\t\t\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsColumn ipsColumn_fluid\" id='elUserContent'>\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->userContentSection( $member, $types, $currentAppModule, $currentType, $table );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userContentSection( $member, $types, $currentAppModule, $currentType, $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsBox'>\n\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\nif ( !$currentAppModule ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_content_by_user', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack( $types[ $currentAppModule ][ $currentType ]::$title . '_pl' ), $member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'content_by_user', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/h2>\n\t{$table}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userContentStream( $member, $results, $pagination ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div data-baseurl=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=content&id={$member->member_id}&all_activity=1&page=1\", null, \"profile_content\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" data-resort=\"listResort\" data-tableid=\"topics\" data-controller=\"core.global.core.table\">\n\t<div data-role=\"tableRows\">\n\t\t\nCONTENT;\n\nif ( $pagination ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t\t<div data-role=\"tablePagination\">\n\t\t\t\t\t{$pagination}\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsDataList ipsDataList_large cSearchActivity ipsStream ipsPad'>\n\t\t\t\nCONTENT;\n\nforeach ( $results as $activity ):\n$return .= <<<CONTENT\n\n\t\t\t\t{$activity->html()}\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\t\nCONTENT;\n\nif ( $pagination ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t\t{$pagination}\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userReputation( $member, $types, $currentAppModule, $currentType, $table, $reactions ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n<div data-controller='core.front.profile.main'>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->profileHeader( $member, true );\n$return .= <<<CONTENT\n\n\t<br>\n\t<div data-role=\"profileContent\">\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsColumns ipsColumns_collapsePhone ipsSpacer_top\">\n\t\t\t<aside class=\"ipsColumn ipsColumn_wide\">\n\t\t\t\t<div class=\"cProfileRepScore ipsPad_half \nCONTENT;\n\nif ( $member->pp_reputation_points > 1 ):\n$return .= <<<CONTENT\ncProfileRepScore_positive\nCONTENT;\n\nelseif ( $member->pp_reputation_points < 0 ):\n$return .= <<<CONTENT\ncProfileRepScore_negative\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ncProfileRepScore_neutral\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_reputation', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t<span class='cProfileRepScore_points'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $member->pp_reputation_points );\n$return .= <<<CONTENT\n<\/span>\t\t\n\t\t\t\t<\/div>\n\t\t\t\t<br>\n\t\t\t\t\nCONTENT;\n\nif ( \\count( $reactions['given'] ) OR \\count( $reactions['received'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class=\"ipsPad_half ipsBox\">\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $reactions['given'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_reactions_given', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<div class='ipsPad_half ipsGrid'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $reactions['given'] as $reaction ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t\t\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Reaction\", $reaction['reaction']->_icon )->url;\n$return .= <<<CONTENT\n' width=\"20\" height=\"20\" alt='\nCONTENT;\n$return .= htmlspecialchars( $reaction['reaction']->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsTooltip> \n\t\t\t\t\t\t\t\t\t\t<span class='ipsCommentCount'>\nCONTENT;\n$return .= htmlspecialchars( $reaction['count'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $reactions['received'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_reactions_received', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<div class='ipsPad_half ipsGrid'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $reactions['received'] as $reaction ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t\t\t\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Reaction\", $reaction['reaction']->_icon )->url;\n$return .= <<<CONTENT\n' width=\"20\" height=\"20\" alt='\nCONTENT;\n$return .= htmlspecialchars( $reaction['reaction']->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsTooltip> \n\t\t\t\t\t\t\t\t\t\t<span class='ipsCommentCount'>\nCONTENT;\n$return .= htmlspecialchars( $reaction['count'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<br>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<div class=\"ipsSideMenu ipsAreaBackground_light ipsPad\" data-ipsTabBar data-ipsTabBar-contentArea='#elUserReputation' data-ipsTabBar-itemselector=\".ipsSideMenu_item\" data-ipsTabBar-activeClass=\"ipsSideMenu_itemActive\" data-ipsSideMenu>\n\t\t\t\t\t<h3 class=\"ipsSideMenu_mainTitle ipsAreaBackground_light ipsType_medium\">\n\t\t\t\t\t\t<a href=\"#user_reputation\" class=\"ipsPad_double\" data-action=\"openSideMenu\"><i class=\"fa fa-bars\"><\/i> &nbsp;\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'user_content_type', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;<i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<\/h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $types as $app => $_types ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<h4 class='ipsSideMenu_subTitle'>\nCONTENT;\n\n$val = \"module__{$app}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $_types as $key => $class ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li><a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=reputation&type={$key}&change_section=1\", null, \"profile_reputation\", array( $member->members_seo_name ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $currentType == $key ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"{$class::$title}_pl\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\t\t\t\n\t\t\t\t<\/div>\n\t\t\t<\/aside>\n\t\t\t<section class=\"ipsColumn ipsColumn_fluid\">\n\t\t\t\t<div class='ipsBox'>\n\t\t\t\t\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t<div id='elUserReputation'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->userReputationSection( $table );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/section>\n\t\t<\/div>\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userReputationRows( $table, $headers, $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( \\count( $rows ) ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $rows as $row ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$reaction = \\IPS\\Content\\Reaction::load( $row->rep_reaction );\n$return .= <<<CONTENT\n\n\t\t<li class='ipsDataItem'>\t\t\n\t\t\t\nCONTENT;\n\nif ( !\\IPS\\Content\\Reaction::isLikeMode() ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsDataItem_generic ipsDataItem_size1'>\n\t\t\t\t\t<img src='\nCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Reaction\", $reaction->_icon )->url;\n$return .= <<<CONTENT\n' alt='\nCONTENT;\n$return .= htmlspecialchars( $reaction->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' width='20' height='20' data-ipsTooltip title='\nCONTENT;\n$return .= htmlspecialchars( $reaction->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_center ipsResponsive_hidePhone'>\n\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member == \\IPS\\Request::i()->id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load( \\IPS\\Request::i()->id ), 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load( $row->rep_member ), 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t<span class=''>\n\t\t\t\t\t\nCONTENT;\n\nif ( !\\IPS\\Content\\Reaction::isLikeMode() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $row instanceof \\IPS\\Content\\Comment or $row instanceof \\IPS\\Content\\Review ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$item = $row->item();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member != \\IPS\\Request::i()->id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member_received )->link(), \\IPS\\Member::load( $row->rep_member )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_comment_received', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $item->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $item->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member_received ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), \\IPS\\Member::load( $row->rep_member_received )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_comment_gave', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $item->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $item->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_comment_gave_no_recipient', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $item->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $item->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member != \\IPS\\Request::i()->id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member_received )->link(), \\IPS\\Member::load( $row->rep_member )->link(), $row->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_item_received', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $row->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member_received ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), \\IPS\\Member::load( $row->rep_member_received )->link(), $row->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_item_gave', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $row->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), $row->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_item_gave_no_recipient', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $row->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row instanceof \\IPS\\Content\\Comment or $row instanceof \\IPS\\Content\\Review ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$item = $row->item();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member_received ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), $row->url(), $row->indefiniteArticle(), \\IPS\\Member::load( $row->rep_member_received )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_comment', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $item->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $item->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), $row->url(), $row->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_comment_no_recipient', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $item->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $item->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row->rep_member_received ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), $row->indefiniteArticle(), \\IPS\\Member::load( $row->rep_member_received )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_item', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $row->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\Member::load( $row->rep_member )->link(), $row->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_item_no_recipient', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $row->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $row->mapped('title'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/strong>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t\t<span class='ipsType_light ipsType_medium'>&nbsp;&nbsp;\nCONTENT;\n\n$val = ( $row->rep_date instanceof \\IPS\\DateTime ) ? $row->rep_date : \\IPS\\DateTime::ts( $row->rep_date );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<br>\n\t\t\t\t\nCONTENT;\n\nif ( $result = $row->truncated() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class='ipsType_medium ipsType_richText ipsContained cProfileRepLog_text' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='2 lines'>\n\t\t\t\t\t\t{$result}\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userReputationSection( $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<section class='ipsDataList ipsDataList_large'>\n\t{$table}\n<\/section>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction userReputationTable( $table, $headers, $rows, $quickSearch ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-baseurl='\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-resort='\nCONTENT;\n$return .= htmlspecialchars( $table->resortKey, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.global.core.table\nCONTENT;\n\nif ( $table->canModerate() ):\n$return .= <<<CONTENT\n,core.front.core.moderation\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $table->getPaginationKey() != 'page' ):\n$return .= <<<CONTENT\ndata-pageParam='\nCONTENT;\n$return .= htmlspecialchars( $table->getPaginationKey(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\nCONTENT;\n\nif ( $table->title ):\n$return .= <<<CONTENT\n\n\t\t<h2 class='ipsType_sectionTitle ipsType_reset ipsClear'>\nCONTENT;\n\n$val = \"{$table->title}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\nif ( $table->showAdvancedSearch AND ( (isset( $table->sortOptions ) and !empty( $table->sortOptions )) OR $table->advancedSearch ) OR !empty( $table->filters ) OR $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<ul class=\"ipsButtonRow ipsPos_right ipsClearfix\">\n\t\t\t\nCONTENT;\n\nif ( $table->showAdvancedSearch AND ( ( isset( $table->sortOptions ) and \\count( $table->sortOptions ) > 1 ) OR $table->advancedSearch ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t\nCONTENT;\n\nif ( isset($table->sortOptions)  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"#elSortByMenu_menu\" id=\"elSortByMenu_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"sortButton\" data-ipsMenu data-ipsMenu-activeClass=\"ipsButtonRow_active\" data-ipsMenu-selectable=\"radio\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sort_by', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide\" id=\"elSortByMenu_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu\">\n\t\t\t\t\t\t\t\nCONTENT;\n\n$custom = TRUE;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $table->sortOptions as $k => $col ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $col === $table->sortBy ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$custom = FALSE;\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsMenuValue=\"\nCONTENT;\n$return .= htmlspecialchars( $col, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-sortDirection='\nCONTENT;\n$return .= htmlspecialchars( $table->getSortDirection( $col ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl->setQueryString( array( 'filter' => $table->filter, 'sortby' => $col, 'sortdirection' => $table->getSortDirection( $col ) ) )->setPage( 'page', 1 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$val = \"{$table->langPrefix}sort_{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $table->advancedSearch ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $custom ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-noSelect=\"true\">\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom_sort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\t\nCONTENT;\n\nelseif ( $table->advancedSearch ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom_sort', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( !empty( $table->filters ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#elFilterByMenu_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu\" data-role=\"tableFilterMenu\" id=\"elFilterByMenu_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsMenu data-ipsMenu-activeClass=\"ipsButtonRow_active\" data-ipsMenu-selectable=\"radio\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'filter_by', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide' id='elFilterByMenu_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu'>\n\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsMenuValue='' class='ipsMenu_item \nCONTENT;\n\nif ( !$table->filter ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl->setQueryString( array( 'filter' => '', 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )->setPage( 'page', 1 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"{$table->langPrefix}all\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $table->filters as $k => $q ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsMenuValue='\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsMenu_item \nCONTENT;\n\nif ( $k === $table->filter ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $table->baseUrl->setQueryString( array( 'filter' => $k, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) )->setPage( 'page', 1 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"{$table->langPrefix}{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t\n\t\t\nCONTENT;\n\nif ( $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t<div data-role=\"tablePagination\">\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey() );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\nif ( \\count( $rows ) ):\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsDataList ipsClear \nCONTENT;\n\nforeach ( $table->classes as $class ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $class, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n \nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n' id='elTable_\nCONTENT;\n$return .= htmlspecialchars( $table->uniqueId, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role=\"tableRows\">\n\t\t\t\nCONTENT;\n\n$return .= $table->rowsTemplate[0]->{$table->rowsTemplate[1]}( $table, $headers, $rows );\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsType_center ipsPad'>\n\t\t\t<p class='ipsType_large'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_rows_in_table', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\n\t\nCONTENT;\n\nif ( $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<div data-role=\"tablePagination\">\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey() );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
